{
  "hash": "d4c370864a73c806e4779e0123752f8b",
  "result": {
    "markdown": "# Introduction to Options {#sec-c_calls-puts}\n\n<a target=\"_blank\" href=\"https://colab.research.google.com/github/math-finance-book/notebooks/blob/main/chapter1.ipynb\">\n  <img src=\"images/Open in Colab.png\" alt=\"Open Chapter Code In Colab\" width=\"200\" height=\"34\"/>\n</a>  \n\nFinancial options are rights to buy and sell assets at pre-specified prices.  The rights are traded on exchanges and also as private contracts (called over-the-counter or OTC).  A call option is a right to buy an asset.  A put option is a right to sell an asset.  The pre-specified price is called the exercise price, the strike price, or simply the strike.   The asset to which an option pertains is called the underlying asset, or, more briefly, the underlying.  \n\nHere is a snapshot of market statistics regarding call options on Apple stock (AAPL) traded on the Chicago Board Options Exchange (CBOE).  We are accessing the data courtesy of Yahoo Finance.  We will refer to this data throughout the chapter.\n\n::: {.cell execute='auto' execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport yfinance as yf\nfrom datetime import datetime\nimport pytz\nfrom datetime import datetime\n\nest = pytz.timezone('US/Eastern')\nfmt = '%Y-%m-%d %H:%M:%S %Z%z'\nnow = datetime.today().astimezone(est).strftime(fmt)\n\nticker = \"AAPL\"         # ticker to pull\nkind = \"call\"           # call or put\nmaturity = 4            # option maturity in order of maturities trading\n\ntick = yf.Ticker(ticker.upper())\n\n# Pull last stock price\nclose = tick.history().iloc[-1].Close\n\n# Get maturity date\ndate = tick.options[maturity]\n\n# Pull options data\ndf = (\n    tick.option_chain(date).calls\n    if kind == \"call\"\n    else tick.option_chain(date).puts\n)\n\ndf.lastTradeDate = df.lastTradeDate.map(\n    lambda x: x.astimezone(est).strftime(fmt)\n)\n\n# Formatting\ncols = [\n    \"strike\",\n    \"bid\",\n    \"ask\",\n    \"lastPrice\",\n    \"change\",\n    \"percentChange\",\n    \"lastTradeDate\",\n    \"volume\",\n    \"openInterest\",\n    \"impliedVolatility\",\n]\ndf = df[cols]\ndf[\"impliedVolatility\"] = df[\"impliedVolatility\"].map(\"{:.1%}\".format)\ndf[\"change\"] = df[\"change\"].round(2)\ndf[\"percentChange\"] = (df[\"percentChange\"]/100).map(\"{:.1%}\".format)\ndf.columns = [\n    \"Strike\",\n    \"Bid\",\n    \"Ask\",\n    \"Last Price\",\n    \"Change\",\n    \"% Change\",\n    \"Time of Last Trade\",\n    \"Volume\",\n    \"Open Interest\",\n    \"Implied Volatility\",\n] \ndf = df.set_index(\"Strike\")\nprint(f\"Code was executed at \\t{now}\")\nprint(f\"Last {ticker.upper()} price was \\t${close:.2f}.\")\nprint(f'Maturity date of options:\\t{date}')\npd.set_option('display.max_rows', 500)\npd.set_option('display.max_columns', 500)\npd.set_option('display.width', 1000)\nprint(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCode was executed at \t2024-10-05 12:23:34 EDT-0400\nLast AAPL price was \t$226.80.\nMaturity date of options:\t2024-11-08\n          Bid    Ask  Last Price  Change % Change            Time of Last Trade  Volume  Open Interest Implied Volatility\nStrike                                                                                                                   \n195.0   32.95  34.40       31.75    0.30     1.0%  2024-10-04 12:18:45 EDT-0400      51             57              48.5%\n200.0   28.20  29.70       27.55    1.13     4.3%  2024-10-04 15:14:02 EDT-0400      87             30              44.6%\n210.0   19.70  20.40       19.60    0.28     1.4%  2024-10-04 15:53:10 EDT-0400      11             23              36.3%\n215.0   15.65  17.05       14.75    0.54     3.8%  2024-10-04 12:55:56 EDT-0400      22             34              36.9%\n220.0   12.15  12.35       12.35    1.57    14.6%  2024-10-04 14:50:14 EDT-0400     139             60              30.9%\n225.0    8.95   9.15        9.05    0.25     2.8%  2024-10-04 15:57:25 EDT-0400     235            533              29.5%\n230.0    6.25   6.40        6.35    0.17     2.8%  2024-10-04 15:55:12 EDT-0400     426            717              28.0%\n235.0    4.10   4.20        4.10    0.20     5.1%  2024-10-04 15:57:44 EDT-0400    3799            382              26.7%\n240.0    2.55   2.99        2.62   -0.03    -1.1%  2024-10-04 15:59:35 EDT-0400     231           1411              27.4%\n245.0    1.52   1.80        1.55    0.04     2.6%  2024-10-04 15:59:27 EDT-0400     562            811              26.5%\n250.0    0.87   0.94        0.92    0.00     0.0%  2024-10-04 15:56:08 EDT-0400     340            629              25.2%\n255.0    0.48   0.54        0.49    0.04     8.9%  2024-10-04 15:40:28 EDT-0400      64            367              25.1%\n260.0    0.27   0.32        0.30    0.01     3.4%  2024-10-04 15:56:08 EDT-0400      13             59              25.4%\n265.0    0.15   0.20        0.17    0.00     0.0%  2024-10-03 11:59:51 EDT-0400      10             74              26.0%\n270.0    0.09   0.13        0.11   -0.08   -42.1%  2024-10-04 14:44:13 EDT-0400       6            139              26.7%\n```\n:::\n:::\n\n\n![](images/under_construction.png){fig-align=\"center\"}\n\n\n\n\n::: {#fig-miracle-npv} \n<iframe width=\"780\" height=\"400\" src=\"https://derivatives-book-26ac36570fb8.herokuapp.com/chapter1/npv\"></iframe>\n\nThe net present value is the sum of the present values of the cash flows, and the present value of each cash flow is the cash flow multiplied by the present value factor.  The light blue cells are editable.\n:::\n\n::: {#fig-miracle-amortization} \n<iframe width=\"780\" height=\"700\" src=\"https://derivatives-book-26ac36570fb8.herokuapp.com/chapter1/amortization_schedules\"></iframe>\n\nA loan payment is calculated for the parameters set by the sliders for either monthly or annual payments.  The figure on the left shows the division of each payment between principal and interest.  The figure on the right is the amortization schedule, showing the remaining balance on the loan just before each payment.\n:::\n\n::: {#fig-miracle-retirement} \n<iframe width=\"780\" height=\"700\" src=\"https://derivatives-book-26ac36570fb8.herokuapp.com/chapter1/retirement_planning\"></iframe>\n\nThe figure tracks a retirement account balance in which deposits (savings) are made at the end of each month for a specified number of years.  Withdrawals are then made at the beginning of each month for a specified number of years.  All inputs should be specified in real terms (in today's dollars).  The monthly deposit growth rate is $g = (1+g_a)^{1/12}-1$, where $g_a$ is the annual savings growth rate specified by the slider.  The calculations are explained in more detail in.\n:::\n\n::: {#fig-miracle-retirement-sim} \n<iframe width=\"780\" height=\"1000\" src=\"https://derivatives-book-26ac36570fb8.herokuapp.com/chapter1/retirement_planning_sim\"></iframe>\n\nA retirement account is tracked assuming monthly deposits and withdrawals as in , except that the monthly returns are randomly generated from a normal distribution. The monthly mean return is taken to be the annual mean divided by 12, and the monthly standard deviation is taken to be the annual standard deviation divided by the square root of 12, where the annual mean and standard deviation are specified by the sliders. 5,000 possible lifetimes are simulated, and the distribution of the 5,000 ending balances is described in the table. The figure on the left in the second row is a box plot of the ending balances, and the figure on the right displays the percentiles of the ending balance distribution, supplementing the information in the table.\n:::\n\n\n::: {#fig-miracle-irr} \n<iframe width=\"780\" height=\"1000\" src=\"https://derivatives-book-26ac36570fb8.herokuapp.com/chapter1/irr\"></iframe>\n\nThe table on the right illustrates the NPV calculation as in @fig-miracle-npv, using the internal rate of return as the discount rate.  In this case, the NPV is zero.  The figure plots the NPV as a function of the discount rate.  The IRR is the rate at which the NPV curve crosses zero.  The light blue cells are editable.\n:::\n\n\n## Intrinsic Value and Time Value\n\n\n## Investing in Options\n\n\n## Hedging with Options\n\n\n## Selling Options for Income\n\n\n## Option Spreads\n\n\n## Put-Call Parity\n\n\n## American Options\n\n\n## Dividends\n\n",
    "supporting": [
      "Chapter1_files"
    ],
    "filters": [],
    "includes": {}
  }
}