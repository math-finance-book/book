{
  "hash": "95d9e5bf957243b279538565276fca5f",
  "result": {
    "engine": "jupyter",
    "markdown": "\\newcommand{\\d}{\\,\\mathrm{d}}\n\\newcommand{\\e}{\\mathrm{e}}\n\\newcommand{\\E}{\\mathbb{E}}\n\n\n\n# Greeks and Hedging {#sec-c:greeks} \n\n::: {#21f96ad2 .cell execution_count=1}\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<script type=\"text/javascript\" async src=\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_SVG\"></script>\n```\n:::\n:::\n\n\n![](under_construction.jpg)\n\n\n\nThe derivatives (calculus derivatives, not financial derivatives!) of an option pricing formula with respect to the inputs are commonly called Greeks.  \\index{Greeks} The most important Greek is  the option delta.  This measures the sensitivity of the option value to changes in the value of the underlying asset.  The following table shows the standard Greeks, with reference to the Black-Scholes pricing formula.\n\n\\begin{table}\n\\centering\n\\caption{Black-Scholes Greeks}\n\\begin{tabular}{lccccc}\n\\hline \\\\\n\\bfseries{Input} & \\bfseries{Input Symbol} & \\qquad &\\bfseries{Greek} & \\qquad & \\bfseries{Greek Symbol}\\\\\n\\hline \\\\\nStock price & $S$  &\\qquad& delta &\\qquad& $\\delta$ \\\\\n\\hline \\\\\ndelta & $\\delta$ &\\qquad& gamma&\\qquad & $\\Gamma$\\\\\n\\hline \\\\\n- Time to maturity  & $-T$&\\qquad& theta &\\qquad& $\\Theta$ \\\\\n\\hline \\\\\nVolatility & $\\sigma$&\\qquad& vega &\\qquad& $\\cal{V}$ \\\\\n\\hline \\\\\nInterest rate & $r$ &\\qquad& rho&\\qquad & $\\rho$\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n| **Input**          | **Input Symbol** |       | **Greek**  |       | **Greek Symbol** |\n| ------------------ | ---------------- | ----- | ---------- | ----- | ---------------- |\n| Stock price        | $S$              |       | delta      |       | $\\delta$         |\n| delta              | $\\delta$         |       | gamma      |       | $\\Gamma$         |\n| - Time to maturity | $-T$             |       | theta      |       | $\\Theta$         |\n| Volatility         | $\\sigma$         |       | vega       |       | $\\cal{V}$        |\n| Interest rate      | $r$              |       | rho        |       | $\\rho$           |\n\n\nThe second line of the above shows $\\delta$ as an input.^[The delta is frequently denoted by the upper case $\\Delta$, but we will use the lower case, reserving the upper case for discrete changes, e.g., $\\Delta t$.  One may have noticed also that the symbol for vega is a little different from the others; this reflects the fact that  vega is not actually a Greek letter.]  Of course, it is not an input but instead is calculated.  Gamma, the derivative of $\\delta$, is the second derivative of the option price with respect to the underlying asset price.  The reason for calculating $\\Theta$ as the derivative with respect to $-T$ instead of $T$ is that the time-to-maturity $T$ decreasing ($-T$ increasing) is equivalent to time passing, so $\\Theta$ measures the change in the option value when time passes.  \n\nWe can calculate these from the Black-Scholes formula using the chain rule from differential calculus.  The derivative of the normal distribution function $\\mathrm{N}$ is the normal density function $\\mathrm{n}d$ defined as\n$$\\mathrm{n}d(d) = \\frac{1}{\\sqrt{2\\pi}}\\mathrm{e}^{-d^2/2}\\; .$$\nOne can easily verify directly that\n$$\n\\mathrm{e}^{-q T}S\\mathrm{n}d(d_1)=\\mathrm{e}^{-rT}K\\mathrm{n}d(d_2)\\;,\n$$ {#eq-greeksimplify}\n\nwhich simplifies the calculations for the Black-Scholes call option pricing formula. \nFor this formula, the Greeks are as follows:\n\\begin{align*}\n\\delta &= \\mathrm{e}^{-q T}\\mathrm{N}(d_1) + \\mathrm{e}^{-q T}S\\mathrm{n}d(d_1)\\frac{\\partial d_1}{\\partial S} -\\mathrm{e}^{-rT}K\\mathrm{n}d(d_2)\\frac{\\partial d_2}{\\partial S}\\\\\n&= \\mathrm{e}^{-q T}\\mathrm{N}(d_1) + \\mathrm{e}^{-q T}S\\mathrm{n}d(d_1)\\left(\\frac{\\partial d_1}{\\partial S}-\\frac{\\partial d_2}{\\partial S}\\right)\\\\\n&=\\mathrm{e}^{-q T}\\mathrm{N}(d_1)\\;,\\\\ \n\\Gamma &=\\mathrm{e}^{-q T}\\mathrm{n}d(d_1)\\frac{\\partial d_1}{\\partial S}= \\mathrm{e}^{-q T}\\mathrm{n}d(d_1)\\frac{1}{S\\sigma\\sqrt{T}}\\;,\n\\end{align*}\n\\begin{align*}\n \\Theta &=-\\mathrm{e}^{-q T}S\\mathrm{n}d(d_1)\\frac{\\partial d_1}{\\partial T} +q \\mathrm{e}^{-q T}S\\mathrm{N}(d_1) \\\\\n&\\quad + \\mathrm{e}^{-rT}K\\mathrm{n}d(d_2)\\frac{\\partial d_2}{\\partial T} -r\\mathrm{e}^{-rT}K\\mathrm{N}(d_2)\\\\\n&=\\mathrm{e}^{-q T}S\\mathrm{n}d(d_1)\\left(\\frac{\\partial d_2}{\\partial T}-\\frac{\\partial d_1}{\\partial T}\\right)\\\\\n&\\quad + q \\mathrm{e}^{-q T}S\\mathrm{N}(d_1)-r\\mathrm{e}^{-rT}K\\mathrm{N}(d_2)\\\\\n&=-\\mathrm{e}^{-q T}S\\mathrm{n}d(d_1)\\frac{\\sigma}{2\\sqrt{T}}+ q \\mathrm{e}^{-q T}S\\mathrm{N}(d_1)-r\\mathrm{e}^{-rT}K\\mathrm{N}(d_2)\\;,\\\\\n \\cal{V}&=\\mathrm{e}^{-q T}S\\mathrm{n}d(d_1)\\frac{\\partial d_1}{\\partial \\sigma} - \\mathrm{e}^{-rT}K\\mathrm{n}d(d_2)\\frac{\\partial d_2}{\\partial \\sigma}\\\\\n&=\\mathrm{e}^{-q T}S\\mathrm{n}d(d_1)\\left(\\frac{\\partial d_1}{\\partial \\sigma}-\\frac{\\partial d_2}{\\partial \\sigma}\\right)\\\\\n&=\\mathrm{e}^{-q T}S\\mathrm{n}d(d_1)\\sqrt{T}\\;,\\\\\n \\rho &=\\mathrm{e}^{-q T}S\\mathrm{n}d(d_1)\\frac{\\partial d_1}{\\partial r} - \\mathrm{e}^{-rT}K\\mathrm{n}d(d_2)\\frac{\\partial d_2}{\\partial r} +T\\mathrm{e}^{-rT}K\\mathrm{N}(d_2)\\\\\n&=\\mathrm{e}^{-q T}S\\mathrm{n}d(d_1)\\left(\\frac{\\partial d_1}{\\partial r}-\\frac{\\partial d_2}{\\partial r}\\right)+T\\mathrm{e}^{-rT}K\\mathrm{N}(d_2)\\\\\n&=T\\mathrm{e}^{-rT}K\\mathrm{N}(d_2)\\;.\n\\end{align*} \n\n\nWe can calculate the Greeks of a European put option from the call option Greeks and put-call parity:\n$$\\text{Put Price} = \\text{Call Price} +\\mathrm{e}^{-rT}K- \\mathrm{e}^{-q T}S_0\\; .$$\nFor example, the delta of a put is the delta of a call (with the same strike and maturity) minus $\\mathrm{e}^{-q T}$, and the gamma of a put is the same as the gamma of the corresponding call.\n\n## Delta Hedging {#sec-s:deltahedging}\n\nThe ability to create a fully hedged (risk-free) portfolio of the stock and an option is the essence of the arbitrage argument underlying the Black-Scholes formula, as we saw in @sec-c:arbitrage for the binomial model.  For a call option, such a portfolio consists of delta shares of the underlying asset and a short call option, or a short position of delta shares of the underlying and a long call option.  \\index{delta hedge} These portfolios have no instantaneous exposure to the price of the underlying.  To create a perfect hedge, the portfolio must be adjusted continuously, because the delta changes when the price of the underlying changes and when time passes.  In practice, any hedge will therefore be imperfect, even if the assumptions of the model are satisfied. \n\nWe first consider the continuous-time hedging argument.  Consider a European call option with maturity $T$, and let $C(S,t)$ denote the value of the option at date $t<T$ when the stock price is $S$ at date $t$.  Consider a portfolio that is short one call option and long $\\delta$ shares of the underlying asset and that has a (short) cash position equal to $C-\\delta S$.  This portfolio has zero value at date $t$.  \n\nThe change in the value of the portfolio in an instant $\\d  t$ is\n$$\n-\\d  C + \\delta \\d   S + q \\delta S\\d   t+(C-\\delta S)r\\d   t\\;.\n$$ {#eq-changeportfoliovalue}\n\nThe first term reflects the change in the value of the option, the second term is the capital gain or loss on $\\delta$ shares of stock, the third term is the dividends received on $\\delta$ shares of stock, and the fourth term is the interest expense on the short cash position.\n\nOn the other hand, we know from Ito's formula that\n\n$$\n\\d  C = \\frac{\\partial C}{\\partial S}\\d   S + \\frac{\\partial C}{\\partial t}\\d   t + \\frac{1}{2}\\frac{\\partial^2C}{\\partial S^2} (\\d  S)^2  \n$$\n$$\n= \\delta \\d   S + \\Theta \\d   t + \\frac{1}{2}\\Gamma \\sigma^2S^2\\d   t\\;.\n$$ {#eq-changeportfoliovalue2}\n\n\nSubstituting @eq-changeportfoliovalue2 into @eq-changeportfoliovalue shows that  the change in the value of the portfolio is\n$$\n-\\Theta \\d   t - \\frac{1}{2}\\Gamma \\sigma^2S^2\\d   t+ q \\delta S\\d   t+(C-\\delta S)r\\d   t\\;.\n$$ {#eq-hedgeprofits}\n\nSeveral aspects of this are noteworthy.  First, as noted earlier, the delta hedge (being long $\\delta$ shares of the underlying) eliminates the exposure to changes in the price of the underlying---there is no $\\d  S$ term in @eq-hedgeprofits.  Second, $\\Theta$ will be negative, because it captures the time decay in the option value; being short the option means the portfolio will profit from time decay at rate $-\\Theta$.  Third, this portfolio is short gamma.  We can also say it is short convexity, the term convexity \\index{convexity} referring to the convex shape of the option value as a function of the price of the underlying, which translates mathematically to a positive second derivative (gamma).  The volatility in the stock makes convexity valuable, and a portfolio that is short convexity will suffer losses.  Finally, the portfolio is earning dividends but paying interest.\n\nIt is straightforward to check, from the definitions of $\\Theta$, $\\Gamma$ and $\\delta$ in the preceding section, that\nthe sum of the terms in @eq-hedgeprofits is zero.  The time decay in the option value and dividends received on the shares of the underlying exactly offset the losses due to convexity and interest.\nTherefore, the delta hedge is a perfect hedge.  The portfolio, which has a zero cost, neither earns nor loses money.  This is true not only on average but for every possible change in the stock price.  \n\nTo see how well this works with only discrete adjustments to the hedge, one can simulate the changes in $S$ over time and sum the gains and losses over discrete rebalancing periods.  One should input the actual (not risk-neutral) expected rate of return on the asset to compute the actual distribution of gains and losses.  \n\n## Gamma Hedging {#sec-s:gammahedging}\n\nTo attempt to improve the performance of a discretely rebalanced delta hedge, one can use another option to create a portfolio that is both delta and gamma neutral.  Being delta neutral means hedged as in the previous section---the portfolio value has no exposure to changes in the underlying asset price.  In other words, it means that the derivative of the portfolio value with respect to the price of the underlying (the portfolio delta) is zero.  Being gamma neutral means that the delta of the portfolio has no exposure to changes in the underlying price, which is equivalent to the second derivative of the portfolio value with respect to the price of the underlying (the portfolio gamma) being zero.  If the delta truly did not change, then there would be no need to rebalance continuously, and hence no hedging error introduced by only adjusting the portfolio at discrete times rather than continuously.   However, there is certainly no guarantee that a discretely-rebalanced delta/gamma hedge will perform better than a discretely rebalanced delta hedge.  \\index{gamma hedge}\n\nA delta/gamma hedge can be constructed as follows.  Suppose we have written (shorted) a call option and we want to hedge both the delta and gamma using the underlying asset and another option, for example, another call option with a different strike.  In practice, one would want to use a liquid option for this purpose, which typically means that the strike of the option will be near the current value of the underlying (i.e., the option used to hedge would be approximately at the money). \n\nLet $\\delta$ and $\\Gamma$ denote the delta and gamma of the written option and let $\\delta'$ and $\\Gamma'$ denote the delta and gamma of the option used to hedge.  Consider holding  $a$ of shares of the stock and $b$ units of the option used to hedge in conjunction with the short option.  The delta of the stock is one ($\\d  S/\\d  S = 1$), so to obtain a zero portfolio delta we need\n\n$$\n0 = - \\delta + a + b\\delta'.\n$$ {#eq-portfoliodelta}\n\nThe gamma of the stock is zero ($\\d ^2 S/\\d  S^2 = d\\,1/\\d  S = 0$), so to obtain a zero portfolio gamma we need\n\n$$\n0 = - \\Gamma + b\\Gamma'\\;. \n$$ {#eq-portfoliogamma}\n\n\n@eq-portfoliogamma shows that we should hold enough of the second option to neutralize the gamma of the option we have shorted; i.e.,\n$$\\\nb= \\frac{\\Gamma}{\\Gamma'}\n$$\n@eq-portfoliodelta shows that we should use the stock to delta hedge the portfolio of options; i.e.,\n$$\na=\\delta - \\frac{\\Gamma}{\\Gamma'}\\delta'\\;.\n$$\n\n",
    "supporting": [
      "Chapter_Greeks_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n<script type=\"text/javascript\">\nwindow.PlotlyConfig = {MathJaxConfig: 'local'};\nif (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});}\nif (typeof require !== 'undefined') {\nrequire.undef(\"plotly\");\nrequirejs.config({\n    paths: {\n        'plotly': ['https://cdn.plot.ly/plotly-2.35.2.min']\n    }\n});\nrequire(['plotly'], function(Plotly) {\n    window._Plotly = Plotly;\n});\n}\n</script>\n\n"
      ]
    }
  }
}