<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>6&nbsp; Ito Processes and Ito’s Formula – Pricing and Hedging Derivative Securities: Theory and Methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Chapter_GBM.html" rel="next">
<link href="./Chapter_Brownian.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2486e1f0a3ee9ee1fc393803a1361cdb.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-6561bbde787c299e21493071c8edc6ff.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-bb6b93f51bf5a7975605005bd985cc1c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/quarto-contrib/foldbox/foldbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.35.2.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>

<style>
.Exercise {
  --color1: #ede29d;
  --color2: #8c813a;
}
.ToDo {
  --color1: #a7f2d8;
  --color2: #50997f;
}
.Principle {
  --color1: #e3aab2;
  --color2: #8f575f;
}
.Extra {
  --color1: #d5deed;
  --color2: #6d778a;
}
.Example {
  --color1: #e8cc97;
  --color2: #7d6538;
}
.Rule {
  --color1: #a1bced;
  --color2: #38568f;
}
.InProgress {
  --color1: #eaacf2;
  --color2: #75387d;
}
.Done {
  --color1: #e8cc97;
  --color2: #7d6538;
}
</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Chapter_Brownian.html">Part II: Mathematical Tools</a></li><li class="breadcrumb-item"><a href="./Chapter_Ito.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ito Processes and Ito’s Formula</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Pricing and Hedging Derivative Securities: Theory and Methods</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/math-finance-book/book-code.git" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Part I: Foundations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Options.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Options</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Futures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Futures and Swaps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Arbitrage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Arbitrage Pricing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Digitals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Pricing Digitals</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Part II: Mathematical Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Brownian.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Brownian Motion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Ito.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ito Processes and Ito’s Formula</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_GBM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Geometric Brownian Motion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Girsanov.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Girsanov’s Theorem</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Deltas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Delta Hedges and PDEs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Part III: Black-Scholes and Extensions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_BlackScholes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Black-Scholes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Americans.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">American Options</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Greeks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Greeks and Hedging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_FX.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">FX and Quantos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Merton.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Merton, Black, and Margrabe</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Asians.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Asians, Baskets, and Spreads</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Exotics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Other Exotics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Part IV: Alternative Models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_GARCH.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">GARCH Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_StochasticVol.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Stochastic Volatility</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Jumps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Jumps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_VarianceSwaps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Variance Swaps</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Part V: Numerical Methods</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_MonteCarlo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Monte Carlo Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Binomial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Binomial and Trinomial Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_PDEs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">PDE Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Fourier.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Fourier Transforms</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_MachineLearning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Machine Learning</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Part VI: Fixed Income</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_FixedIncome.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Fixed-Income Concepts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_FixedIncomeDerivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Fixed-Income Derivatives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Vasicek.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Vasicek and Extensions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Survey.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Term Structure Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendix</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AppendixA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Miscellaneous Facts about Continuous-Time Models</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Chapter_Brownian.html">Part II: Mathematical Tools</a></li><li class="breadcrumb-item"><a href="./Chapter_Ito.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ito Processes and Ito’s Formula</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-c:ito" class="quarto-section-identifier"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ito Processes and Ito’s Formula</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>We use the changes of a Brownian motion to model randomness. We build other stochastic processes using those changes. The general idea is <span class="math display">\[\text{change} = \text{mean} + \text{std dev} \times \text{change in Brownian motion}\,.\]</span> The mathematical foundations for our construction were created by K. Ito. The key concepts are the Ito integral, Ito processes, and Ito’s formula (also called Ito’s lemma). Using these foundations, we can build quite general processes from changes in Brownian motions, including processes with non-normal distributions.</p>
<section id="sec-s:discreteito" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="sec-s:discreteito"><span class="header-section-number">6.1</span> Examples</h2>
<p>We begin with some simple examples. Consider a discrete partition of a time interval: <span class="math display">\[0=t_0 &lt; t_1&lt; \cdots &lt; t_{n-1} &lt; t_n=t\]</span> with equally spaced times. Let <span class="math inline">\(\Delta t\)</span> denote the difference between successive times.</p>
<p>First, let’s drop the randomness entirely. Consider the equation <span id="eq-ito_discrete_1"><span class="math display">\[X_{t_i} -  X_{t_{i-1}} = \mu X_{t_{i-1}}\Delta t \qquad(6.1)\]</span></span> for a constant <span class="math inline">\(\mu\)</span>. Thus, we have “change <span class="math inline">\(\,=\,\)</span> mean,” where the mean is proportional to the previous value with proportionality factor <span class="math inline">\(\mu \Delta t\)</span>. <a href="#fig-discrete-interest" class="quarto-xref">Figure&nbsp;<span>6.1</span></a> presents a plot of <span class="math inline">\(X\)</span>, for particular values of <span class="math inline">\(X_0\)</span>, <span class="math inline">\(\mu\)</span>, and <span class="math inline">\(\Delta t\)</span>.</p>
<p>If we increase <span class="math inline">\(n\)</span>, making <span class="math inline">\(\Delta t\)</span> smaller, then <span class="math inline">\(X\)</span> converges to the solution of the ordinary differential equation <span id="eq-ito_discrete_2"><span class="math display">\[\,\mathrm{d}X_t = \mu X_t\,\mathrm{d}t\,. \qquad(6.2)\]</span></span> <a href="#eq-ito_discrete_2" class="quarto-xref">Equation&nbsp;<span>6.2</span></a> has a known solution, which is <span id="eq-ito_discrete_3"><span class="math display">\[X_t = X_0 \mathrm{e}^{\mu t}\,. \qquad(6.3)\]</span></span> To verify this, we only need to differentiate <span class="math inline">\(X\)</span> defined in <a href="#eq-ito_discrete_3" class="quarto-xref">Equation&nbsp;<span>6.3</span></a>: <span class="math display">\[\frac{\,\mathrm{d}X_t}{\,\mathrm{d}t} = \mu X_0 \mathrm{e}^{\mu t} = \mu X_t\,.\]</span> The function presented in <a href="#eq-ito_discrete_3" class="quarto-xref">Equation&nbsp;<span>6.3</span></a> is also shown in <a href="#fig-discrete-interest" class="quarto-xref">Figure&nbsp;<span>6.1</span></a>.</p>
<div id="Extra-6.1" class="Extra">
<p></p><details class="Extra fbx-simplebox fbx-default"><summary><strong>Theory Extra 6.1</strong></summary><div>To see how one might guess that <a href="#eq-ito_discrete_3" class="quarto-xref">Equation&nbsp;<span>6.3</span></a> is the solution of <a href="#eq-ito_discrete_2" class="quarto-xref">Equation&nbsp;<span>6.2</span></a>, we can examine the logarithm of <span class="math inline">\(X\)</span>. A general rule gives us <span class="math inline">\(\,\mathrm{d}\log X = \,\mathrm{d}X / X\)</span>, so <span class="math inline">\(\,\mathrm{d}\log X = \mu \,\mathrm{d}t\)</span>. We can integrate both sides of this to obtain <span class="math inline">\(\log X_t - \log X_0 = \mu t\)</span>. Now, rearranging and exponentiating gives <span class="math inline">\(X_t = X_0\mathrm{e}^{\mu t}\)</span>. Later, we follow similar steps to see that <a href="#eq-ito_discrete_6" class="quarto-xref">Equation&nbsp;<span>6.6</span></a> is the solution of <a href="#eq-ito_discrete_5" class="quarto-xref">Equation&nbsp;<span>6.5</span></a>.<p></p>
</div></details>
</div>
<div id="cell-fig-discrete-interest" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>mu <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">10</span>   <span class="co"># number of subdivisions</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> <span class="dv">1</span>     <span class="co"># last date</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>Deltat <span class="op">=</span> t<span class="op">/</span>n</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>X1 <span class="op">=</span> np.ones(n<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    X1[i] <span class="op">=</span> X1[i<span class="op">-</span><span class="dv">1</span>] <span class="op">+</span> mu <span class="op">*</span> X1[i<span class="op">-</span><span class="dv">1</span>] <span class="op">*</span> Deltat</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>X2 <span class="op">=</span> np.exp(mu <span class="op">*</span> np.arange(<span class="dv">0</span>, t<span class="op">+</span>Deltat, Deltat))</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>fig.add_trace(</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    go.Scatter(</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>np.arange(<span class="dv">0</span>, t<span class="op">+</span>Deltat, Deltat), </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>X1, </span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">'markers'</span>, </span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">'Difference Eq.'</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">'t = %</span><span class="sc">{x:.2f}</span><span class="st">&lt;br&gt;B = %</span><span class="sc">{y:.2f}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;'</span>  <span class="co"># </span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>fig.add_trace(</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    go.Scatter(</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>np.arange(<span class="dv">0</span>, t<span class="op">+</span>Deltat, Deltat), </span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>X2, </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">'lines'</span>, </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">'Differential Eq.'</span>,</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">'t = %</span><span class="sc">{x:.2f}</span><span class="st">&lt;br&gt;B = %</span><span class="sc">{y:.2f}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;'</span>  <span class="co"># </span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    showlegend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    xaxis_title<span class="op">=</span><span class="st">'Time'</span>,</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    yaxis_title<span class="op">=</span><span class="st">''</span>,</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    template<span class="op">=</span><span class="st">'plotly_white'</span>,</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">300</span>,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="fl">0.1</span>,</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>        xanchor<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>        yanchor<span class="op">=</span><span class="st">"top"</span>,</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-discrete-interest" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-discrete-interest-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.1: The functions <span class="math inline">\(X\)</span> satisfying <a href="#eq-ito_discrete_1" class="quarto-xref">Equation&nbsp;<span>6.1</span></a> (difference equation) and <a href="#eq-ito_discrete_3" class="quarto-xref">Equation&nbsp;<span>6.3</span></a> (differential equation) for X0 = 1, mu = 1, and Delta t = 0.1.
</figcaption>
<div aria-describedby="fig-discrete-interest-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>                            <div id="31e498cb-b95f-4269-a6c2-266bde68da2c" class="plotly-graph-div" style="height:300px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("31e498cb-b95f-4269-a6c2-266bde68da2c")) {                    Plotly.newPlot(                        "31e498cb-b95f-4269-a6c2-266bde68da2c",                        [{"hovertemplate":"t = %{x:.2f}\u003cbr\u003eB = %{y:.2f}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"markers","name":"Difference Eq.","x":[0.0,0.1,0.2,0.30000000000000004,0.4,0.5,0.6000000000000001,0.7000000000000001,0.8,0.9,1.0],"y":[1.0,1.1,1.2100000000000002,1.3310000000000002,1.4641000000000002,1.61051,1.7715610000000002,1.9487171,2.1435888100000002,2.357947691,2.5937424601],"type":"scatter"},{"hovertemplate":"t = %{x:.2f}\u003cbr\u003eB = %{y:.2f}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines","name":"Differential Eq.","x":[0.0,0.1,0.2,0.30000000000000004,0.4,0.5,0.6000000000000001,0.7000000000000001,0.8,0.9,1.0],"y":[1.0,1.1051709180756477,1.2214027581601699,1.3498588075760032,1.4918246976412703,1.6487212707001282,1.822118800390509,2.0137527074704766,2.225540928492468,2.45960311115695,2.718281828459045],"type":"scatter"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"legend":{"x":0.1,"y":1,"xanchor":"left","yanchor":"top"},"showlegend":true,"xaxis":{"title":{"text":"Time"}},"yaxis":{"title":{"text":""}},"height":300},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('31e498cb-b95f-4269-a6c2-266bde68da2c');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</figure>
</div>
</div>
<p>Now, let’s include randomness. Let’s make the noise proportional to the value of <span class="math inline">\(X\)</span>, So, let <span class="math inline">\(B\)</span> be a standard Brownian motion and consider the equation <span id="eq-ito_discrete_4"><span class="math display">\[X_{t_i} - X_{t_{i-1}} = \mu X_{t_{i-1}}\Delta t + \sigma X_{t_{i-1}} \Delta B_{t_i} \qquad(6.4)\]</span></span> where <span class="math inline">\(\sigma\)</span> is another constant, and <span class="math inline">\(\Delta B_{t_i} = B_{t_i} - B_{t_{i-1}}\)</span>. A solution <span class="math inline">\(X\)</span> of this equation has random paths, due to the random noise <span class="math inline">\(\Delta B_{t_i}\)</span>. An example of a path is shown in <a href="#fig-discrete-random" class="quarto-xref">Figure&nbsp;<span>6.2</span></a>. Ito showed how we can take the limit of this equation as we make <span class="math inline">\(\Delta t\)</span> smaller and make sense of the equation <span id="eq-ito_discrete_5"><span class="math display">\[
\,\mathrm{d}X_t = \mu X_t\,\mathrm{d}t + \sigma X_t \,\mathrm{d}B_t\,.
\qquad(6.5)\]</span></span> The solution <span class="math inline">\(X\)</span> of <a href="#eq-ito_discrete_5" class="quarto-xref">Equation&nbsp;<span>6.5</span></a> is <span id="eq-ito_discrete_6"><span class="math display">\[X_t = \mathrm{e}^{(\mu  - \sigma^2/2)t + \sigma B_t}\,. \qquad(6.6)\]</span></span> An approximate path of this process <span class="math inline">\(X\)</span> is also shown in <a href="#fig-discrete-random" class="quarto-xref">Figure&nbsp;<span>6.2</span></a>. It is generated by taking <span class="math inline">\(\Delta t\)</span> very small, just as we generated approximate paths of Brownian motions in <a href="Chapter_Brownian.html" class="quarto-xref"><span>Chapter 5</span></a>. We can show that <span class="math inline">\(X\)</span> defined in <a href="#eq-ito_discrete_6" class="quarto-xref">Equation&nbsp;<span>6.6</span></a> satisfies <a href="#eq-ito_discrete_5" class="quarto-xref">Equation&nbsp;<span>6.5</span></a> by differentiating, as we showed that <span class="math inline">\(X\)</span> defined in <a href="#eq-ito_discrete_3" class="quarto-xref">Equation&nbsp;<span>6.3</span></a> satisfies <a href="#eq-ito_discrete_2" class="quarto-xref">Equation&nbsp;<span>6.2</span></a>. However, we first need to explain Ito’s formula, which is a formula for differentiating functions of Brownian motions and, more generally, functions of Ito processes.</p>
<div id="cell-fig-discrete-random" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>mu <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Brownian path</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">1000</span>   </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> t<span class="op">/</span>n</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>dB <span class="op">=</span> np.random.normal(scale <span class="op">=</span> np.sqrt(dt), size<span class="op">=</span>n)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> np.zeros(n<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>B[<span class="dv">1</span>:] <span class="op">=</span> np.cumsum(dB)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Brownian path with discrete steps</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>n_discrete <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>Deltat <span class="op">=</span> t<span class="op">/</span>n_discrete</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>B_discrete <span class="op">=</span> B[::<span class="bu">int</span>(n<span class="op">/</span>n_discrete)]</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>DeltaB <span class="op">=</span> np.diff(B_discrete)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co"># X in discrete-time </span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>X1 <span class="op">=</span> np.ones(n_discrete<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n_discrete<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    X1[i] <span class="op">=</span> X1[i<span class="op">-</span><span class="dv">1</span>] <span class="op">+</span> mu <span class="op">*</span> X1[i<span class="op">-</span><span class="dv">1</span>] <span class="op">*</span> Deltat <span class="op">+</span> sigma <span class="op">*</span> X1[i<span class="op">-</span><span class="dv">1</span>] <span class="op">*</span> DeltaB[i<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Continuous-time</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>X2 <span class="op">=</span> np.exp((mu <span class="op">-</span> <span class="fl">0.5</span> <span class="op">*</span> sigma<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> np.arange(<span class="dv">0</span>, t<span class="op">+</span>dt, dt) <span class="op">+</span> sigma <span class="op">*</span> B)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>fig.add_trace(</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    go.Scatter(</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>np.arange(<span class="dv">0</span>, t<span class="op">+</span>Deltat, Deltat), </span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>X1, </span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">'markers'</span>, </span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">'Difference Eq.'</span>,</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">'t = %</span><span class="sc">{x:.2f}</span><span class="st">&lt;br&gt;B = %</span><span class="sc">{y:.2f}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;'</span>  <span class="co"># </span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>fig.add_trace(</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    go.Scatter(</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>np.arange(<span class="dv">0</span>, t<span class="op">+</span>dt, dt), </span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>X2, </span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">'lines'</span>, </span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">'Differential Eq.'</span>,</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">'t = %</span><span class="sc">{x:.2f}</span><span class="st">&lt;br&gt;B = %</span><span class="sc">{y:.2f}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;'</span>  <span class="co"># </span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    showlegend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    xaxis_title<span class="op">=</span><span class="st">'Time'</span>,</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    yaxis_title<span class="op">=</span><span class="st">''</span>,</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    template<span class="op">=</span><span class="st">'plotly_white'</span>,</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">300</span>,</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="fl">0.1</span>,</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>        xanchor<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>        yanchor<span class="op">=</span><span class="st">"top"</span>,</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-discrete-random" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-discrete-random-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.2: Paths of the processes satisfying <a href="#eq-ito_discrete_4" class="quarto-xref">Equation&nbsp;<span>6.4</span></a> (difference equation) and <a href="#eq-ito_discrete_6" class="quarto-xref">Equation&nbsp;<span>6.6</span></a> (differential equation) for X0 = 1, mu = 1, Delta t = 0.1, and sigma = 1.
</figcaption>
<div aria-describedby="fig-discrete-random-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>                            <div id="1aadbc20-9179-40fe-8453-65862c3b2584" class="plotly-graph-div" style="height:300px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("1aadbc20-9179-40fe-8453-65862c3b2584")) {                    Plotly.newPlot(                        "1aadbc20-9179-40fe-8453-65862c3b2584",                        [{"hovertemplate":"t = %{x:.2f}\u003cbr\u003eB = %{y:.2f}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"markers","name":"Difference Eq.","x":[0.0,0.1,0.2,0.30000000000000004,0.4,0.5,0.6000000000000001,0.7000000000000001,0.8,0.9,1.0],"y":[1.0,0.9608776794086387,0.8461615751107214,0.9645760588663749,0.6248410701048965,0.7669102406276002,0.6105647732934869,0.6144300402275543,1.0338331264159812,1.002787464857,1.3595719731659908],"type":"scatter"},{"hovertemplate":"t = %{x:.2f}\u003cbr\u003eB = %{y:.2f}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines","name":"Differential Eq.","x":[0.0,0.001,0.002,0.003,0.004,0.005,0.006,0.007,0.008,0.009000000000000001,0.01,0.011,0.012,0.013000000000000001,0.014,0.015,0.016,0.017,0.018000000000000002,0.019,0.02,0.021,0.022,0.023,0.024,0.025,0.026000000000000002,0.027,0.028,0.029,0.03,0.031,0.032,0.033,0.034,0.035,0.036000000000000004,0.037,0.038,0.039,0.04,0.041,0.042,0.043000000000000003,0.044,0.045,0.046,0.047,0.048,0.049,0.05,0.051000000000000004,0.052000000000000005,0.053,0.054,0.055,0.056,0.057,0.058,0.059000000000000004,0.06,0.061,0.062,0.063,0.064,0.065,0.066,0.067,0.068,0.069,0.07,0.07100000000000001,0.07200000000000001,0.073,0.074,0.075,0.076,0.077,0.078,0.079,0.08,0.081,0.082,0.083,0.084,0.085,0.08600000000000001,0.08700000000000001,0.088,0.089,0.09,0.091,0.092,0.093,0.094,0.095,0.096,0.097,0.098,0.099,0.1,0.101,0.10200000000000001,0.10300000000000001,0.10400000000000001,0.105,0.106,0.107,0.108,0.109,0.11,0.111,0.112,0.113,0.114,0.115,0.116,0.117,0.11800000000000001,0.11900000000000001,0.12,0.121,0.122,0.123,0.124,0.125,0.126,0.127,0.128,0.129,0.13,0.131,0.132,0.133,0.134,0.135,0.136,0.137,0.138,0.139,0.14,0.14100000000000001,0.14200000000000002,0.14300000000000002,0.14400000000000002,0.145,0.146,0.147,0.148,0.149,0.15,0.151,0.152,0.153,0.154,0.155,0.156,0.157,0.158,0.159,0.16,0.161,0.162,0.163,0.164,0.165,0.166,0.167,0.168,0.169,0.17,0.171,0.17200000000000001,0.17300000000000001,0.17400000000000002,0.17500000000000002,0.176,0.177,0.178,0.179,0.18,0.181,0.182,0.183,0.184,0.185,0.186,0.187,0.188,0.189,0.19,0.191,0.192,0.193,0.194,0.195,0.196,0.197,0.198,0.199,0.2,0.201,0.202,0.203,0.20400000000000001,0.20500000000000002,0.20600000000000002,0.20700000000000002,0.20800000000000002,0.209,0.21,0.211,0.212,0.213,0.214,0.215,0.216,0.217,0.218,0.219,0.22,0.221,0.222,0.223,0.224,0.225,0.226,0.227,0.228,0.229,0.23,0.231,0.232,0.233,0.234,0.23500000000000001,0.23600000000000002,0.23700000000000002,0.23800000000000002,0.23900000000000002,0.24,0.241,0.242,0.243,0.244,0.245,0.246,0.247,0.248,0.249,0.25,0.251,0.252,0.253,0.254,0.255,0.256,0.257,0.258,0.259,0.26,0.261,0.262,0.263,0.264,0.265,0.266,0.267,0.268,0.269,0.27,0.271,0.272,0.273,0.274,0.275,0.276,0.277,0.278,0.279,0.28,0.281,0.28200000000000003,0.28300000000000003,0.28400000000000003,0.28500000000000003,0.28600000000000003,0.28700000000000003,0.28800000000000003,0.289,0.29,0.291,0.292,0.293,0.294,0.295,0.296,0.297,0.298,0.299,0.3,0.301,0.302,0.303,0.304,0.305,0.306,0.307,0.308,0.309,0.31,0.311,0.312,0.313,0.314,0.315,0.316,0.317,0.318,0.319,0.32,0.321,0.322,0.323,0.324,0.325,0.326,0.327,0.328,0.329,0.33,0.331,0.332,0.333,0.334,0.335,0.336,0.337,0.338,0.339,0.34,0.341,0.342,0.343,0.34400000000000003,0.34500000000000003,0.34600000000000003,0.34700000000000003,0.34800000000000003,0.34900000000000003,0.35000000000000003,0.35100000000000003,0.352,0.353,0.354,0.355,0.356,0.357,0.358,0.359,0.36,0.361,0.362,0.363,0.364,0.365,0.366,0.367,0.368,0.369,0.37,0.371,0.372,0.373,0.374,0.375,0.376,0.377,0.378,0.379,0.38,0.381,0.382,0.383,0.384,0.385,0.386,0.387,0.388,0.389,0.39,0.391,0.392,0.393,0.394,0.395,0.396,0.397,0.398,0.399,0.4,0.401,0.402,0.403,0.404,0.405,0.406,0.40700000000000003,0.40800000000000003,0.40900000000000003,0.41000000000000003,0.41100000000000003,0.41200000000000003,0.41300000000000003,0.41400000000000003,0.41500000000000004,0.41600000000000004,0.417,0.418,0.419,0.42,0.421,0.422,0.423,0.424,0.425,0.426,0.427,0.428,0.429,0.43,0.431,0.432,0.433,0.434,0.435,0.436,0.437,0.438,0.439,0.44,0.441,0.442,0.443,0.444,0.445,0.446,0.447,0.448,0.449,0.45,0.451,0.452,0.453,0.454,0.455,0.456,0.457,0.458,0.459,0.46,0.461,0.462,0.463,0.464,0.465,0.466,0.467,0.468,0.46900000000000003,0.47000000000000003,0.47100000000000003,0.47200000000000003,0.47300000000000003,0.47400000000000003,0.47500000000000003,0.47600000000000003,0.47700000000000004,0.47800000000000004,0.47900000000000004,0.48,0.481,0.482,0.483,0.484,0.485,0.486,0.487,0.488,0.489,0.49,0.491,0.492,0.493,0.494,0.495,0.496,0.497,0.498,0.499,0.5,0.501,0.502,0.503,0.504,0.505,0.506,0.507,0.508,0.509,0.51,0.511,0.512,0.513,0.514,0.515,0.516,0.517,0.518,0.519,0.52,0.521,0.522,0.523,0.524,0.525,0.526,0.527,0.528,0.529,0.53,0.531,0.532,0.533,0.534,0.535,0.536,0.537,0.538,0.539,0.54,0.541,0.542,0.543,0.544,0.545,0.546,0.547,0.548,0.549,0.55,0.551,0.552,0.553,0.554,0.555,0.556,0.557,0.558,0.559,0.56,0.561,0.562,0.5630000000000001,0.5640000000000001,0.5650000000000001,0.5660000000000001,0.5670000000000001,0.5680000000000001,0.5690000000000001,0.5700000000000001,0.5710000000000001,0.5720000000000001,0.5730000000000001,0.5740000000000001,0.5750000000000001,0.5760000000000001,0.577,0.578,0.579,0.58,0.581,0.582,0.583,0.584,0.585,0.586,0.587,0.588,0.589,0.59,0.591,0.592,0.593,0.594,0.595,0.596,0.597,0.598,0.599,0.6,0.601,0.602,0.603,0.604,0.605,0.606,0.607,0.608,0.609,0.61,0.611,0.612,0.613,0.614,0.615,0.616,0.617,0.618,0.619,0.62,0.621,0.622,0.623,0.624,0.625,0.626,0.627,0.628,0.629,0.63,0.631,0.632,0.633,0.634,0.635,0.636,0.637,0.638,0.639,0.64,0.641,0.642,0.643,0.644,0.645,0.646,0.647,0.648,0.649,0.65,0.651,0.652,0.653,0.654,0.655,0.656,0.657,0.658,0.659,0.66,0.661,0.662,0.663,0.664,0.665,0.666,0.667,0.668,0.669,0.67,0.671,0.672,0.673,0.674,0.675,0.676,0.677,0.678,0.679,0.68,0.681,0.682,0.683,0.684,0.685,0.686,0.687,0.6880000000000001,0.6890000000000001,0.6900000000000001,0.6910000000000001,0.6920000000000001,0.6930000000000001,0.6940000000000001,0.6950000000000001,0.6960000000000001,0.6970000000000001,0.6980000000000001,0.6990000000000001,0.7000000000000001,0.7010000000000001,0.7020000000000001,0.7030000000000001,0.704,0.705,0.706,0.707,0.708,0.709,0.71,0.711,0.712,0.713,0.714,0.715,0.716,0.717,0.718,0.719,0.72,0.721,0.722,0.723,0.724,0.725,0.726,0.727,0.728,0.729,0.73,0.731,0.732,0.733,0.734,0.735,0.736,0.737,0.738,0.739,0.74,0.741,0.742,0.743,0.744,0.745,0.746,0.747,0.748,0.749,0.75,0.751,0.752,0.753,0.754,0.755,0.756,0.757,0.758,0.759,0.76,0.761,0.762,0.763,0.764,0.765,0.766,0.767,0.768,0.769,0.77,0.771,0.772,0.773,0.774,0.775,0.776,0.777,0.778,0.779,0.78,0.781,0.782,0.783,0.784,0.785,0.786,0.787,0.788,0.789,0.79,0.791,0.792,0.793,0.794,0.795,0.796,0.797,0.798,0.799,0.8,0.801,0.802,0.803,0.804,0.805,0.806,0.807,0.808,0.809,0.81,0.811,0.812,0.8130000000000001,0.8140000000000001,0.8150000000000001,0.8160000000000001,0.8170000000000001,0.8180000000000001,0.8190000000000001,0.8200000000000001,0.8210000000000001,0.8220000000000001,0.8230000000000001,0.8240000000000001,0.8250000000000001,0.8260000000000001,0.8270000000000001,0.8280000000000001,0.8290000000000001,0.8300000000000001,0.8310000000000001,0.8320000000000001,0.833,0.834,0.835,0.836,0.837,0.838,0.839,0.84,0.841,0.842,0.843,0.844,0.845,0.846,0.847,0.848,0.849,0.85,0.851,0.852,0.853,0.854,0.855,0.856,0.857,0.858,0.859,0.86,0.861,0.862,0.863,0.864,0.865,0.866,0.867,0.868,0.869,0.87,0.871,0.872,0.873,0.874,0.875,0.876,0.877,0.878,0.879,0.88,0.881,0.882,0.883,0.884,0.885,0.886,0.887,0.888,0.889,0.89,0.891,0.892,0.893,0.894,0.895,0.896,0.897,0.898,0.899,0.9,0.901,0.902,0.903,0.904,0.905,0.906,0.907,0.908,0.909,0.91,0.911,0.912,0.913,0.914,0.915,0.916,0.917,0.918,0.919,0.92,0.921,0.922,0.923,0.924,0.925,0.926,0.927,0.928,0.929,0.93,0.931,0.932,0.933,0.934,0.935,0.936,0.937,0.9380000000000001,0.9390000000000001,0.9400000000000001,0.9410000000000001,0.9420000000000001,0.9430000000000001,0.9440000000000001,0.9450000000000001,0.9460000000000001,0.9470000000000001,0.9480000000000001,0.9490000000000001,0.9500000000000001,0.9510000000000001,0.9520000000000001,0.9530000000000001,0.9540000000000001,0.9550000000000001,0.9560000000000001,0.9570000000000001,0.9580000000000001,0.9590000000000001,0.96,0.961,0.962,0.963,0.964,0.965,0.966,0.967,0.968,0.969,0.97,0.971,0.972,0.973,0.974,0.975,0.976,0.977,0.978,0.979,0.98,0.981,0.982,0.983,0.984,0.985,0.986,0.987,0.988,0.989,0.99,0.991,0.992,0.993,0.994,0.995,0.996,0.997,0.998,0.999,1.0],"y":[1.0,1.0182951492439678,1.05809700356549,1.0541181711178487,1.0761648567927904,1.0671450981108315,1.0805549550419815,1.1106095793650732,1.0543838096984297,1.0867911719675496,1.1285475854305627,1.077352579020809,1.0161813003545992,0.958473596325227,0.9224138768167995,0.9123402341065175,0.9029996613463592,0.9166858105375258,0.8579238627846216,0.8796582649611302,0.9215778015625993,0.9072357107408642,0.9449074452241162,0.8975250150628232,0.8807850767390828,0.8922727123525194,0.8696813791060858,0.8481891923925121,0.8209799703697745,0.8243166136549652,0.7918577654023679,0.8152932286953565,0.8496287863665695,0.8806565363291582,0.8420462944409693,0.8472037894146993,0.9107954850034491,0.8938138335640489,0.9110963377419102,0.868635823305624,0.8972304011219975,0.8666553702444215,0.8842122950930349,0.8852763295682696,0.8737954636421781,0.8762035227233858,0.8274544915208165,0.8455582994092076,0.861767062383546,0.8306710171843716,0.8226315389409747,0.8404609430865567,0.8263185059244448,0.8108333702703471,0.799014210724691,0.8146568204517096,0.756625155305356,0.7369498728554312,0.7419765572353224,0.7821688689053939,0.7931739499678636,0.7976409775566816,0.8208010791115171,0.8226870573449021,0.7876741793281313,0.7812950735239048,0.8167227914994246,0.7856670950804284,0.7404144353426074,0.685102719727406,0.6843140816259704,0.6763361617004251,0.6913500397740949,0.7114772913913816,0.6836271150593097,0.6735839760976848,0.694828060025328,0.7185397576729549,0.7265061003768349,0.7100570210836289,0.7484011667775111,0.7923446455875678,0.8105731620908266,0.7630377093933948,0.7160885609665296,0.7385580205172224,0.7503700891784221,0.7209586153124762,0.7537547560186629,0.7763278487979206,0.7986439572118077,0.7653872611450552,0.7606704266416245,0.7744048422713692,0.7511058837271802,0.7698771564139757,0.8107634947938042,0.8123177905997119,0.8207053101897804,0.9072144583834606,0.9147336759667184,0.9038515805838976,0.9473194456129821,0.940658863988351,0.8825135264890934,0.8588395669245109,0.8968456637398375,0.9062166437203216,0.8765962107860574,0.873929194370448,0.8804457673160028,0.8466692576840296,0.840460557921711,0.8553147910503759,0.8813125969171419,0.8710706588374225,0.8735348215173365,0.8253667273623166,0.8136557702846968,0.8626865155521048,0.8110856510740578,0.8542144503010676,0.8500003414079664,0.8472581363532161,0.8169452032662573,0.8421256038786165,0.8551472759141896,0.8437468248121188,0.8121605193416594,0.8477825821228328,0.8287663805074362,0.800289247798639,0.7780773198865071,0.7635310338600165,0.780068356934479,0.8292626415394165,0.8310403883664499,0.8169227242261066,0.8374629208557438,0.8117653415073157,0.8074270243000164,0.8558272441380647,0.8316086068011845,0.8340583701088438,0.8189778783598995,0.7842213501668158,0.8014101783479386,0.793285644493712,0.8086402716139763,0.7869437972077984,0.7602710979471917,0.7936713682053382,0.8130067870419623,0.7798275726552834,0.7869475427715834,0.7983755651046897,0.7729910620884016,0.765347298920062,0.7723999081974618,0.8211793576880754,0.8134227815980118,0.7919714807206344,0.785613316245816,0.7669177878252695,0.7501874496038942,0.780627835289268,0.7810222291938863,0.8221552432706787,0.8147657485956282,0.8191904392407948,0.8509953561628983,0.774509559181981,0.7912445311306876,0.7965552616963788,0.7331655473606107,0.7109943063803482,0.7095367700197437,0.7200949210850797,0.7204894161645667,0.7103903274654344,0.7258325404448119,0.7355227850952045,0.7180168798960255,0.7303132563418754,0.735130679338025,0.7298653146352,0.7444812951874045,0.7466005342326547,0.7154031951132617,0.6883280034564769,0.6937961651977239,0.6925909089699546,0.7005247280035242,0.6950807402300279,0.6906762024886796,0.713176041934323,0.720183805554314,0.767256271672919,0.7600290409254126,0.7793055344920299,0.7722019937344052,0.7888669825576393,0.8129508968138706,0.7953566158409565,0.8040161990870102,0.8208242498958767,0.7943936438173894,0.786660415231089,0.8286340057980436,0.848895954043661,0.8365167988508729,0.8717894055106357,0.8469366545709099,0.8377702536499111,0.8509028867474853,0.8479764853550532,0.845001033133085,0.8347276697072721,0.815722915825972,0.8160595907803728,0.802867993071936,0.8218768817295042,0.8244139770366378,0.8272980760245647,0.8255172757653252,0.8517826704032742,0.8715298522742522,0.9332066425116872,0.9100527380449212,0.93352397981359,0.9397208566848944,0.914413672766368,0.924339541914749,0.9374606108737755,0.9695120485081448,0.9737085252908606,0.9743941531588094,0.9963214237121929,0.9664816948843669,0.9584447478407527,0.9701080653850717,1.0344255595095355,1.0845868636520288,1.0788087341265997,1.1110493157285612,1.1467687508033941,1.1114689285054957,1.1562023222571607,1.1607709677994993,1.1677310890443144,1.19699645349921,1.2398917386552937,1.2845527407034365,1.1828328983571852,1.1452870635048453,1.1498928475592214,1.146688851222056,1.1762352648817618,1.193053427539174,1.1666457002713495,1.1687558701960337,1.1259769468056857,1.1037863015326517,1.1004843285661392,1.1251020467535147,1.0742150903414083,1.1084782951221006,1.1088401770123368,1.1046325814142677,1.144263750821326,1.133355862043706,1.0883299628871534,1.1160876570087157,1.0414635872927922,1.0248912934879268,1.040746260126236,1.037137389310116,0.9999207346624869,1.0186476788024366,1.0180298829412533,1.0586259290460704,1.0643409969463398,1.0881054009549176,1.0159124502503247,1.014426930342608,0.9890934326134422,1.000019166239698,1.0132424724304914,1.0126676045084675,1.01962678315301,1.0245642551118128,0.9589771019399491,0.9091104231579942,0.8870883890891443,0.8360222478638021,0.8635950122104429,0.8627081247093253,0.8571285732250291,0.8612423944964073,0.8395544966384695,0.8448754984058927,0.8706310499758035,0.8317613489962676,0.8684597918975863,0.8750160732750363,0.9100104524367337,0.8569118048416289,0.8452882305228581,0.8638382581629639,0.8740190116330431,0.8629640991952833,0.8554045374001823,0.8264484000167226,0.7693777632388031,0.7623704590063879,0.7795383491470584,0.7843960539331177,0.8181853408962618,0.8040206906447273,0.8230726565344265,0.8320205582171571,0.8316300591911832,0.8454822772366001,0.871501421389985,0.8536556454182734,0.8202595148721042,0.8216309687214657,0.8082995681808021,0.810726388030757,0.8066486091629514,0.8034718187287296,0.8095039776526944,0.8184124327168937,0.8356058434970123,0.8520549777967497,0.8643736161304671,0.8906342700381412,0.8960186727723556,0.8641596465111486,0.8784914793697562,0.839113925057146,0.8230454145140201,0.8509333032174411,0.8390248220029664,0.8670752328178434,0.8948985519623214,0.8563830671656871,0.8416650458454394,0.8111780149535702,0.8167833420766767,0.8079802723365569,0.8216569406809984,0.8046759921206988,0.7396766063175951,0.7671227953186576,0.7760674368075832,0.7617509536556266,0.7190524266665406,0.7336453505895225,0.7314079677121875,0.7191360413164589,0.7179007997493736,0.731808887267055,0.7453367226893561,0.7383342655606383,0.7212952678659184,0.7398311310545013,0.6959800084293828,0.6829990179380916,0.656000955303029,0.6725266229885026,0.643482656519236,0.6219495206144572,0.639814209250393,0.6442579854402838,0.6696045240910493,0.6982325567418526,0.6690568787092485,0.6972491131687731,0.691914349985512,0.7521025564107032,0.7261021888329768,0.7333569033924462,0.7093345455347517,0.6616467914782648,0.7002654191921732,0.7013067981956793,0.6712429606005711,0.6580464756650062,0.6741537684145354,0.661929880025453,0.6495580013933777,0.6291928322761831,0.6421313216469225,0.6433396396247248,0.6783905393201951,0.6293813127976198,0.6349701567624146,0.663348670051586,0.6416102084957588,0.5650857906549136,0.5785512105466637,0.5980481029386394,0.5821312063723478,0.5490370157109958,0.5584864321481958,0.5593474444273417,0.5264280819363975,0.5010109022392905,0.5012611720235141,0.4605871199383909,0.46845060685989554,0.4565732937634139,0.4432174155691952,0.46204366212938314,0.4616091668296517,0.4570164443839633,0.4658538602816314,0.46628171977815114,0.47577246530359557,0.4886840470570545,0.5048411914645029,0.48498212265847157,0.4497534356329513,0.4726267159110806,0.47831583705813285,0.45976211573305686,0.4513888812673487,0.4527683823918794,0.4693435447131997,0.479716138474299,0.4648013387140133,0.4600816556299217,0.44827837247782826,0.4538494449683056,0.4342820293856061,0.4429472518767172,0.4542119580183859,0.4692941657238422,0.47044716569046996,0.49528582430182505,0.5075527039403757,0.4950097116646357,0.5101104033083,0.49794390439890296,0.5389125001398496,0.5835537282248094,0.5755657702608561,0.6081710168859901,0.5846600102363738,0.5647113978918392,0.5793967909569806,0.5662770051174633,0.5735489780687961,0.582604309264027,0.6103843257004266,0.6008023915044561,0.5889116361034646,0.5959576603402121,0.5844937952581596,0.6004686548954042,0.6247609738704267,0.6415068069299463,0.625801018919239,0.6008857928379309,0.5892002847082191,0.5824376934956315,0.5950964539342037,0.5980786937741736,0.5987565984526246,0.6006217380340649,0.6154209747457693,0.5810630516247948,0.5880056042884461,0.5917864903857787,0.6015387704004052,0.611434757979888,0.6660351340339875,0.6903844272330157,0.7000195625626618,0.7267537584326338,0.7159815763527705,0.7308012859829456,0.7278440147246364,0.7177937552020341,0.6894597251088983,0.6891711112949488,0.6506074019063567,0.6337678950311852,0.6424044114833984,0.6513593992521043,0.6560025584383448,0.6573911334725787,0.6686079000120598,0.6795159306386046,0.7009812751334105,0.7236156549599492,0.7575219564844763,0.7429964881677791,0.702896846891091,0.6747525636941089,0.6967286427951863,0.6489885909983844,0.6520684958322253,0.6767618338410865,0.678811598205355,0.7089035310441871,0.7086061924807632,0.6769390353156916,0.69218345021158,0.6514863121931375,0.6439037145287692,0.5983177922426689,0.6202808317028095,0.6018059266150741,0.5918328126476258,0.6067609805470559,0.5946189210656092,0.6022922933516458,0.5929410284756204,0.6063143881416245,0.5903885805168283,0.5909519337514639,0.6161200464963268,0.5959220792797646,0.5918762467028353,0.6250347416122859,0.6016166337718158,0.6320309715064848,0.619198341946792,0.6170394090215287,0.6200624026996928,0.6178258772916689,0.6398740074794143,0.627463288645696,0.6537479710514407,0.6680839726634389,0.6347103908554809,0.6257954643411742,0.6042342247780169,0.6280016997721121,0.5805178697657314,0.5560508078479112,0.5594928144564212,0.5796717127318834,0.5539942814155931,0.5219002555283739,0.5597124949078212,0.5597572082975614,0.5588106348975445,0.5640569077912179,0.5730166937184884,0.5970375848466181,0.6360131741453046,0.6496004703836685,0.6498542401867439,0.6418155991433239,0.6451092516729573,0.6927387005492073,0.6985792301245135,0.7148252496920839,0.6743898132104585,0.7387652872574225,0.7176150743707749,0.6582737261709168,0.6610539973899985,0.6369940093724298,0.6277133061419422,0.6206821465468582,0.6352329634865914,0.6309917054493159,0.6275888579689352,0.6207057868357008,0.621231959853746,0.6271681023158819,0.6017845921400297,0.5863699565902012,0.606952245829016,0.6011220311975883,0.6054460605622503,0.6005457216608489,0.592495057913032,0.5853697967296626,0.5620528190807981,0.5354812157442863,0.5058983926816435,0.4976025443520812,0.5291233248080085,0.511294789103265,0.4706274507264125,0.4909618302397354,0.4965639964168485,0.4746165254510477,0.49824254230296544,0.4909169859220582,0.5006080649449718,0.5106728084974935,0.5238145610443937,0.491180470888269,0.5033879823867591,0.5234711660452686,0.5445472685325927,0.5303399325954955,0.543531780644579,0.5630939875185299,0.5454621664021326,0.5463734829379895,0.5143400288532677,0.5168176751528492,0.5068376357784183,0.5118832724912686,0.5100879413720418,0.5131131376694421,0.5211625333337484,0.493465773727373,0.5076911740469059,0.5233860260768602,0.5300718771359699,0.5160006896448954,0.5248630849628129,0.5260893734604063,0.5341113129824675,0.5128783685810979,0.5394088989205055,0.518227999250718,0.5146384447352326,0.5346561356895498,0.5292365327632692,0.5437629131128271,0.5121159106654568,0.5306601333091123,0.5284188276755438,0.5100916975914792,0.5000591899631023,0.5270747900599805,0.5664980701140632,0.5687367879113535,0.5757752989648396,0.5755568975817521,0.5928585411279332,0.5946446360743083,0.5907404142571125,0.639891337927155,0.6268115401941629,0.6492460884624319,0.6456861992254296,0.6126007604174037,0.6346749408697903,0.6400936062212896,0.6439954127665913,0.6639108814936296,0.6762452931377625,0.6916602153677482,0.6706095221021765,0.6842986393206452,0.6828819573964597,0.7115430132712531,0.736475817130181,0.7242222806766296,0.712694905602037,0.7053993741896397,0.707880002644832,0.689471511791378,0.6946941814346024,0.6527668474020207,0.6567055304194164,0.6326239154033942,0.6102696241299317,0.5826931769220576,0.5870783465924977,0.5919266424015759,0.6074274656363222,0.6241582450006948,0.6303235812638225,0.58860641781357,0.587455828714449,0.5842314341554102,0.5947567319421145,0.5541949229277862,0.5438570613189666,0.5562424302343755,0.5558759728323382,0.5464241059152424,0.5492566982547684,0.5456386308877628,0.5683932248908423,0.5806585050364834,0.604962711563983,0.5922694214468919,0.6112322981373806,0.6433630671292934,0.625187051472329,0.5850677930230901,0.5588720563980342,0.5622267806732799,0.5487997573713542,0.5457793048642546,0.5317732325778068,0.5172728983950081,0.5076782392744124,0.501103462380657,0.47634638164321214,0.4697716372337345,0.466919979803811,0.4404915530237085,0.4205269348318803,0.40369696518810816,0.4032804473505614,0.4067099192604334,0.40432678283396156,0.39903705579413307,0.3915592216638081,0.3907913172469678,0.3986938023513878,0.3863759932643513,0.3773170995217476,0.3993339442039565,0.41777592341067554,0.4406529338613767,0.4361311642415966,0.42190954079508663,0.4032580075328357,0.3989748875412351,0.4032079322253206,0.40875934647857154,0.41475362384506537,0.4122918367877301,0.43100790312523934,0.42590103762461085,0.4177646442043075,0.44185688747725077,0.4268707770559387,0.45333531269689764,0.4577370206792358,0.49734122309018397,0.5084651116394872,0.5310099571210001,0.561391903234211,0.5974288633067815,0.6098560170423367,0.6062323266974302,0.6351444900650773,0.6166907398608693,0.6252823449970525,0.5915369576967718,0.5534957962950938,0.569311249015068,0.5327993344560517,0.5280927731390863,0.5165536084496528,0.5211121711140168,0.487868883816309,0.4649846118139108,0.47857054202139393,0.4836293151532288,0.5134475299437221,0.5240932981620753,0.5335444356674431,0.569245033602317,0.5684231201131362,0.5437501765054246,0.5609574182242036,0.5699641760161857,0.5946908627095546,0.5996291903261537,0.5789167945845581,0.58399716935523,0.5876504623934913,0.6173597978890812,0.6389338700832072,0.6568160351094784,0.642186931561153,0.6861057300276925,0.6766906485475214,0.7055801547256858,0.691176617096839,0.6796398114669402,0.6849430374722794,0.6752438022352021,0.6648439991251619,0.7327780432890678,0.7582936528093901,0.7964624495040883,0.7928722992075223,0.775220190396771,0.7591280698981313,0.7548002175926902,0.7656199768595585,0.7596015618443782,0.8136520785926761,0.8253314729947201,0.8363635753349898,0.8407008520980881,0.8797443100225394,0.8905639408321085,0.9465062177636965,1.0174774241925262,0.9811638961347726,1.0009374139026022,0.996169384312744,0.9433160949239734,0.9690377481832949,0.9941702230676334,0.9125454009274134,0.8987949213993152,0.9119012719845638,0.9285954188504019,0.9765024083829174,0.9706950627577411,0.9633167916561647,1.0098859778823817,0.9967559788359452,0.9841926020084437,0.8996366374445138,0.873273591373058,0.8852349549343721,0.890321622721862,0.8950383261189372,0.8789204114729253,0.8700217677537574,0.852107295503545,0.849184948080534,0.8552616605363162,0.836548748727674,0.8873852421148025,0.8883928426157709,0.8585200049033438,0.8412751634040818,0.8136788045921763,0.8428971855266818,0.8284974642123074,0.8343118068706574,0.8339360922348166,0.8472360222228379,0.8744114501511159,0.8474299840210346,0.8167015652499401,0.8065061224188419,0.8566429614455983,0.8503882510067414,0.8303078818513817,0.8087305443944635,0.8321759766050363,0.8379571524468238,0.8407204609042959,0.8362724688307785,0.8024564041729629,0.8365088693706342,0.8686609411719354,0.8385751270028553,0.8358881426694036,0.8112743137342587,0.8021747483456214,0.7960993535365719,0.7973648034740433,0.8350046706226357,0.8342994323206113,0.8741066704865987,0.8415548662893734,0.8040251920996068,0.7931189116993442,0.8316720511222702,0.8440796427299632,0.8681565545093914,0.8600500760440531,0.8655760861030314,0.843167887428583,0.8223320475595423,0.8226098740288335,0.805975128882314,0.8353290937853167,0.8488737564742284,0.812463900726806,0.8343779209985215,0.8468270475491351,0.8477202856187797,0.886819691879408,0.9214021526372579,0.8949742559438785,0.9168610983176314,0.9182010373843301,0.9338447743997286,0.899215479765934,0.9074577916715032,0.909772882934473,0.9192339804090646,0.9023483156503334,0.861929572928828,0.7974060846740053,0.8019250991332993,0.806247441768311,0.8090009110237083,0.8159830705639692,0.8459673241549537,0.8341022736592709,0.8161573288690478,0.7884014055218426,0.8105340133971993,0.8281693078895093,0.8505584911181313,0.8707646761689938,0.8823279659877667,0.8941597904251414,0.8722200672421805,0.856022094165343,0.8478139977220808,0.8643276836419076,0.9379981471955823,0.959882529147372,0.9580806599241809,0.9248177505084642,0.9402676992970372,0.9201271738734301,0.9821519510771258,1.0319790693511095,1.0185858546323228,1.1032889349876231,1.0983087393661912,1.0479859190854943,1.0192718282961966,0.9679826757675793,0.9512363140518432,0.9813591340351903,0.959307392798752,1.0018468935197993,0.9810354135125523,1.0018530109974084,1.023820286684476,0.956888592230608,0.9503324032341545,0.9681814738761941,0.9695964297244626,0.9987334850696673,1.0474444939406633,1.0425230968073775,1.1078286137257136,1.1350162152824141,1.1617025126779883,1.168570007852498,1.214731728528389,1.2321846620288124,1.160997035402996,1.2320583673350007,1.2403282710797061,1.3352129781402138,1.3517760394576375,1.342130050458602,1.434359948033585,1.3778616979600389,1.3199276449293205,1.3347453870197261,1.3221200816842826,1.326541303934262,1.256006147583139,1.2589727446438788,1.2780555522952548,1.2972314237647902,1.267168750294992,1.2992680674808983,1.3101383326309286,1.311548031042351,1.2877924103178298,1.2975542061831562,1.2990220275161484,1.2728923723229866,1.2664954775748791,1.3123342859425633,1.3131463813261828,1.2704222287837403,1.1934941182706527,1.2337526919833333,1.1977552360325956,1.2244279802462512,1.1759925129493294,1.2264059863825614,1.2654603489281737,1.2254680730687377,1.2032972783628844,1.2238624505637885,1.2825872235630968,1.3357704077863979,1.3396554571454649,1.3573677657986287,1.343735350756365,1.2988829639964046,1.3307795813023018,1.3980639592910897,1.475446615213321,1.4084413667706164,1.3788786353042966,1.3908658267305771,1.4139932407700377,1.3759976655815185,1.3519370327950546,1.3326732607857983,1.310132515012348,1.2841833145541761,1.2191933141920221,1.2252929717530856,1.2088037452422595,1.18223797744888],"type":"scatter"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"legend":{"x":0.1,"y":1,"xanchor":"left","yanchor":"top"},"showlegend":true,"xaxis":{"title":{"text":"Time"}},"yaxis":{"title":{"text":""}},"height":300},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('1aadbc20-9179-40fe-8453-65862c3b2584');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</figure>
</div>
</div>
<p>The functions and processes <span class="math inline">\(X\)</span> defined in this section have important interpretations. <a href="#eq-ito_discrete_1" class="quarto-xref">Equation&nbsp;<span>6.1</span></a> can be rewritten to say that the percent change in <span class="math inline">\(X\)</span> is <span class="math inline">\(\mu \Delta t\)</span>. This could represent the value of a savings account that earns interest of <span class="math inline">\(\mu \Delta t\)</span> in each period of length <span class="math inline">\(\Delta t\)</span>. This is the common way of calculating, for example, monthly interest, where <span class="math inline">\(\mu\)</span> is called the annual rate of interest and <span class="math inline">\(\Delta t\)</span> would be <span class="math inline">\(1/12\)</span>. The limiting <a href="#eq-ito_discrete_3" class="quarto-xref">Equation&nbsp;<span>6.3</span></a> is called continuous compounding of interest.</p>
<p>Similarly, <a href="#eq-ito_discrete_4" class="quarto-xref">Equation&nbsp;<span>6.4</span></a> can be rewritten to say that the percent change in <span class="math inline">\(X\)</span> is <span class="math inline">\(\mu \Delta t + \sigma \Delta B\)</span>. This represents a random rate of return – for example, the return of a stock. The expected rate of return in this case is <span class="math inline">\(\mu \Delta t\)</span>, and the variance of the rate of return is <span class="math inline">\(\sigma^2 \Delta t\)</span>. The limiting <a href="#eq-ito_discrete_3" class="quarto-xref">Equation&nbsp;<span>6.3</span></a> is called continuous compounding of returns.</p>
</section>
<section id="sec-s:itoprocesses" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="sec-s:itoprocesses"><span class="header-section-number">6.2</span> Ito Processes</h2>
<p>The meaning of <a href="#eq-ito_discrete_2" class="quarto-xref">Equation&nbsp;<span>6.2</span></a> is that, for all <span class="math inline">\(t  &gt; 0\)</span>, <span class="math display">\[X_t = X_0 +  \int_0^t \mu X_s \,\mathrm{d}s\,.\]</span> We assume the reader is familiar with integrals, so we do not explain this further. The function of time <span class="math inline">\(X\)</span> defined in <a href="#eq-ito_discrete_3" class="quarto-xref">Equation&nbsp;<span>6.3</span></a> satisfies this equation. Similarly, the meaning of <a href="#eq-ito_discrete_5" class="quarto-xref">Equation&nbsp;<span>6.5</span></a> is that, for all <span class="math inline">\(t &gt; 0\)</span>, <span class="math display">\[X_t = X_0 +  \int_0^t \mu X_s \,\mathrm{d}s + \int_0^t \sigma X_s \,\mathrm{d}B_s\,.\]</span> The first integral in this formula is an ordinary integral. The second is an Ito integral, which is to be explained. The sum of an ordinary integral and an Ito integral is called an Ito process. An Ito process always has continuous paths.</p>
<p>Let’s depart from the example of the previous section and consider a process <span class="math inline">\(X\)</span> satisfying, for all <span class="math inline">\(t&gt;0\)</span>, <span id="eq-ito1"><span class="math display">\[X_t = \int_0^t \alpha_s\,\mathrm{d}s + \int_0^t \theta_s \,\mathrm{d}B_s\,. \qquad(6.7)\]</span></span> where <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\theta\)</span> can be stochastic processes. The example of the previous section fits this form, because we could take <span class="math inline">\(\alpha_s = \mu X_s\)</span> and <span class="math inline">\(\theta_s = \sigma X_s\)</span>. The definition of the Ito integral <span class="math display">\[\int_0^t \theta_s \,\mathrm{d}B_s\]</span> is relatively complicated. It is enough for our purposes to know that it can be approximated by a discrete sum <span class="math display">\[\sum_{i=1}^n \theta_{t_{i-1}}(B_{t_i} - B_{t_{i-1}})\,,\]</span> given a partition <span class="math display">\[ 0 = t_0 &lt; \cdots &lt; t_n = t\,,\]</span> when <span class="math inline">\(n\)</span> is large and the time between successive dates is small. The Ito integral exists provided <span class="math inline">\(\theta\)</span> does not anticipate the future (so <span class="math inline">\(\theta_{t_{i-1}}\)</span> is independent of the increment <span class="math inline">\(B_{t_i}- B_{t_{i-1}}\)</span>) and provided <span class="math inline">\(\theta\)</span> does not explode to <span class="math inline">\(\pm \infty\)</span> in finite time, so <span class="math display">\[\int_0^t \theta_s^2 \,\mathrm{d}s &lt; \infty\]</span> for all <span class="math inline">\(t &gt; 0\)</span>, with probability one.</p>
<p>We also write <a href="#eq-ito1" class="quarto-xref">Equation&nbsp;<span>6.7</span></a> as <span id="eq-ito2"><span class="math display">\[
\,\mathrm{d}X_t = \alpha_t\,\mathrm{d}t + \theta_t \,\mathrm{d}B_t\,.
\qquad(6.8)\]</span></span> We interpret this as “change <span class="math inline">\(=\)</span> mean <span class="math inline">\(+\)</span> noise” with <span class="math inline">\(\alpha_t \,\mathrm{d}t\)</span> being the mean and <span class="math inline">\(\theta_t\,\mathrm{d}B_t\)</span> being the mean-zero random noise. The quantity <span class="math inline">\(\alpha_t\)</span> is also called the drift of the process <span class="math inline">\(X\)</span> at time <span class="math inline">\(t\)</span>. The coefficient <span class="math inline">\(\sigma_t\)</span> is called the diffusion coefficient of <span class="math inline">\(X\)</span> at time <span class="math inline">\(t\)</span>. If <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\theta\)</span> are constant, it is standard to refer to an Ito process <span class="math inline">\(X\)</span> as a <span class="math inline">\((\alpha,\theta)\)</span>–Brownian motion. When they are constant, we obtain <span class="math display">\[X_t= X_0 + \alpha t + \theta B_t\,.\]</span></p>
<p>An Ito process as in <a href="#eq-ito1" class="quarto-xref">Equation&nbsp;<span>6.7</span></a> can be a martingale only if <span class="math inline">\(\alpha=0\)</span>. This should seem sensible, because <span class="math inline">\(\alpha\,\mathrm{d}t\)</span> is the expected change in <span class="math inline">\(X\)</span>, and a process is a martingale only if its expected change is zero. This observation plays a fundamental role in deriving asset pricing formulas. Conversely, if <span class="math inline">\(\alpha=0\)</span> and <span id="eq-regularity1"><span class="math display">\[
\mathbb{E}\left[\int_0^t \theta^2_s\,\mathrm{d}s\right] &lt; \infty
\qquad(6.9)\]</span></span> for each <span class="math inline">\(t\)</span>, then the Ito process is a continuous martingale, and the variance of its date–<span class="math inline">\(t\)</span> value, calculated with the information available at date <span class="math inline">\(0\)</span>, is: <span class="math display">\[\mathrm{var}(X_t) = \mathbb{E}\left[\int_0^t \theta^2_t\,\mathrm{d}s\right]\; .\]</span></p>
</section>
<section id="quadratic-and-joint-variation-of-ito-processes" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="quadratic-and-joint-variation-of-ito-processes"><span class="header-section-number">6.3</span> Quadratic and Joint Variation of Ito Processes</h2>
<p>The quadratic variation of the Ito process <span class="math inline">\(X\)</span> defined in <a href="#eq-ito2" class="quarto-xref">Equation&nbsp;<span>6.8</span></a> through each date <span class="math inline">\(t\)</span> is <span class="math display">\[
\int_0^t \theta^2_s\,\mathrm{d}s
\]</span> with probability one. In fact, when <a href="#eq-regularity1" class="quarto-xref">Equation&nbsp;<span>6.9</span></a> holds, a somewhat more precise definition of the stochastic integral is the (unique) martingale with quadratic variation given by <span class="quarto-unresolved-ref">?eq-itoquadraticvariation</span>.</p>
<p>To compute the quadratic variation of an Ito process, we use the following simple and important rules (for the sake of brevity, we drop the subscript <span class="math inline">\(t\)</span> from <span class="math inline">\(B_t\)</span> here and sometimes later). These rules should be regarded as mnemonic devices. The calculations we do with them lead to the correct results, but the objects have no real mathematical meaning.</p>
<div id="section" class="Rule" title="">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.1</strong></summary><div><span id="eq-dtsquared"><span class="math display">\[
(\,\mathrm{d}t)^2 = 0\;,
\qquad(6.10)\]</span></span><p></p>
<p><span id="eq-dB"><span class="math display">\[
(\,\mathrm{d}t)(\,\mathrm{d}B) =0\;,
\qquad(6.11)\]</span></span></p>
<p><span id="eq-dBsquared"><span class="math display">\[
(\,\mathrm{d}B)^2 =\,\mathrm{d}t\;.
\qquad(6.12)\]</span></span></p>
</div></details>
</div>
<p>We apply these rules to compute the quadratic variation of <span class="math inline">\(X\)</span> as follows:</p>
<div id="section-1" class="Rule" title="">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.2</strong></summary><div>If <span class="math inline">\(\,\mathrm{d}X = \alpha\,\mathrm{d}t + \theta\,\mathrm{d}B\)</span> for a Brownian motion <span class="math inline">\(B\)</span>, then <span class="math display">\[\begin{align*}
(\,\mathrm{d}X)^2 &amp;= (\alpha\,\mathrm{d}t+\theta\,\mathrm{d}B)^2\\
&amp;= \alpha^2(\,\mathrm{d}t)^2 + 2\alpha\theta(\,\mathrm{d}t)(\,\mathrm{d}B) + \theta^2(\,\mathrm{d}B)^2\\
&amp;= \theta^2\,\mathrm{d}t\;.
\end{align*}\]</span><p></p>
</div></details>
</div>
<p>We integrate <span class="math inline">\((\,\mathrm{d}X)^2\)</span> over a time interval to compute the quadratic variation of <span class="math inline">\(X\)</span> over that period as: <span id="eq-itoquadraticvariation2"><span class="math display">\[
\int_0^t (\,\mathrm{d}X_s)^2 = \int_0^t \theta^2_s\,\mathrm{d}s\;.
\qquad(6.13)\]</span></span> In a more formal mathematical presentation, one normally writes <span class="math inline">\(\,\mathrm{d}\langle X,X\rangle\)</span> for what we are writing here as <span class="math inline">\((\,\mathrm{d}X)^2\)</span>. This is the differential of the quadratic variation process, and the quadratic variation through date <span class="math inline">\(t\)</span> is <span class="math display">\[
\langle X,X\rangle _t = \int_0^t \,\mathrm{d}\langle X,X\rangle_s = \int_0^t \sigma^2_s\,\mathrm{d}s\;.
\]</span> Our mnenomic device of squaring differentials leads us to the correct formula.</p>
<p>Now consider two Ito processes: <span id="eq-itoprocess110"><span class="math display">\[
\,\mathrm{d}X_{1t} = \mu_{1t}\,\mathrm{d}t + \sigma_{1t}\,\mathrm{d}B_{1t}\;,
\qquad(6.14)\]</span></span></p>
<p><span id="eq-itoprocess111"><span class="math display">\[
\,\mathrm{d}X_{2t} = \mu_{2t}\,\mathrm{d}t + \sigma_{2t}\,\mathrm{d}B_{2t}\;,
\qquad(6.15)\]</span></span></p>
<p>where <span class="math inline">\(B_1\)</span> and <span class="math inline">\(B_2\)</span> are standard Brownian motions. We calculate the product of differentials of Ito processes as follows.</p>
<div id="rule:ito-product-diffs" class="Rule">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.3</strong></summary><div>If <span class="math inline">\(X_1\)</span> and <span class="math inline">\(X_2\)</span> are Ito processes as in <a href="#eq-itoprocess110" class="quarto-xref">Equation&nbsp;<span>6.14</span></a> and <a href="#eq-itoprocess111" class="quarto-xref">Equation&nbsp;<span>6.15</span></a>, then <span class="math display">\[(\,\mathrm{d}X_1)(\,\mathrm{d}X_2) = (\sigma_{1}\,\mathrm{d}B_{1})(\sigma_{2}\,\mathrm{d}B_{2})= \sigma_1\sigma_2\rho\,\mathrm{d}t\]</span> where <span class="math inline">\(\rho\)</span> is the correlation process of the two Brownian motions.<p></p>
</div></details>
</div>
<p>The real meaning of this rule is that it is possible to calculate the joint variation (i.e., limit of sum of products of changes) of the two Ito processes from <span class="math inline">\(0\)</span> to <span class="math inline">\(t\)</span> as <span id="eq-itojointvariation"><span class="math display">\[\int_0^t (\,\mathrm{d}X_{1s})(\,\mathrm{d}X_{2s}) = \int_0^t (\sigma_{1s}\,\mathrm{d}B_{1s})(\sigma_{2s}\,\mathrm{d}B_{2s}) = \int_0^t \sigma_{1s}\sigma_{2s}\rho_s\,\mathrm{d}s\,.
\qquad(6.16)\]</span></span> The last integral in this equation is the correct formula for the quadratic variation. As with squaring differentials, taking products of differentials is a mnemonic device to get us to the correct formula.</p>
</section>
<section id="sec-s:itosformula" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="sec-s:itosformula"><span class="header-section-number">6.4</span> Introduction to Ito’s Formula</h2>
<p>First we recall some facts of the ordinary calculus. If <span class="math inline">\(y=f(x)\)</span> and <span class="math inline">\(x_t = g(t)\)</span> with <span class="math inline">\(f\)</span> and <span class="math inline">\(g\)</span> being continuously differentiable functions, then <span class="math display">\[\frac{\,\mathrm{d}y}{\,\mathrm{d}t} = \frac{\,\mathrm{d}y}{\,\mathrm{d}x}\times \frac{\,\mathrm{d}x}{\,\mathrm{d}t} = f'(x_t)g'(t)\; .\]</span> This implies that, for each <span class="math inline">\(t&gt;0\)</span>, <span class="math display">\[y_t = f(x_t) = y_0 + \int_0^t \frac{\,\mathrm{d}y}{\,\mathrm{d}s}\,\mathrm{d}s = y_0 + \int_0^t f'(x_s)g'(s)\,\mathrm{d}s\; .\]</span> Substituting <span class="math inline">\(\,\mathrm{d}x_s = g'(s)\,\mathrm{d}s\)</span>, we can also write this as <span id="eq-ordinarycalculus"><span class="math display">\[
y_t = f(x_t) = y_0 + \int_0^t f'(x_s)\,\mathrm{d}x_s\,,
\qquad(6.17)\]</span></span> or, in differential form, <span id="eq-ordinarycalculus2"><span class="math display">\[
dy_t = f'(x_t)\,\mathrm{d}x_t \,.
\qquad(6.18)\]</span></span> What people frequently remember about integrals from their calculus courses is that there are a lot of tricky substitutions that can be made to simplify the calculation of various integrals. We won’t need those in this book. All we will use are equations of the form of <a href="#eq-ordinarycalculus" class="quarto-xref">Equation&nbsp;<span>6.17</span></a>, which is a special case of the Fundamental Theorem of Calculus, which says that a function is the integral of its derivative. Intuitively, we can think of <a href="#eq-ordinarycalculus" class="quarto-xref">Equation&nbsp;<span>6.17</span></a> as saying that the change in <span class="math inline">\(y\)</span> over a discrete interval (from <span class="math inline">\(0\)</span> to <span class="math inline">\(t\)</span>) is the continuous sum (integral) of its infinitesimal changes.</p>
<p>Let’s contrast <a href="#eq-ordinarycalculus" class="quarto-xref">Equation&nbsp;<span>6.17</span></a> with a special case of Ito’s formula for the calculus of Ito processes. If <span class="math inline">\(B\)</span> is a Brownian motion and <span class="math inline">\(Y = f(B)\)</span> for a twice-continuously differentiable function <span class="math inline">\(f\)</span>, then <span id="eq-ito0"><span class="math display">\[\,\mathrm{d}Y_t = f'(B_t)\,\mathrm{d}B_t + \frac{1}{2}f''(B_t)\,\mathrm{d}t  \,.
\qquad(6.19)\]</span></span> Comparing <a href="#eq-ito0" class="quarto-xref">Equation&nbsp;<span>6.19</span></a> to <a href="#eq-ordinarycalculus2" class="quarto-xref">Equation&nbsp;<span>6.18</span></a>, we see that Ito’s formula has an extra term involving the second derivative <span class="math inline">\(f''\)</span>.</p>
<p><a href="#eq-ito0" class="quarto-xref">Equation&nbsp;<span>6.19</span></a> implies that <span class="math inline">\(Y=f(B)\)</span> is an Ito process with drift <span class="math inline">\(f''(B_t)/2\)</span> and diffusion coefficient <span class="math inline">\(f'(B_t)\)</span>. The real meaning of <a href="#eq-ito0" class="quarto-xref">Equation&nbsp;<span>6.19</span></a> is the integrated form: <span id="eq-itonew1"><span class="math display">\[
Y_t = f(B_t) = Y_0 + \int_0^t f'(B_s)\,\mathrm{d}B_s + \frac{1}{2}\int_0^t f''(B_s)\,\mathrm{d}s\;.
\qquad(6.20)\]</span></span> Thus, the change in <span class="math inline">\(Y\)</span> over a discrete interval is again the continuous sum of its infinitesimal changes, but now the infinitesimal changes are given by <a href="#eq-ito0" class="quarto-xref">Equation&nbsp;<span>6.19</span></a>. Note that the first integral in <a href="#eq-itonew1" class="quarto-xref">Equation&nbsp;<span>6.20</span></a> is an Ito integral.</p>
<p>To gain some intuition for the extra term in Ito’s formula, we return to the ordinary calculus. Given dates <span class="math inline">\(s&lt;t\)</span>, the derivative defines a linear approximation of the change in <span class="math inline">\(y\)</span> from <span class="math inline">\(s\)</span> to <span class="math inline">\(t\)</span>; that is, setting <span class="math inline">\(\Delta x = x_t-x_s\)</span> and <span class="math inline">\(\Delta y = y_t - y_s\)</span>, we have the approximation <span class="math display">\[\Delta y \approx f'(x_s) \,\Delta x\; .\]</span> A better approximation is given by the second-order Taylor series expansion <span class="math display">\[\Delta y \approx f'(x_s)\,\Delta x + \frac{1}{2} f''(x_s)\,(\Delta x)^2\; .\]</span> An interpretation of <a href="#eq-ordinarycalculus" class="quarto-xref">Equation&nbsp;<span>6.17</span></a> is that the linear approximation works perfectly for infinitesimal time periods <span class="math inline">\(\,\mathrm{d}s\)</span>, because we can compute the change in <span class="math inline">\(y\)</span> over the time interval <span class="math inline">\([0,t]\)</span> by summing up the infinitesimal changes <span class="math inline">\(f'(x_s)\,\mathrm{d}x_s\)</span>. In other words, the second-order term <span class="math inline">\(\frac{1}{2} f''(x_s)\,(\Delta x)^2\)</span> vanishes when we consider very short time periods.</p>
<p>The second-order Taylor series expansion in the case of <span class="math inline">\(Y=f(B)\)</span> is <span class="math display">\[\Delta Y \approx f'(B_s)\,\Delta B + \frac{1}{2} f''(B_s)\,(\Delta B)^2\; .\]</span> For example, given a partition <span class="math inline">\(0=t_0 &lt; t_1 &lt; \cdots &lt; t_n=t\)</span> of the time interval <span class="math inline">\([0,t]\)</span>, we have, with the same notation we have used earlier,</p>
<p><span id="eq-itonew2"><span class="math display">\[
Y_t = Y_0 + \sum_{i=1}^n \Delta Y_{t_i}  
\approx Y_0 + \sum_{i=1}^n f'(B_{t_{i-1}})\,\Delta B_{t_i} + \frac{1}{2} \sum_{i=1}^n f''(B_{t_{i-1}})\,(\Delta B_{t_i})^2\;.
\qquad(6.21)\]</span></span></p>
<p>If we make the time intervals <span class="math inline">\(t_i-t_{i-1}\)</span> shorter, letting <span class="math inline">\(n \rightarrow \infty\)</span>, then we cannot expect that the extra term here will disappear, leading to the result of the ordinary calculus shown in <a href="#eq-ordinarycalculus" class="quarto-xref">Equation&nbsp;<span>6.17</span></a>, because we know that <span class="math display">\[\lim_{n \rightarrow \infty} \sum_{i=1}^n (\Delta B_{t_i})^2 = t\; ,\]</span> whereas for the continuously differentiable function <span class="math inline">\(x_t = g(t)\)</span>, the same limit is zero. In fact it seems sensible to interpret the limit of <span class="math inline">\((\Delta B)^2\)</span> as <span class="math inline">\((\,\mathrm{d}B)^2 =\,\mathrm{d}t\)</span>. This is perfectly consistent with Ito’s formula: if we take the limit in <a href="#eq-itonew2" class="quarto-xref">Equation&nbsp;<span>6.21</span></a>, replacing the limit of <span class="math inline">\((\Delta B_{t_i})^2\)</span> with <span class="math inline">\((\,\mathrm{d}B)^2 = \,\mathrm{d}t\)</span>, we obtain <a href="#eq-itonew1" class="quarto-xref">Equation&nbsp;<span>6.20</span></a>.</p>
<p>To see the accuracy of Ito’s approximation over different time steps, as well as the impact of the second-derivative term <span class="math inline">\(\int_0^t (1/2)f''(B_s)\,\mathrm{d}s\)</span>, we encourage readers to interact with the plot below. It examines the function <span class="math inline">\(f(x)=\mathrm{e}^{x}\)</span> (for which we have <span class="math inline">\(f'(x)=\mathrm{e}^x\)</span> and <span class="math inline">\(f''(x) = \mathrm{e}^x\)</span>). It simulates an approximate path of a Brownian motion as we have done before. It then compares the true value of <span class="math inline">\(\mathrm{e}^{B_{t_i}}\)</span> to the Ito expansion <span class="math display">\[\mathrm{e}^{B_t}=1 + \int_0^t \mathrm{e}^{B_s} \,\mathrm{d}B_s + \frac{1}{2}\int_0^t \mathrm{e}^{B_s} \,\mathrm{d}s\]</span> using the discretization <span class="math display">\[\Delta \mathrm{e}^{B_{t_i}}= \mathrm{e}^{B_{t_{i-1}}} \Delta B_{t_i} + \frac{1}{2} \mathrm{e}^{B_{t_{i-1}}} \Delta t \,.\]</span> Notice that the discretization is just a second-order Taylor series expansion. The discretization approximates the true value better if we take <span class="math inline">\(n\)</span> larger and <span class="math inline">\(\Delta t\)</span> smaller. The important take-away from the figure is that the cumulative second-derivative terms in the discretization do not vanish as we take <span class="math inline">\(n\)</span> larger but instead continue to contribute significantly to the approximation.</p>
<div id="fig-interactive_ito" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-interactive_ito-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.3: Accuracy of Ito Approximation
</figcaption>
<div aria-describedby="fig-interactive_ito-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<iframe width="780" height="1000" src="https://derivatives-book-26ac36570fb8.herokuapp.com/math_finance_book_plots/ito_approx_plot">
</iframe>
</div>
</figure>
</div>
</section>
<section id="univariate-itos-formula" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="univariate-itos-formula"><span class="header-section-number">6.5</span> Univariate Ito’s Formula</h2>
<p>We extend the example in the previous section slightly. Consider a process <span class="math inline">\(Y\)</span> defined as <span class="math inline">\(Y_t = f(t, B_t)\)</span> for some function <span class="math inline">\(f\)</span>. The following rule states that <span class="math inline">\(Y\)</span> is an Ito process with drift equal to <span class="math display">\[\frac{\partial f}{\partial t} + \frac{1}{2} \frac{\partial^2 f}{\partial B^2}\]</span> and diffusion coefficient equal to <span class="math inline">\(\partial f/\partial B\)</span>. This is what we need to remember to make calculations. The real meaning of <span class="math inline">\((\,\mathrm{d}B)^2\)</span> is <span class="math inline">\(\,\mathrm{d}t\)</span>, so we can (and will) substitute that in the following rule, but it may be easier to remember <span class="math inline">\((\,\mathrm{d}B)^2\)</span>. This becomes more important when we consider more complex examples in the next sections.</p>
<div id="ruleito1" class="Rule" title="Ito’s Formula 1">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.4: </strong>Ito’s Formula 1</summary><div>If <span class="math inline">\(f(t, B)\)</span> is continuously differentiable in <span class="math inline">\(t\)</span> and twice continuously differentiable in <span class="math inline">\(B\)</span> and <span class="math inline">\(Y_t= f(t, B_t)\)</span> for a standard Brownian motion <span class="math inline">\(B\)</span>, then <span id="eq-ito-firstformula"><span class="math display">\[\,\mathrm{d}Y = \frac{\partial f(t, B)}{\partial t}\,\mathrm{d}t + \frac{\partial f(t, B)}{\partial B}\,\mathrm{d}B + \frac{1}{2} \frac{\partial^2 f(t, B)}{\partial B^2}(\,\mathrm{d}B)^2\,.
\qquad(6.22)\]</span></span><p></p>
</div></details>
</div>
<div id="example:ito1" class="Example">
<p></p><details class="Example fbx-simplebox fbx-default"><summary><strong>Example 6.1</strong></summary><div>We can apply Calculation Rule <a href="Chapter_Ito.html#ruleito1">6.4</a> to finish the discussion in <a href="#sec-s:discreteito" class="quarto-xref"><span>Section 6.1</span></a> regarding the process defined in <a href="#eq-ito_discrete_6" class="quarto-xref">Equation&nbsp;<span>6.6</span></a>. We want to show that it satisfies <a href="#eq-ito_discrete_5" class="quarto-xref">Equation&nbsp;<span>6.5</span></a>. We do that by differentiating and applying the above rule. For <span class="math inline">\(f(t, B) = \mathrm{e}^{(\mu - \sigma^2/2)t + \sigma B}\)</span>, we have <span class="math display">\[\frac{\partial f}{\partial t} = \left(\mu-\frac{1}{2}\sigma^2\right)f(t, B)\,,\quad \frac{\partial f}{\partial B} = \sigma f(t, B)\,, \quad \frac{\partial^2 f}{\partial B^2} = \sigma^2f(t, B)\,.\]</span> Therefore, <span class="math display">\[\,\mathrm{d}Y = \left(\mu-\frac{1}{2}\sigma^2\right)Y\,\mathrm{d}t + \sigma Y \,\mathrm{d}B + \frac{1}{2}\sigma^2 Y\,(\,\mathrm{d}B)^2 = \mu Y\,\mathrm{d}t + \sigma Y \,\mathrm{d}B\]</span> This verifies <a href="#eq-ito_discrete_5" class="quarto-xref">Equation&nbsp;<span>6.5</span></a>.<p></p>
</div></details>
</div>
</section>
<section id="extension-to-functions-of-ito-processes" class="level2" data-number="6.6">
<h2 data-number="6.6" class="anchored" data-anchor-id="extension-to-functions-of-ito-processes"><span class="header-section-number">6.6</span> Extension to Functions of Ito Processes</h2>
<p>Now consider the more general case <span class="math inline">\(Y_t = f(t, X_t)\)</span> where <span class="math inline">\(X\)</span> is an Ito process. As explained before, this means that <span id="eq-itoagain"><span class="math display">\[\,\mathrm{d}X_t = \alpha_t\,\mathrm{d}t + \theta_t \,\mathrm{d}B_t
\qquad(6.23)\]</span></span> for some stochastic processes <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\theta\)</span>, where <span class="math inline">\(B\)</span> is a standard Brownian motion. Then, from our previous rules, <span class="math inline">\((\,\mathrm{d}X)^2 = \theta^2\,\mathrm{d}t\)</span>. Ito’s formula in this more general case takes the same form as Calculation Rule <a href="Chapter_Ito.html#ruleito1">6.4</a>, replacing the Brownian motion <span class="math inline">\(B\)</span> with the Ito process <span class="math inline">\(X\)</span>.</p>
<div id="ruleito2" class="Rule" title="Ito’s Formula 2">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.5: </strong>Ito’s Formula 2</summary><div>If <span class="math inline">\(f(t, X)\)</span> is continuously differentiable in <span class="math inline">\(t\)</span> and twice continuously differentiable in <span class="math inline">\(X\)</span> and <span class="math inline">\(Y_t= f(t, X_t)\)</span> where <span class="math inline">\(X\)</span> is an Ito process, then <span id="eq-ito-secondformula"><span class="math display">\[\,\mathrm{d}Y = \frac{\partial f(t, X)}{\partial t}\,\mathrm{d}t + \frac{\partial f(t, X)}{\partial X}\,\mathrm{d}X + \frac{1}{2} \frac{\partial^2 f(t, X)}{\partial X^2}(\,\mathrm{d}X)^2\,.
\qquad(6.24)\]</span></span><p></p>
</div></details>
</div>
<p>We can write <a href="#eq-ito-secondformula" class="quarto-xref">Equation&nbsp;<span>6.24</span></a> in terms of <span class="math inline">\(\,\mathrm{d}t\)</span> and <span class="math inline">\(\,\mathrm{d}B\)</span> terms by substituting from <a href="#eq-itoagain" class="quarto-xref">Equation&nbsp;<span>6.23</span></a> and using <span class="math inline">\((\,\mathrm{d}X)^2 = \theta^2\,\mathrm{d}t\)</span>. This produces <span class="math display">\[\,\mathrm{d}Y = \left(\frac{\partial f(t, X)}{\partial t} + \alpha\frac{\partial f(t, X)}{\partial X} + \frac{1}{2}\theta^2 \frac{\partial^2 f(t, X)}{\partial X^2}\right)\,\mathrm{d}t + \theta\frac{\partial f(t, X)}{\partial X}\,\mathrm{d}B\,.\]</span></p>
<p>Here are some important examples of Ito’s formula.</p>
<div id="rule:ito-power" class="Rule" title="Ito’s Formula for Powers">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.6: </strong>Ito’s Formula for Powers</summary><div>If <span class="math inline">\(Y = X^\alpha\)</span> for a constant <span class="math inline">\(\alpha\)</span>, then <span class="math display">\[\,\mathrm{d}Y = \alpha X^{\alpha-1}\,\mathrm{d}X + \frac{1}{2}\alpha (\alpha - 1)X^{\alpha-2}(\,\mathrm{d}X)^2\,.\]</span> This is equivalent to <span class="math display">\[\frac{\,\mathrm{d}Y}{Y} = \alpha \frac{\,\mathrm{d}X}{X} + \frac{\alpha(\alpha-1)}{2}\left(\frac{\,\mathrm{d}X}{X}\right)^2\,.
\]</span> {#ito-powerformula}<p></p>
</div></details>
</div>
<div id="rule:ito-exponentials" class="Rule" title="Ito’s Formula for Exponentials">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.7: </strong>Ito’s Formula for Exponentials</summary><div>If <span class="math inline">\(Y=\mathrm{e}^X\)</span>, then <span id="eq-rule5"><span class="math display">\[\frac{\,\mathrm{d}Y}{Y}=\,\mathrm{d}X + \frac{(\,\mathrm{d}X)^2}{2}\;.
\qquad(6.25)\]</span></span><p></p>
</div></details>
</div>
<div id="rule:ito-log" class="Rule" title="Ito’s Formula for Logarithms">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.8: </strong>Ito’s Formula for Logarithms</summary><div>If <span class="math inline">\(Y=\log X\)</span>, then <span id="eq-rule6"><span class="math display">\[
\,\mathrm{d}Y=\frac{\,\mathrm{d}X}{X} - \frac{1}{2}\left(\frac{\,\mathrm{d}X}{X}\right)^2\;.
\qquad(6.26)\]</span></span><p></p>
</div></details>
</div>
<div id="Example-6.2" class="Example">
<p></p><details class="Example fbx-simplebox fbx-default"><summary><strong>Example 6.2</strong></summary><div>We showed in Example <a href="Chapter_Ito.html#example:ito1">6.1</a> that <span class="math inline">\(X\)</span> defined in <a href="#eq-ito_discrete_6" class="quarto-xref">Equation&nbsp;<span>6.6</span></a> satisfies <a href="#eq-ito_discrete_5" class="quarto-xref">Equation&nbsp;<span>6.5</span></a>, but it is also useful to see how we could start from <a href="#eq-ito_discrete_5" class="quarto-xref">Equation&nbsp;<span>6.5</span></a> and deduce that <a href="#eq-ito_discrete_6" class="quarto-xref">Equation&nbsp;<span>6.6</span></a> is the solution. We can do that by taking logarithms, as we did in the non-random case in <a href="Chapter_Americans.html#sec-s:discrete" class="quarto-xref"><span>Section 11.3</span></a>. Set <span class="math inline">\(Y_t = \log X_t\)</span>. Then, using Calculation Rule <a href="Chapter_Ito.html#rule:ito-log">6.8</a> and substituting from <a href="#eq-ito_discrete_5" class="quarto-xref">Equation&nbsp;<span>6.5</span></a>, we have <span class="math display">\[\,\mathrm{d}\log X = \left(\mu - \frac{1}{2}\sigma^2\right)\,\mathrm{d}t + \sigma\,\mathrm{d}B\,.\]</span> There is no <span class="math inline">\(X\)</span> on the right-hand side of this, so we can simply integrate to compute <span class="math inline">\(\log X_t\)</span> as <span class="math display">\[\log X_t = \log X_0 + \left(\mu - \frac{1}{2}\sigma^2\right)t + \sigma B_t\,.\]</span> Exponentiating gives <a href="#eq-ito_discrete_6" class="quarto-xref">Equation&nbsp;<span>6.6</span></a>.<p></p>
</div></details>
</div>
</section>
<section id="extension-to-functions-of-multiple-ito-processes" class="level2" data-number="6.7">
<h2 data-number="6.7" class="anchored" data-anchor-id="extension-to-functions-of-multiple-ito-processes"><span class="header-section-number">6.7</span> Extension to Functions of Multiple Ito Processes</h2>
<p>Using Calculation Rule <a href="Chapter_Ito.html#rule:ito-product-diffs">6.3</a> for products of differentials, we can state Ito’s formula for a function of time and two Ito processes as follows.</p>
<div id="rule-itoformula3" class="Rule" title="Ito’s Formula 3">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.9: </strong>Ito’s Formula 3</summary><div>If <span class="math inline">\(Y_t = f(t, X_{1t}, X_{2t})\)</span> where <span class="math inline">\(X_1\)</span> and <span class="math inline">\(X_2\)</span> are Ito processes and <span class="math inline">\(f\)</span> is continuously differentiable in <span class="math inline">\(t\)</span> and twice continuously differentiable in <span class="math inline">\(X_1\)</span> and <span class="math inline">\(X_2\)</span>, then <span id="eq-itogeneralnew2"><span class="math display">\[\begin{multline}
\,\mathrm{d}Y =  \frac{\partial f}{\partial t}\,\mathrm{d}t + \frac{\partial f}{\partial X_1}\,\mathrm{d}X_1 +  \frac{\partial f}{\partial X_2}\,\mathrm{d}X_2 + \frac{1}{2} \frac{\partial^2 f}{\partial X_1^2}\,(\,\mathrm{d}X_1)^2 +  \frac{1}{2}  \frac{\partial^2 f}{\partial X_2^2}\,(\,\mathrm{d}X_2)^2 \\
+ \frac{\partial^2 f}{\partial X_1\partial X_2}\,(\,\mathrm{d}X_1)(\,\mathrm{d}X_2)\;.
\end{multline} \qquad(6.27)\]</span></span><p></p>
</div></details>
</div>
<p>This is analogous to a second-order Taylor series expansion in the variables <span class="math inline">\(X_1\)</span> and <span class="math inline">\(X_2\)</span>. A similar formula applies to functions of more two Ito processes. We just need to include a term for each <span class="math inline">\(\,\mathrm{d}X_i\)</span>, each <span class="math inline">\((\,\mathrm{d}X_i)^2\)</span> and each <span class="math inline">\((\,\mathrm{d}X_i)(\,\mathrm{d}X_j)\)</span>.</p>
<p>Here are some important examples. We switch notation from <span class="math inline">\(X_1\)</span> and <span class="math inline">\(X_2\)</span> to <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> and from <span class="math inline">\(Y\)</span> to <span class="math inline">\(Z\)</span> so we can drop the subscripts. These formulas follow from Calculation Rule <a href="Chapter_Ito.html#rule-itoformula3">6.9</a> by taking <span class="math inline">\(f(x,y)=xy\)</span> or <span class="math inline">\(f(x,y)=y/x\)</span>.</p>
<div id="rule:ito-product" class="Rule" title="Ito’s Formula for Products">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.10: </strong>Ito’s Formula for Products</summary><div>If <span class="math inline">\(Z=XY\)</span>, then <span class="math inline">\(\,\mathrm{d}Z=X\,\mathrm{d}Y+Y\,\mathrm{d}X + (\,\mathrm{d}X)(\,\mathrm{d}Y)\)</span>. We can write this as <span id="eq-rule2"><span class="math display">\[
\frac{\,\mathrm{d}Z}{Z}=\frac{\,\mathrm{d}X}{X} + \frac{\,\mathrm{d}Y}{Y} + \left(\frac{\,\mathrm{d}X}{X}\right)\left(\frac{\,\mathrm{d}Y}{Y}\right)\;.
\qquad(6.28)\]</span></span><p></p>
</div></details>
</div>
<div id="rule:ito-ratio" class="Rule" title="Ito’s Formula for Ratios">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.11: </strong>Ito’s Formula for Ratios</summary><div>If <span class="math inline">\(Z=Y/X\)</span>, then <span id="eq-rule4"><span class="math display">\[\frac{\,\mathrm{d}Z}{Z} = \frac{\,\mathrm{d}Y}{Y} -\frac{\,\mathrm{d}X}{X} - \left(\frac{\,\mathrm{d}Y}{Y}\right)\left(\frac{\,\mathrm{d}X}{X}\right) + \left(\frac{\,\mathrm{d}X}{X}\right)^2\;.
\qquad(6.29)\]</span></span><p></p>
</div></details>
</div>
<div id="itos-formula-for-compounding-and-discounting" class="Rule" title="Ito’s Formula for Compounding and Discounting">
<p></p><details class="Rule fbx-simplebox fbx-default" open=""><summary><strong>Calculation Rule 6.12: </strong>Ito’s Formula for Compounding and Discounting</summary><div>Let<br>
<span class="math display">\[Y_t =\exp\left(\int_0^t q_s\,\mathrm{d}s\right)\]</span> for some (possibly random) process <span class="math inline">\(q\)</span> and define <span class="math inline">\(Z=XY\)</span> for any Ito process <span class="math inline">\(X\)</span>. Calculation Rule <a href="Chapter_Ito.html#rule:ito-product">6.10</a> gives us <span id="eq-compdisc1"><span class="math display">\[
\frac{\,\mathrm{d}Z}{Z}=q\,\mathrm{d}t + \frac{\,\mathrm{d}X}{X}\;.
\qquad(6.30)\]</span></span> This is the same as in the usual calculus.<p></p>
</div></details>
</div>
</section>
<section id="section-2" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="section-2"></h2>
<div id="Exercise-6.1" class="Exercise">
<p></p><details class="Exercise fbx-simplebox fbx-default"><summary><strong>Exercise 6.1</strong></summary><div>Consider a discrete partition <span class="math inline">\(0=t_0 &lt; t_1 &lt; \cdots t_n=t\)</span> of a time interval <span class="math inline">\([0,t]\)</span> with <span class="math inline">\(t_i - t_{i-1} = \Delta t = t/n\)</span> for each <span class="math inline">\(i\)</span>. Consider the function <span class="math display">\[X_t=\mathrm{e}^t\; .\]</span> Write code that computes and plots <span class="math inline">\(\sum_{i=1}^n [\Delta X_{t_i}]^2\)</span>, where <span class="math display">\[\Delta X_{t_i} = X_{t_i}-X_{t_{i-1}} = \mathrm{e}^{t_i} - \mathrm{e}^{t_{i-1}}\; .\]</span><p></p>
</div></details>
</div>
<div id="Exercise-6.2" class="Exercise">
<p></p><details class="Exercise fbx-simplebox fbx-default"><summary><strong>Exercise 6.2</strong></summary><div>Repeat the previous problem for the function <span class="math inline">\(X_t = t^3\)</span>. In both this and the previous problem, what happens to <span class="math inline">\(\sum_{i=1}^n [\Delta X_{t_i}]^2\)</span> as <span class="math inline">\(N \rightarrow \infty\)</span>?<p></p>
</div></details>
</div>
<div id="Exercise-6.3" class="Exercise">
<p></p><details class="Exercise fbx-simplebox fbx-default"><summary><strong>Exercise 6.3</strong></summary><div>Write code to compute <span class="math inline">\(\sum_{i=1}^n [\Delta B_{t_i}]^2\)</span>, where <span class="math inline">\(B\)</span> is a simulated Brownian motion. For a given <span class="math inline">\(t\)</span>, what happens to the sum as <span class="math inline">\(n \rightarrow \infty\)</span>?<p></p>
</div></details>
</div>
<div id="Exercise-6.4" class="Exercise">
<p></p><details class="Exercise fbx-simplebox fbx-default"><summary><strong>Exercise 6.4</strong></summary><div>Repeat the previous problem to compute <span class="math inline">\(\sum_{i=1}^n [\Delta B_{t_i}]^3\)</span>, where <span class="math inline">\(B\)</span> is a simulated Brownian motion. For a given <span class="math inline">\(t\)</span>, what happens to the sum as <span class="math inline">\(n \rightarrow \infty\)</span>?<p></p>
</div></details>
</div>
<div id="Exercise-6.5" class="Exercise">
<p></p><details class="Exercise fbx-simplebox fbx-default"><summary><strong>Exercise 6.5</strong></summary><div>Repeat the previous problem, computing instead <span class="math inline">\(\sum_{i=1}^n |\Delta B_{t_i}|\)</span>, where <span class="math inline">\(| \cdot |\)</span> denotes the absolute value. What happens to this sum as <span class="math inline">\(n \rightarrow \infty\)</span>?<p></p>
</div></details>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Chapter_Brownian.html" class="pagination-link" aria-label="Brownian Motion">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Brownian Motion</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Chapter_GBM.html" class="pagination-link" aria-label="Geometric Brownian Motion">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Geometric Brownian Motion</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions"><ul><li><a href="https://github.com/math-finance-book/book-code.git/blob/main/Chapter_Ito.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer></body></html>