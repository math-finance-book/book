<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>26&nbsp; Fixed-Income Derivatives – Pricing and Hedging Derivative Securities: Theory and Methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Chapter_Vasicek.html" rel="next">
<link href="./Chapter_FixedIncome.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-933f24a0c1e0be8a62c2179459603458.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-217607b4065b1a3128a07792af3f8e33.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>



<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

<script type="text/javascript">

window.PlotlyConfig = {MathJaxConfig: 'local'};

if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}

if (typeof require !== 'undefined') {

require.undef("plotly");

requirejs.config({

    paths: {

        'plotly': ['https://cdn.plot.ly/plotly-2.35.2.min']

    }

});

require(['plotly'], function(Plotly) {

    window._Plotly = Plotly;

});

}

</script>



<style>
div.callout-Principle.callout {
  border-left-color: #e3aab2;
}
div.callout-Principle.callout-style-default > .callout-header {
  background-color: rgba(227, 170, 178, 0.13);
}
div.callout-Principle .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Principle.callout-style-default .callout-icon::before, div.callout-Principle.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-Exercise.callout {
  border-left-color: #ede29d;
}
div.callout-Exercise.callout-style-default > .callout-header {
  background-color: rgba(237, 226, 157, 0.13);
}
div.callout-Exercise .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Exercise.callout-style-default .callout-icon::before, div.callout-Exercise.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-InProgress.callout {
  border-left-color: #eaacf2;
}
div.callout-InProgress.callout-style-default > .callout-header {
  background-color: rgba(234, 172, 242, 0.13);
}
div.callout-InProgress .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-InProgress.callout-style-default .callout-icon::before, div.callout-InProgress.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-CodeToDo.callout {
  border-left-color: #eb4034;
}
div.callout-CodeToDo.callout-style-default > .callout-header {
  background-color: rgba(235, 64, 52, 0.13);
}
div.callout-CodeToDo .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-CodeToDo.callout-style-default .callout-icon::before, div.callout-CodeToDo.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-Rule.callout {
  border-left-color: #a1bced;
}
div.callout-Rule.callout-style-default > .callout-header {
  background-color: rgba(161, 188, 237, 0.13);
}
div.callout-Rule .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Rule.callout-style-default .callout-icon::before, div.callout-Rule.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-WritingToDo.callout {
  border-left-color: #a7f2d8;
}
div.callout-WritingToDo.callout-style-default > .callout-header {
  background-color: rgba(167, 242, 216, 0.13);
}
div.callout-WritingToDo .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-WritingToDo.callout-style-default .callout-icon::before, div.callout-WritingToDo.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-Extra.callout {
  border-left-color: #d5deed;
}
div.callout-Extra.callout-style-default > .callout-header {
  background-color: rgba(213, 222, 237, 0.13);
}
div.callout-Extra .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Extra.callout-style-default .callout-icon::before, div.callout-Extra.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-Example.callout {
  border-left-color: #e8cc97;
}
div.callout-Example.callout-style-default > .callout-header {
  background-color: rgba(232, 204, 151, 0.13);
}
div.callout-Example .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Example.callout-style-default .callout-icon::before, div.callout-Example.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-Done.callout {
  border-left-color: #e8cc97;
}
div.callout-Done.callout-style-default > .callout-header {
  background-color: rgba(232, 204, 151, 0.13);
}
div.callout-Done .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Done.callout-style-default .callout-icon::before, div.callout-Done.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Chapter_FixedIncome.html">Part VII: Fixed Income</a></li><li class="breadcrumb-item"><a href="./Chapter_FixedIncomeDerivatives.html"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Fixed-Income Derivatives</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Pricing and Hedging Derivative Securities: Theory and Methods</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/math-finance-book/book-code.git" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Part I: Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Options.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Options</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Futures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Futures and Swaps</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Part II: Mathematical Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Intro_Binomial_Tree.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Brownian.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Brownian Motion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Ito.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Ito Processes and Ito’s Formula</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_GBM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Geometric Brownian Motion</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Part III: Arbitrage Pricing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Arbitrage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Foundations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Deltas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Delta Hedges, Replication, and PDEs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_DigitalsMeasures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Digitals and Measures</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Part IV: Black-Scholes and Extensions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_BlackScholes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Black-Scholes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Americans.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">American Options</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_FX.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">FX and Quantos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Merton.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Merton, Black, and Margrabe</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Asians.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Asians, Baskets, and Spreads</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Exotics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Other Exotics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Part V: Alternative Models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_GARCH.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">GARCH Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_StochasticVol.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Stochastic Volatility</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Jumps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Jumps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_VarianceSwaps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Variance Swaps</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Part VI: Numerical Methods</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_MonteCarlo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Monte Carlo Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Binomial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Binomial and Trinomial Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_PDEs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">PDE Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Fourier.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Fourier Transforms</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_MachineLearning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Machine Learning</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Part VII: Fixed Income</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_FixedIncome.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Fixed-Income Concepts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_FixedIncomeDerivatives.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Fixed-Income Derivatives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Vasicek.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Vasicek and Extensions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Survey.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Term Structure Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendix</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AppendixA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Miscellaneous Facts about Continuous-Time Models</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Chapter_FixedIncome.html">Part VII: Fixed Income</a></li><li class="breadcrumb-item"><a href="./Chapter_FixedIncomeDerivatives.html"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Fixed-Income Derivatives</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-c:fixedincomederivatives" class="quarto-section-identifier"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Fixed-Income Derivatives</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="1b0910a8" class="cell" data-execution_count="1">
<div class="cell-output cell-output-display">
<script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_SVG"></script>
</div>
</div>
<p>In this chapter, we will introduce some fundamental fixed-income derivatives (caps, floors and swaptions) and explain the market model approach to valuation. We will also explain the relation between caps, floors and swaptions on the one hand and discount and coupon bond options on the other. This leads to other approaches for valuing caps, floors and swaptions, which will be developed in the following chapters.</p>
<section id="caps-and-floors" class="level2" data-number="26.1">
<h2 data-number="26.1" class="anchored" data-anchor-id="caps-and-floors"><span class="header-section-number">26.1</span> Caps and Floors</h2>
<p>Caps and floors have a structure very similar to that of swaps, as described in <a href="Chapter_FixedIncome.html#sec-s:swaps" class="quarto-xref"><span>Section 25.3</span></a>. At each reset date <span class="math inline">\(t_i\)</span>, the simple interest rate <span class="math inline">\(\mathcal{R}_i\)</span> for period <span class="math inline">\(\Delta t\)</span> is observed. This rate determines a payment at the following date <span class="math inline">\(t_{i+1}\)</span>. As discussed in the preceding chapter, the cash flow to the payer in a swap is <span class="math inline">\((\mathcal{R}_i - \bar{\mathcal{R}})\,\Delta t\)</span> and the cash flow to the receiver is <span class="math inline">\((\bar{\mathcal{R}}-\mathcal{R}_i)\,\Delta t\)</span>, for each $1 of notional principal. A swap is really a series of forward contracts, in which both parties have obligations. On the other hand, caps and floors are series of options. A premium is paid up-front by the buyer of a cap or floor to the seller and all future cash flows are paid by the seller to the buyer. The owner of a cap with cap rate <span class="math inline">\(\bar{\mathcal{R}}\)</span> receives <span class="math inline">\(\max(0,\mathcal{R}_i-\bar{\mathcal{R}})\Delta t\)</span> at date <span class="math inline">\(t_{i+1}\)</span> for each $1 of notional principal, and the owner of a floor receives <span class="math inline">\(\max(0,\bar{\mathcal{R}}-\mathcal{R}_i)\Delta t\)</span> at date <span class="math inline">\(t_{i+1}\)</span> for each $1 of notional principal.</p>
<p>Caps and floors are used in conjunction with hedging floating rate obligations or for speculative purposes. Portfolios of caps and floors have properties analogous to option portfolios. For example, the combination of a long cap and a short floor at the same rate <span class="math inline">\(\bar{\mathcal{R}}\)</span> creates the payer side of a swap, in the same way that a long call and short put create a synthetic long forward (and a short cap and a long floor at the same rate <span class="math inline">\(\bar{\mathcal{R}}\)</span> creates the receiver side of a swap just as a short call and long put create a synthetic short forward contract). A long cap at rate <span class="math inline">\(\bar{\mathcal{R}}_c\)</span> and a short floor at rate <span class="math inline">\(\bar{\mathcal{R}}_f &lt; \bar{\mathcal{R}}_c\)</span> creates a collar (for an underlying floating rate obligation), etc.</p>
<p>The individual payments on a cap are called caplets, and a cap is simply a portfolio of caplets. Similarly, the individual payments on a floor are called floorlets, and the values of caplets and floorlets are linked by put-call parity, as we will see below.</p>
<p>A caplet can be viewed as a call option on the spot rate with strike equal to the fixed rate. Thus, it is a bet on higher interest rates. Because interest rates and bond prices are inversely related, it can also be viewed as a bet on lower bond prices. In this regard, it is similar to a put option on bond prices. In fact, we will see in <a href="#sec-s:caps2" class="quarto-xref"><span>Section 26.9</span></a> that a caplet is exactly equivalent to a put option on a discount bond. Likewise, a floorlet can be viewed either as a put option on the spot rate or a call option on a discount bond.</p>
</section>
<section id="sec-s:forwardrates" class="level2" data-number="26.2">
<h2 data-number="26.2" class="anchored" data-anchor-id="sec-s:forwardrates"><span class="header-section-number">26.2</span> Forward Rates</h2>
<p>Suppose we wish to borrow money at date <span class="math inline">\(u\)</span> for a period of <span class="math inline">\(\Delta t\)</span> years, and we want to lock in the rate on the loan at date <span class="math inline">\(t&lt;u\)</span>. To do this, we can buy the discount bond maturing at <span class="math inline">\(u\)</span> and finance the purchase by shorting <span class="math inline">\(P(t,u)/P(t,u+\Delta t)\)</span> units of the bond maturing at <span class="math inline">\(u+\Delta t\)</span>. This generates a cash flow of $1 at date <span class="math inline">\(u\)</span> and <span class="math inline">\(-P(t,u)/P(t,u+\Delta t)\)</span> dollars at date <span class="math inline">\(u+\Delta t\)</span>. This implies a simple interest rate of <span class="math inline">\(\mathcal{R}\)</span> defined as <span id="eq-forward1"><span class="math display">\[
\frac{P(t,u)}{P(t,u+\Delta t)} = 1+\mathcal{R}\,\Delta t\;.
\qquad(26.1)\]</span></span></p>
<p>This rate is called a forward rate. </p>
<p>Forward rates will be important for loans at the reset dates maturing at the subsequent payment dates. We will denote the forward rate at date <span class="math inline">\(t \leq t_i\)</span> for a loan between <span class="math inline">\(t_i\)</span> and <span class="math inline">\(t_{i+1}\)</span> as <span class="math inline">\(\mathcal{R}_i_t\)</span>. This rate is defined in accord with <a href="#eq-forward1" class="quarto-xref">Equation&nbsp;<span>26.1</span></a>, substituting the date <span class="math inline">\(t_i\)</span> for date <span class="math inline">\(u\)</span>; i.e., <span id="eq-forward2"><span class="math display">\[
\frac{P(t,t_i)}{P(t,t_{i+1})}=1+\mathcal{R}_i_t\,\Delta t\;.
\qquad(26.2)\]</span></span></p>
<p>Note that when <span class="math inline">\(t=t_i\)</span>, <span class="math inline">\(P(t,t_i)=1\)</span>, so <span class="math inline">\(\mathcal{R}_i_{t_i}=\mathcal{R}_i\)</span> defined in <a href="Chapter_FixedIncome.html#eq-spot2" class="quarto-xref">Equation&nbsp;<span>25.4</span></a>—i.e., the forward rate equals the spot rate at <span class="math inline">\(t_i\)</span>.</p>
</section>
<section id="sec-s:portfoliosspotrates" class="level2" data-number="26.3">
<h2 data-number="26.3" class="anchored" data-anchor-id="sec-s:portfoliosspotrates"><span class="header-section-number">26.3</span> Portfolios that Pay Spot Rates</h2>
<p>One way to value caps and floors is to view them as portfolios of options on rates, as we will see later. In order to apply the option pricing formulas derived earlier, we need to know that each rate is the value of some asset, so the option can be viewed as an option on an asset. This is very straightforward.</p>
<p>To obtain the spot rate <span class="math inline">\(\mathcal{R}_i\)</span> at date <span class="math inline">\(t_{i+1}\)</span>, one needs $1 to invest at date <span class="math inline">\(t_i\)</span>. This can be arranged at date <span class="math inline">\(t&lt;t_i\)</span> by buying one unit of the bond maturing at <span class="math inline">\(t_i\)</span>. Investing the dollar paid by the bond at the spot rate at <span class="math inline">\(t_i\)</span> will generate <span class="math inline">\(1+\mathcal{R}_i\,\Delta t\)</span> dollars at date <span class="math inline">\(t_{i+1}\)</span>. The extra dollar can be eliminated by being short one unit of the bond maturing at <span class="math inline">\(t_{i+1}\)</span>, leaving <span class="math inline">\(\mathcal{R}_i\,\Delta t\)</span> dollars. Thus, the portfolio that pays the spot rate multiplied by the period length <span class="math inline">\(\Delta t\)</span> consists of being long one unit of the bond maturing at <span class="math inline">\(t_i\)</span> and short one unit of the bond maturing at <span class="math inline">\(t_{i+1}\)</span>.<br>
This implies that the value at date <span class="math inline">\(t&lt;t_i\)</span> of receiving <span class="math inline">\(\mathcal{R}_i\,\Delta t\)</span> dollars at date <span class="math inline">\(t_{i+1}\)</span> is <span class="math inline">\(P(t,t_i)-P(t,t_{i+1})\)</span>.</p>
<p>At date <span class="math inline">\(t_i\)</span> the spot rate <span class="math inline">\(\mathcal{R}_i\)</span> becomes known. Between <span class="math inline">\(t_i\)</span> and <span class="math inline">\(t_{i+1}\)</span>, the value of receiving <span class="math inline">\(\mathcal{R}_i\,\Delta t\)</span> dollars at date <span class="math inline">\(t_{i+1}\)</span> is the present value of this known cash flow, which is <span class="math inline">\(\mathcal{R}_i\,\Delta t\,P(t, t_{i+1})\)</span>. To summarize, the value of receiving <span class="math inline">\(\mathcal{R}_i\,\Delta t\)</span> dollars at date <span class="math inline">\(t_{i+1}\)</span> is <span id="eq-S_i"><span class="math display">\[
S_i_t = \begin{cases} P(t,t_i)-P(t,t_{i+1}) &amp; \text{if } t &lt; t_{i}\; ,\\
\mathcal{R}_i\,\Delta t\, P(t,t_{i+1}) &amp; \text{if }  t_{i} \leq t \leq t_{i+1}\;. \end{cases}
\qquad(26.3)\]</span></span></p>
<p>Actually, we will view a caplet as an option on a forward contract and apply Black’s formula. To do this, we need to know the forward price of the asset with price <span class="math inline">\(S_i_t\)</span> for a contract maturing at <span class="math inline">\(t_{i+1}\)</span>. We denote this forward price by <span class="math inline">\(F_i_t\)</span>. The synthetic forward argument presented in <a href="Chapter_Merton.html#sec-s:merton" class="quarto-xref"><span>Section 13.5</span></a> shows that for any dividend-reinvested asset with price <span class="math inline">\(S\)</span>, the forward price for a contract maturing at <span class="math inline">\(T\)</span> is <span class="math inline">\(S_t/P(t,T)\)</span>. So, <span class="math inline">\(F_i\)</span> is given by</p>
<p><span class="math display">\[
F_i_t = \begin{cases} \frac{P(t,t_i)}{P(t,t_{i+1})}-1 &amp; \text{if } t &lt; t_{i}\; ,\\
\mathcal{R}_i\,\varDelta t &amp; \text{if }  t_{i} \leq t \leq t_{i+1}\;. \end{cases}
\]</span></p>
<p><span id="eq-F_i"><span class="math display">\[
= \begin{cases}\mathcal{R}_i_t\,\Delta t &amp; \text{if } t &lt; t_{i}\; ,\\
\mathcal{R}_i\,\Delta t &amp; \text{if }  t_{i} \leq t \leq t_{i+1}\;, \end{cases}
\qquad(26.4)\]</span></span></p>
<p>where <span class="math inline">\(\mathcal{R}_i_t\)</span> is the forward rate defined in <a href="#eq-forward2" class="quarto-xref">Equation&nbsp;<span>26.2</span></a>. Thus, the asset with price <span class="math inline">\(S_i_t\)</span> pays the spot rate at date <span class="math inline">\(t_i\)</span> times the period length at date <span class="math inline">\(t_{i+1}\)</span>, and the forward price of this asset is the forward rate times the period length.</p>
</section>
<section id="sec-s:valuingcaps" class="level2" data-number="26.4">
<h2 data-number="26.4" class="anchored" data-anchor-id="sec-s:valuingcaps"><span class="header-section-number">26.4</span> The Market Model for Caps and Floors</h2>
<p>The valuation we will describe here is standard market practice for valuing caps and floors or at least for quoting the prices of caps and floors. Specifically, it is standard to quote prices in terms of implied volatilities, where the volatility is to be input into Black’s formula for options on forwards. This model is sometimes called the market model. </p>
<p>We can apply Black’s formula to the forward contract with price <span class="math inline">\(F_i\)</span> described in the previous section. We view the caplet as a call option maturing at <span class="math inline">\(t_i\)</span> on this forward contract that matures at <span class="math inline">\(t_{i+1}\)</span>. As explained in Chapter~<span class="math inline">\(\ref{c_forwardexchange}\)</span>, the value at the maturity date <span class="math inline">\(T\)</span> of a call option with strike <span class="math inline">\(K\)</span> on a forward contract with price <span class="math inline">\(F\)</span> maturing at <span class="math inline">\(T' \geq T\)</span> is <span class="math inline">\(\max(0,F_T-K)P(T,T')\)</span>. Therefore, the value at maturity of a call option maturing at <span class="math inline">\(t_i\)</span> with strike <span class="math inline">\(\bar{\mathcal{R}}\,\Delta t\)</span> on the forward contract with price <span class="math inline">\(F_i\)</span> is <span class="math display">\[\max(0,F_i_{t_i}-\bar{\mathcal{R}}\,\Delta t)P(t_i,t_{i+1})\; .\]</span> Since <span class="math inline">\(F_i_{t_i}=\mathcal{R}_i\,\Delta t\)</span>, this equals <span id="eq-capletvalue"><span class="math display">\[
\max(0,\mathcal{R}_i-\bar{\mathcal{R}})\,\Delta t\,P(t_i,t_{i+1})\;.
\qquad(26.5)\]</span></span></p>
<p>This is also the value of the caplet at date <span class="math inline">\(t_i\)</span>.</p>
<p>It follows that the value of the caplet at any date <span class="math inline">\(t\leq t_i\)</span> is the value of the call option on the forward contract. To apply Black’s formula, we need the forward price to have a constant (or at least non-randomly varying) volatility. As noted earlier, at dates <span class="math inline">\(t\leq t_i\)</span>, <span class="math inline">\(F_i_t=\mathcal{R}_i_t\,\Delta t\)</span>, where <span class="math inline">\(\mathcal{R}_i_t\)</span> is the forward rate, so the volatility of the forward price is the volatility of the forward rate. Black’s formula yields:</p>
<div class="callout callout-style-default callout-Rule no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="header-section-number">26.5</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Assuming the forward rate <span class="math inline">\(\mathcal{R}_i_t\)</span> has a constant volatility <span class="math inline">\(\sigma\)</span>, the value at date <span class="math inline">\(0&lt;t_i\)</span> of a caplet with reset date <span class="math inline">\(t_i\)</span> and payment date <span class="math inline">\(t_{i+1}\)</span> is</p>
<p><span id="eq-blackcaplet100"><span class="math display">\[
P(0,t_{i+1})\mathcal{R}_i_0\,\Delta t\,N(d_1) - P(0,t_{i+1})\bar{\mathcal{R}}\,\Delta t\,N(d_2)\;,
\qquad(26.6)\]</span></span></p>
<p>and the value at date <span class="math inline">\(0&lt;t_i\)</span> of a floorlet with reset date <span class="math inline">\(t_i\)</span> and payment date <span class="math inline">\(t_{i+1}\)</span> is <span id="eq-blackfloorlet100"><span class="math display">\[
P(0,t_{i+1})\bar{\mathcal{R}}\,\Delta t\,N(-d_2)- P(0,t_{i+1})\mathcal{R}_i_0\,\Delta t\,N(-d_1)\;,
\qquad(26.7)\]</span></span></p>
<p>where</p>
<p><span class="math display">\[
d_1 = \frac{\log \left(\mathcal{R}_i_0/\bar{\mathcal{R}}\right)+\frac{1}{2}\sigma^2 t_i}{\sigma\sqrt{t_i}}\; ,
\]</span> <span class="math display">\[
d_2 = d_1 - \sigma\sqrt{t_i}\;.
\]</span></p>
</div>
</div>
<p>The put-call parity relationship for caplets and floorlets can be seen as follows. If we add <span class="math inline">\(\bar{\mathcal{R}}\Delta t\)</span> to the caplet payment, we obtain <span class="math display">\[\bar{\mathcal{R}}\,\Delta t +  \max(0,\mathcal{R}_i-\bar{\mathcal{R}})\,\Delta t = \max( \bar{\mathcal{R}}, \mathcal{R}_i)\,\Delta t\; .\]</span> On the other hand, if we add <span class="math inline">\(\mathcal{R}_i\,\Delta t\)</span> to the floorlet payment, we obtain the same thing: <span class="math display">\[\mathcal{R}_i\,\Delta t + \max(0,\bar{\mathcal{R}}-\mathcal{R}_i)\,\Delta t = \max( \mathcal{R}_i,\bar{\mathcal{R}} )\,\Delta t\; .\]</span> Hence, the value of a caplet plus the value of receiving <span class="math inline">\(\bar{\mathcal{R}}\,\Delta t\)</span> at date <span class="math inline">\(t_{i+1}\)</span> must equal the value of a floorlet plus the value of receiving <span class="math inline">\(\mathcal{R}_i\,\Delta t\)</span> at date <span class="math inline">\(t_{i+1}\)</span>. The value at any date <span class="math inline">\(t\leq t_i\)</span> of receiving <span class="math inline">\(\bar{\mathcal{R}}\,\Delta t\)</span> at date <span class="math inline">\(t_{i+1}\)</span> is the value of <span class="math inline">\(\bar{\mathcal{R}}\,\Delta t\)</span> discount bonds maturing at date <span class="math inline">\(t_{i+1}\)</span>, which we are denoting by <span class="math inline">\(\bar{\mathcal{R}}\,\Delta t P(t,t_{i+1})\)</span>. The value at at any date <span class="math inline">\(t\leq t_i\)</span> of obtaining <span class="math inline">\(\mathcal{R}_i\,\Delta t\)</span> dollars at date <span class="math inline">\(t_{i+1}\)</span> is<br>
<span class="math inline">\(S_i_t =P(t,t_i)-P(t,t_{i+1})\)</span>. We conclude that <span class="math display">\[\text{ Value of Caplet} \;+ \;\bar{\mathcal{R}}\,\Delta t P(t,t_{i+1}) = \text{Value of Floorlet} \;+\; P(t,t_i)-P(t,t_{i+1})\; .\]</span></p>
<p>We will compute the value of each caplet with the Black_Call function. In the Black_Call function, we input the forward price for the caplet with reset date <span class="math inline">\(t_i\)</span> as <span id="eq-capletforwardprice"><span class="math display">\[
F_i_0 = \mathcal{R}_i_0\,\Delta t = \frac{P(0,t_i)}{P(0,t_{i+1})} - 1\;,
\qquad(26.8)\]</span></span></p>
<p>as given in <a href="#eq-forward2" class="quarto-xref">Equation&nbsp;<span>26.2</span></a> and <a href="#eq-F_i" class="quarto-xref">Equation&nbsp;<span>26.4</span></a>. The exercise price of each caplet is <span class="math inline">\(K=\bar{\mathcal{R}}\,\Delta t\)</span>. We also need to input the discounting factor <span class="math inline">\(P(0,t_{i+1})\)</span>. The discount bond prices <span class="math inline">\(P(0,t_1)\)</span>, , <span class="math inline">\(P(0, t_N)\)</span> are input as a vector <code>P</code>. The discount bond price <span class="math inline">\(P(0,t_0)\)</span> is input as <code>P0</code>. We will assume the same volatility for each forward rate.</p>
<div id="market_model_cap" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> black_call(F, K, P, sigma, T):</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    d1 <span class="op">=</span> (np.log(F <span class="op">/</span> K) <span class="op">+</span> <span class="fl">0.5</span> <span class="op">*</span> sigma <span class="op">**</span> <span class="dv">2</span> <span class="op">*</span> T) <span class="op">/</span> (sigma <span class="op">*</span> np.sqrt(T))</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    d2 <span class="op">=</span> d1 <span class="op">-</span> sigma <span class="op">*</span> np.sqrt(T)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> P <span class="op">*</span> (F <span class="op">*</span> norm.cdf(d1) <span class="op">-</span> K <span class="op">*</span> norm.cdf(d2))</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> market_model_cap(P0, P, rbar, sigma, N, t0, dt):</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    K <span class="op">=</span> rbar <span class="op">*</span> dt</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> t0 <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> P[<span class="dv">0</span>] <span class="op">*</span> <span class="bu">max</span>(<span class="dv">0</span>, <span class="dv">1</span> <span class="op">/</span> P[<span class="dv">0</span>] <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> rbar <span class="op">*</span> dt)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        F <span class="op">=</span> P0 <span class="op">/</span> P[<span class="dv">0</span>] <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        cap_value <span class="op">=</span> black_call(F, K, P[<span class="dv">0</span>], sigma, t0)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, N):</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        F <span class="op">=</span> P[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">/</span> P[i] <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        cap_value <span class="op">+=</span> black_call(F, K, P[i], sigma, t0 <span class="op">+</span> i <span class="op">*</span> dt)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cap_value</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>P0 <span class="op">=</span> <span class="fl">0.95</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>P <span class="op">=</span> [<span class="fl">0.92</span>, <span class="fl">0.89</span>, <span class="fl">0.85</span>, <span class="fl">0.80</span>]</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>rbar <span class="op">=</span> <span class="fl">0.03</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span> <span class="fl">0.2</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>t0 <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Market Model Cap:"</span>, market_model_cap(P0, P, rbar, sigma, N, t0, dt))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Market Model Cap: 0.09810002490023066</code></pre>
</div>
</div>
</section>
<section id="sec-s:swaptions" class="level2" data-number="26.6">
<h2 data-number="26.6" class="anchored" data-anchor-id="sec-s:swaptions"><span class="header-section-number">26.6</span> The Market Model for European Swaptions</h2>
<p>The owner of a European swaption has an option to enter into a swap at the maturity date of the swaption. A payer swaption gives the owner of the option the right to enter into a swap as a fixed-rate payer, for a given swap rate (not necessarily a rate that makes the swap have zero value at any date). The owner of a receiver swaption has the right to enter into the swap as a fixed-rate receiver. The values of payer swaptions and receiver swaptions are linked by put-call parity.</p>
<p>A payer swaption has similarities to a cap. The owner of a cap has the right to receive the floating rate and pay the fixed rate and will do so in each period in which the floating rate is higher. Similarly, the owner of a payer swaption has the right to receive floating and pay fixed. However, the owner of a cap chooses each period whether to exercise his option, whereas the owner of a swaption makes a once-and-for-all decision whether to exercise, at the maturity of the swaption. A cap is therefore a portfolio of options, whereas a swaption is an option on a portfolio. In general of course, other things being equal, a portfolio of options is worth more than an option on a portfolio.</p>
<p>Consider a payer swaption with maturity date <span class="math inline">\(T\)</span> and swap rate <span class="math inline">\(\bar{\mathcal{R}}\)</span>, where the underlying swap has payment dates <span class="math inline">\(t_1,\ldots,t_N\)</span> with the first reset date of the swap being <span class="math inline">\(t_0 = t_1-\Delta t \geq T\)</span>. We assume the notional principal of the swap is $1. Expression <a href="Chapter_FixedIncome.html#eq-swapvalue100" class="quarto-xref">Equation&nbsp;<span>25.5</span></a> in <a href="Chapter_FixedIncome.html#sec-s:swaps" class="quarto-xref"><span>Section 25.3</span></a> gives the value at date <span class="math inline">\(T\)</span> to the payer in the swap as <span class="math display">\[S_T-Z_T\; ,\]</span> where we define</p>
<p><span class="math display">\[
S_t=P(t,t_0)- P(t,t_N)\; ,
\]</span> <span id="eq-fixedrateside"><span class="math display">\[
Z_t =  \bar{\mathcal{R}}\,\Delta t \sum_{i=1}^N P(t,t_i)\;.
\qquad(26.9)\]</span></span></p>
<p>As explained in <a href="Chapter_FixedIncome.html#sec-s:swaps" class="quarto-xref"><span>Section 25.3</span></a>, <span class="math inline">\(S_t\)</span> is the value of the floating-rate payments in the swap and <span class="math inline">\(Z_t\)</span> is the value of the fixed-rate payments. The value of a payer swaption at its maturity <span class="math inline">\(T\)</span> is therefore <span class="math display">\[\max(0,S_T-Z_T)\; .\]</span> We can value the swaption using Margrabe’s formula for exchange options provided the ratio of prices <span class="math inline">\(S/Z\)</span> has a constant (or non-randomly varying) volatility. The volatility of the ratio is the same as the volatility of the forward swap rate. To see this, recall that in <a href="Chapter_FixedIncome.html#sec-s:swaps" class="quarto-xref"><span>Section 25.3</span></a> the forward swap rate <span class="math inline">\(\mathcal{R}_t\)</span> was defined to be the rate such that <span class="math display">\[P(t,t_0)- P(t,t_N) = \mathcal{R}_t\,\Delta t \sum_{i=1}^N P(t,t_i)\; ,\]</span> which means that the swap would have zero value if initiated at date <span class="math inline">\(t\)</span> at the rate <span class="math inline">\(\mathcal{R}_t\)</span>—cf.&nbsp;equation~<a href="Chapter_FixedIncome.html#eq-swaprate1" class="quarto-xref">Equation&nbsp;<span>25.6</span></a>. Thus, <span class="math display">\[\begin{equation*}
\frac{S_t}{Z_t} = \frac{P(t,t_0)- P(t,t_N)}{\bar{\mathcal{R}}\,\Delta t \sum_{i=1}^N P(t,t_i)} = \frac{\mathcal{R}_t\,\Delta t \sum_{i=1}^N P(t,t_i)}{\bar{\mathcal{R}}\,\Delta t \sum_{i=1}^N P(t,t_i)} = \frac{\mathcal{R}_t}{\bar{\mathcal{R}}}\;,
\end{equation*}\]</span> where <span class="math inline">\(\mathcal{R}_t\)</span> is the forward swap rate.<br>
Margrabe’s formula implies:<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="callout callout-style-default callout-Rule no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="header-section-number">26.7</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Assuming the forward swap rate <span class="math inline">\(\mathcal{R}_t\)</span> has a constant volatility <span class="math inline">\(\sigma\)</span>, the date–0 value of a European payer swaption is</p>
<p><span id="eq-margrabepayerswaption100"><span class="math display">\[
\big[P(0,t_0)-P(0,t_N)\big]N(d_1) - \left[\bar{\mathcal{R}}\,\Delta t \sum_{i=1}^N P(0,t_i)\right]N(d_2)\;,
\qquad(26.10)\]</span></span></p>
<p>and the date–0 value of a European receiver swaption is <span id="eq-margrabereceiverswaption100"><span class="math display">\[
\left[\bar{\mathcal{R}}\,\Delta t \sum_{i=1}^N P(0,t_i)\right]N(-d_2) - \big[P(0,t_0)-P(0,t_N)\big]N(-d_1)\;,
\qquad(26.11)\]</span></span></p>
<p>where</p>
<p><span id="eq-margrabepayerswaption100d1"><span class="math display">\[
d_1 = \frac{\log\big(P(0,t_0)-P(0,t_N)\big) - \log\left(\bar{\mathcal{R}}\,\Delta t \sum_{i=1}^N P(0,t_i)\right) + \frac{1}{2}\sigma^2T}{\sigma\sqrt{T}}\;,
\qquad(26.12)\]</span></span></p>
<p><span class="math display">\[
d_2 = d_1-\sigma\sqrt{T}.
\]</span></p>
</div>
</div>
<p>Put-call parity for swaptions is as follows: fixed-rate cash flows plus the option to exchange for floating is equivalent to floating-rate cash flows plus the option to exchange for fixed. In each side of this equivalence, one obtains, at the option maturity, the larger of the values of the fixed and floating-rate legs. More formally, <span class="math display">\[\begin{multline*} \bar{\mathcal{R}}\,\Delta t \sum_{i=1}^N P(T,t_i) + \max\left(0, \,P(T,t_0)- P(T,t_N)-  \bar{\mathcal{R}}\,\Delta t \sum_{i=1}^N P(T,t_i)\right) \\= P(T,t_0)- P(T,t_N) + \max\left(0,\,  \bar{\mathcal{R}}\,\Delta t \sum_{i=1}^N P(T,t_i)-P(T,t_0)+ P(T,t_N)\right).
\end{multline*}\]</span> Therefore, at any date <span class="math inline">\(t \leq T\)</span>,</p>
<p><span class="math display">\[\begin{multline}
\bar{\mathcal{R}}\,\Delta t \sum_{i=1}^N P(t,t_i)\; + \;\text{Value of Payer Swaption}\\ =
P(t,t_0)- P(t,t_N) \;+ \;\text{Value of Receiver Swaption}.
\end{multline}\]</span> {#eq-swaptionparity}</p>
<p>The following code uses the Margrabe formula to price a European swaption.</p>
<div id="payer_swaption" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> margrabe(S1, S2, sigma, q1, q2, T):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    sigma2 <span class="op">=</span> sigma <span class="op">**</span> <span class="dv">2</span> <span class="op">*</span> T</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    d1 <span class="op">=</span> (np.log(S1 <span class="op">/</span> S2) <span class="op">+</span> <span class="fl">0.5</span> <span class="op">*</span> sigma2) <span class="op">/</span> np.sqrt(sigma2)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    d2 <span class="op">=</span> d1 <span class="op">-</span> np.sqrt(sigma2)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> S1 <span class="op">*</span> norm.cdf(d1) <span class="op">-</span> S2 <span class="op">*</span> norm.cdf(d2)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> market_model_payer_swaption(P0, P, rbar, sigma, N, T, dt):</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    floating_leg_value <span class="op">=</span> P0 <span class="op">-</span> P[N <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    fixed_leg_value <span class="op">=</span> P[<span class="dv">0</span>]</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, N):</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        fixed_leg_value <span class="op">+=</span> P[i]</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    fixed_leg_value <span class="op">*=</span> rbar <span class="op">*</span> dt</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> margrabe(floating_leg_value, fixed_leg_value, sigma, <span class="dv">0</span>, <span class="dv">0</span>, T)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>P0 <span class="op">=</span> <span class="fl">0.95</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>P <span class="op">=</span> [<span class="fl">0.92</span>, <span class="fl">0.89</span>, <span class="fl">0.85</span>, <span class="fl">0.80</span>]</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>rbar <span class="op">=</span> <span class="fl">0.03</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span> <span class="fl">0.2</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>t0 <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Market Model Payer Swaption:"</span>, market_model_payer_swaption(P0, P, rbar, sigma, N, T, dt))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Market Model Payer Swaption: 0.09810051508638021</code></pre>
</div>
</div>
</section>
<section id="sec-s:consistency" class="level2" data-number="26.8">
<h2 data-number="26.8" class="anchored" data-anchor-id="sec-s:consistency"><span class="header-section-number">26.8</span> A Comment on Consistency</h2>
<p>It is well known that it is inconsistent to assume both that the forward rates <span class="math inline">\(\mathcal{R}_i_t\)</span> and the forward swap rate <span class="math inline">\(\mathcal{R}_t\)</span> have constant volatilities. We can obtain some intuition for this as follows. Recall that <span class="math display">\[\mathcal{R}_i_t\,\Delta t = \frac{P(t,t_i)-P(t,t_{i+1})}{P(t,t_{i+1})}\; ,\]</span> and <span class="math display">\[\mathcal{R}_t\,\Delta t = \frac{P(t,t_0)-P(t,t_N)}{\sum_{i=0}^{N-1} P(t,t_{i+1})}\; .\]</span> The numerator in the last equation is the sum (over <span class="math inline">\(i=0,\dots,N\!-\!1\)</span>) of the numerators in the previous equation; hence, it is the sum of the <span class="math inline">\(\mathcal{R}_i_t\,\Delta t\,P(t,t_{i+1})\)</span>. This implies that <span class="math display">\[\mathcal{R}_t = \frac{\sum_{i=0}^{N-1} P(t,t_{i+1})\mathcal{R}_i_t}{\sum_{i=1}^{N-1}P(t,t_{i+1})}\; ,\]</span> which we can write as <span class="math display">\[\mathcal{R}_t = \sum_{i=0}^{N-1} w_i_t \mathcal{R}_i_t\; ,\]</span> where the weights <span class="math inline">\(w_i_t\)</span> are defined as <span class="math display">\[w_i_t = \frac{P(t,t_{i+1})}{\sum_{i=0}^{N-1}P(t,t_{i+1})}\; .\]</span> Therefore, the forward swap rate is a weighted average of the forward rates. A sum (or average) of lognormal variables is not lognormal, so if the forward rate has a constant volatility, then the forward swap rate will not (and vice versa), absent very peculiar assumptions about the weights <span class="math inline">\(w_i_t\)</span>. This means that one should not really simultaneously use Black’s formula for valuing caps (or floors) and Margrabe’s formula for valuing swaptions (though there is evidence that the error introduced by doing so may be small). In the following chapters, we will consider other models that do not suffer from this type of inconsistency.</p>
</section>
<section id="sec-s:caps2" class="level2" data-number="26.9">
<h2 data-number="26.9" class="anchored" data-anchor-id="sec-s:caps2"><span class="header-section-number">26.9</span> Caplets as Puts on Discount Bonds</h2>
<p>Previously, we considered a caplet as a call option on the forward rate and thus a bet on higher interest rates. This is equivalent to a bet on lower bond prices, and we will now show that a caplet with payment date <span class="math inline">\(t_{i+1}\)</span> is equivalent to <span class="math inline">\(1+\bar{\mathcal{R}}\,\Delta t\)</span> put options on the <span class="math inline">\(t_{i+1}\)</span>–maturity discount bond. The put options mature at the reset date <span class="math inline">\(t_i\)</span> of the caplet and have strike equal to <span class="math inline">\(1/(1+ \bar{\mathcal{R}}\,\Delta t)\)</span>. To see this equivalence, note that the value of <span class="math inline">\(1+\bar{\mathcal{R}}\,\Delta t\)</span> such options at their maturity date <span class="math inline">\(t_i\)</span>~is <span class="math display">\[\begin{multline*}
\big[1+\bar{\mathcal{R}}\,\Delta t\big] \max\left(0,\frac{1}{1+ \bar{\mathcal{R}}\,\Delta t}-P(t_i,t_{i+1})\right) \\ \begin{array}{l}
= \max\big(0,\,1-\big[1+\bar{\mathcal{R}}\,\Delta t\big]P(t_i,t_{i+1})\big)\\
=P(t_i,t_{i+1})\max\left(0,\frac{1}{P(t_i,t_{i+1})}-1-\bar{\mathcal{R}}\,\Delta t\right)\;. \end{array}
\end{multline*}\]</span> Given that <span class="math inline">\(1/P(t_i,t_{i+1}) = 1+\mathcal{R}_i\,\Delta t\)</span>, this equals <span class="math display">\[P(t_i,t_{i+1}) \max(0,\mathcal{R}_i-\bar{\mathcal{R}})\,\Delta t\; .\]</span> This is the value at date <span class="math inline">\(t_i\)</span> of the caplet with payment date <span class="math inline">\(t_{i+1}\)</span> shown in expression <a href="#eq-capletvalue" class="quarto-xref">Equation&nbsp;<span>26.5</span></a>. It follows that the caplet and the <span class="math inline">\(1+\bar{\mathcal{R}}\,\Delta t\)</span> put options must have the same value at any date prior to <span class="math inline">\(t_i\)</span>.</p>
<p>Similarly, a floorlet with payment date <span class="math inline">\(t_{i+1}\)</span> is equivalent to <span class="math inline">\(1+\bar{\mathcal{R}}\,\Delta t\)</span> call options on the <span class="math inline">\(t_{i+1}\)</span>–maturity discount bond, with the call options maturing at date <span class="math inline">\(t_i\)</span> and having strike equal to <span class="math inline">\(1/(1+ \bar{\mathcal{R}}\,\Delta t)\)</span>.<br>
In the following chapters, we will describe models for valuing bond options. These models will also be applied to price caps, as portfolios of put options on discount bonds, and to price floors, as portfolios of calls. </p>
</section>
<section id="sec-s:swaptionscouponbondoptions" class="level2" data-number="26.10">
<h2 data-number="26.10" class="anchored" data-anchor-id="sec-s:swaptionscouponbondoptions"><span class="header-section-number">26.10</span> Swaptions as Options on Coupon Bonds</h2>
<p>As noted previously, the value at date <span class="math inline">\(T\)</span> of the payer swaption, if exercised, is <span class="math display">\[P(T,t_0)-P(T,t_N) - \bar{\mathcal{R}}\,\Delta t\sum_{i=1}^N P(T,t_i)\; .\]</span> In <a href="#sec-s:swaptions" class="quarto-xref"><span>Section 26.6</span></a>, we considered this as the difference of two pieces, the first piece being <span class="math inline">\(S_T = P(T,t_0)-P(T,t_N)\)</span>, which is the value of the floating-rate leg, and the second being <span class="math inline">\(Z_T = \bar{\mathcal{R}}\,\Delta t\sum_{i=1}^N P(T,t_i)\)</span>, the value of the fixed-rate leg. We can also separate it differently—the first part being <span class="math inline">\(P(T,t_0)\)</span>, which is the value at the swaption maturity of the discount bond maturing at <span class="math inline">\(t_0\)</span>, and the second part being <span class="math inline">\(P(T,t_N)+\bar{\mathcal{R}}\,\Delta t\sum_{i=1}^N P(T,t_i)\)</span>, which is the value of a fixed-rate bond including the face value at maturity. Thus, a payer swaption is equivalent to an option to exchange a fixed-rate coupon bond for a discount bond. A receiver swaption is an option to engage in the reverse exchange. </p>
<p>Typically, <span class="math inline">\(t_0=T\)</span> (the swap starts at the swaption maturity), in which case <span class="math inline">\(P(T,t_0)=1\)</span> and the payer (receiver) swaption is a standard put (call) option on the coupon bond, with exercise price equal to 1. The models developed in later chapters for valuing options on coupon bonds can therefore also be applied to value swaptions.</p>
</section>
<section id="section-2" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="section-2"></h2>
<div id="exr-exercise121" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 26.1</strong></span> &nbsp;</p>
Modify the function <code>MarketModel_Cap</code> so that rather than taking <code>P0</code> and the vector <code>P</code> of discount bond prices as inputs, it looks up discount bond prices from a function <code>DiscountBondPrice</code> that returns a discount bond price for any maturity. For example, <code>DiscountBondPrice</code> might be based on a cubic spline fit to the yield curve as discussed in <a href="Chapter_FixedIncome.html#sec-s:yieldcurve" class="quarto-xref"><span>Section 25.1</span></a>. To test the new function <code>MarketModel_Cap</code>, you will need to create a test function <code>DiscountBondPrice</code>. For example, you could use the following, which corresponds to a rather steeply increasing yield curve, especially at the short end.
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Create a function <code>MarketModel_Cap_ImpliedVol</code> that uses bisection to find the forward rate volatility (assume the same volatility for each forward rate) that equates the cap price given by <code>MarketModel_Cap</code> to a market cap price. The function should take the same inputs as <code>MarketModel_Cap</code> except that the forward rate volatility should be replaced by the market cap price.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Repeat <a href="#exr-exercise121" class="quarto-xref">Exercise&nbsp;<span>26.1</span></a> for the function <code>MarketModel_Payer_Swaption</code>.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Create a function <code>MarketModel_Payer_Swaption_ImpliedVol</code> that uses bisection to find the forward swap rate volatility that equates the swaption price given by <code>MarketModel_Payer_Swaption</code> to a market swaption price. The function should take the same inputs as <code>MarketModel_Payer_Swaption</code> except that the forward swap rate volatility should be replaced by the market swaption price.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Create a Python function <code>MarketModel_Floor</code> to value a floor, assuming the forward rates have constant and equal volatilities. Write the function so that it looks up discount bond prices from the <code>DiscountBondPrice</code> function.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Create a Python function <code>MarketModel_Receiver_Swaption</code> to value a receiver swaption, assuming the forward swap rate has a constant volatility. Write the function so that it looks up discount bond prices from the <code>DiscountBondPrice</code> function.</p>
</div>
</div>
</div>
<div id="exr-e_eicchorn" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 26.2</strong></span> The following exercise is motivated by an example presented in one of my classes by David Eichhorn of NISA Investment Advisors.</p>
<ol type="1">
<li>Using the <code>DiscountBondPrice</code> function above, calculate what the swap rate should be today for a 10-year swap with semiannual cash flows.</li>
<li>Calculate the value of a $ 3 $ European receiver swaption (an option maturing in 3 years to enter into a 10-year swap as the receiver) with the underlying swap having semiannual cash flows and the fixed rate being equal to the spot swap rate calculated in part (a). Assume the forward swap rate has a constant volatility equal to 0.1.</li>
<li>Consider a $ 3 $ European payer swaption with the underlying swap having semiannual cash flows. Calculate the fixed rate of the swap that makes the payer swaption have the same value as the receiver swaption calculated in part (b). Assume the forward swap rate has a constant volatility equal to 0.1.</li>
<li>Calculate the forward swap rate for a 10-year swap with semiannual cash flows beginning in 3 years.</li>
</ol>
<p><strong>Commentary</strong></p>
<p>A collar is an alternative to a forward contract. With standard options, as mentioned in <span class="quarto-unresolved-ref">?sec-s:fundamentalconcepts</span>, a collar consists of a long call and short put (or the reverse). If the strike of each equals the forward price, then the collar is equivalent to a forward and will have zero cost—by put-call parity, both options have the same price, so the purchase of the call can be financed by selling the put. One can also construct a zero-cost collar with the call and put having different strikes.</p>
<p>A swaption collar is an alternative to a forward swap contract. For example, consider a long receiver swaption with the underlying swap rate being <span class="math inline">\(\bar{\mathcal{R}}_r\)</span> and a short payer swaption with the underlying swap rate being <span class="math inline">\(\bar{\mathcal{R}}_p &gt; \bar{\mathcal{R}}_r\)</span>, with the swaptions having the same time to maturity <span class="math inline">\(T\)</span>. If the market swap rate <span class="math inline">\(\mathcal{R}_T\)</span> at date <span class="math inline">\(T\)</span> is below <span class="math inline">\(\bar{\mathcal{R}}_r\)</span> then the receiver swaption will be in the money and will be exercised—one would rather receive <span class="math inline">\(\bar{\mathcal{R}}_r\)</span> than <span class="math inline">\(\mathcal{R}_T\)</span> in this circumstance. Likewise, if <span class="math inline">\(\mathcal{R}_T &gt; \bar{\mathcal{R}}_p\)</span> then the payer swaption will be exercised—one would rather pay <span class="math inline">\(\bar{\mathcal{R}}_p\)</span> than <span class="math inline">\(\mathcal{R}_T\)</span> in this circumstance. When <span class="math inline">\(\bar{\mathcal{R}}_p &gt;\mathcal{R}_T&gt; \bar{\mathcal{R}}_r\)</span>, neither swaption is in the money. Thus, we have the following for the investor who is long the receiver swaption and short the payer swaption:</p>
<ul>
<li><span class="math inline">\(\mathcal{R}_T&lt; \bar{\mathcal{R}}_r \Longrightarrow\)</span> receive <span class="math inline">\(\bar{\mathcal{R}}_r\)</span> and pay floating for the maturity of the swap contract,</li>
<li><span class="math inline">\(\bar{\mathcal{R}}_r&lt; \mathcal{R}_T&lt; \bar{\mathcal{R}}_p \Longrightarrow\)</span> neither swaption exercised,</li>
<li><span class="math inline">\(\mathcal{R}_T &gt; \bar{\mathcal{R}}_p \Longrightarrow\)</span> receive <span class="math inline">\(\bar{\mathcal{R}}_p\)</span> and pay floating for the maturity of the swap contract.</li>
</ul>
<p>Note that one can always pay floating just by borrowing short term; it is receiving fixed that is important here. In the second case above, the investor can engage in a swap at date <span class="math inline">\(T\)</span> and receive the market swap rate <span class="math inline">\(\mathcal{R}_T\)</span>. Thus, the collar guarantees that he will receive at least <span class="math inline">\(\bar{\mathcal{R}}_r\)</span> and will receive no more than <span class="math inline">\(\bar{\mathcal{R}}_p\)</span>, whatever might be the market swap rate at date <span class="math inline">\(T\)</span>.</p>
<p>An institution such as a pension fund can use a receiver swap to help hedge its fixed-rate liabilities. As an alternative, it can use a collar as just described. The difference is that a forward receiver swap would guarantee a fixed rate to be received, whereas the collar leaves some residual risk—it guarantees only that the fixed rate will be between <span class="math inline">\(\bar{\mathcal{R}}_r\)</span> and <span class="math inline">\(\bar{\mathcal{R}}_p\)</span>. This risk may appear attractive. In <a href="#exr-e_eicchorn" class="quarto-xref">Exercise&nbsp;<span>26.2</span></a>, the lower rate <span class="math inline">\(\bar{\mathcal{R}}_r\)</span> is the market swap rate, and the higher rate <span class="math inline">\(\bar{\mathcal{R}}_p\)</span> is significantly higher; thus, it may appear that the worst-case scenario is the same as what one can get in the market with a swap and the best case is significantly better. However, this is an illusion, because the appropriate comparison is with a forward swap (starting at the maturity of the swaptions) and the forward swap rate is substantially higher than the spot swap rate (due to the yield curve being steeply upward sloping). This illusion may create a good marketing opportunity for sellers of collars.</p>
</div>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>To improve the clarity of the typesetting, we have written <span class="math inline">\(\log(S)-\log(Z)\)</span> in <a href="#eq-margrabepayerswaption100d1" class="quarto-xref">Equation&nbsp;<span>26.12</span></a> instead of our customary <span class="math inline">\(\log(S/Z)\)</span>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Chapter_FixedIncome.html" class="pagination-link" aria-label="Fixed-Income Concepts">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Fixed-Income Concepts</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Chapter_Vasicek.html" class="pagination-link" aria-label="Vasicek and Extensions">
        <span class="nav-page-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Vasicek and Extensions</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions"><ul><li><a href="https://github.com/math-finance-book/book-code.git/blob/main/Chapter_FixedIncomeDerivatives.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer></body></html>