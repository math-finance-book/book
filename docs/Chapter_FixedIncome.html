<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>25&nbsp; Fixed-Income Concepts â€“ Pricing and Hedging Derivative Securities: Theory and Methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Chapter_FixedIncomeDerivatives.html" rel="next">
<link href="./Chapter_MachineLearning.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-933f24a0c1e0be8a62c2179459603458.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-217607b4065b1a3128a07792af3f8e33.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>



<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

<script type="text/javascript">

window.PlotlyConfig = {MathJaxConfig: 'local'};

if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}

if (typeof require !== 'undefined') {

require.undef("plotly");

requirejs.config({

    paths: {

        'plotly': ['https://cdn.plot.ly/plotly-2.35.2.min']

    }

});

require(['plotly'], function(Plotly) {

    window._Plotly = Plotly;

});

}

</script>



<style>
div.callout-Principle.callout {
  border-left-color: #e3aab2;
}
div.callout-Principle.callout-style-default > .callout-header {
  background-color: rgba(227, 170, 178, 0.13);
}
div.callout-Principle .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Principle.callout-style-default .callout-icon::before, div.callout-Principle.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-Extra.callout {
  border-left-color: #d5deed;
}
div.callout-Extra.callout-style-default > .callout-header {
  background-color: rgba(213, 222, 237, 0.13);
}
div.callout-Extra .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Extra.callout-style-default .callout-icon::before, div.callout-Extra.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-Rule.callout {
  border-left-color: #a1bced;
}
div.callout-Rule.callout-style-default > .callout-header {
  background-color: rgba(161, 188, 237, 0.13);
}
div.callout-Rule .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Rule.callout-style-default .callout-icon::before, div.callout-Rule.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-WritingToDo.callout {
  border-left-color: #a7f2d8;
}
div.callout-WritingToDo.callout-style-default > .callout-header {
  background-color: rgba(167, 242, 216, 0.13);
}
div.callout-WritingToDo .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-WritingToDo.callout-style-default .callout-icon::before, div.callout-WritingToDo.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-Done.callout {
  border-left-color: #e8cc97;
}
div.callout-Done.callout-style-default > .callout-header {
  background-color: rgba(232, 204, 151, 0.13);
}
div.callout-Done .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Done.callout-style-default .callout-icon::before, div.callout-Done.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-Example.callout {
  border-left-color: #e8cc97;
}
div.callout-Example.callout-style-default > .callout-header {
  background-color: rgba(232, 204, 151, 0.13);
}
div.callout-Example .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Example.callout-style-default .callout-icon::before, div.callout-Example.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-CodeToDo.callout {
  border-left-color: #eb4034;
}
div.callout-CodeToDo.callout-style-default > .callout-header {
  background-color: rgba(235, 64, 52, 0.13);
}
div.callout-CodeToDo .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-CodeToDo.callout-style-default .callout-icon::before, div.callout-CodeToDo.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-InProgress.callout {
  border-left-color: #eaacf2;
}
div.callout-InProgress.callout-style-default > .callout-header {
  background-color: rgba(234, 172, 242, 0.13);
}
div.callout-InProgress .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-InProgress.callout-style-default .callout-icon::before, div.callout-InProgress.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
div.callout-Exercise.callout {
  border-left-color: #ede29d;
}
div.callout-Exercise.callout-style-default > .callout-header {
  background-color: rgba(237, 226, 157, 0.13);
}
div.callout-Exercise .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Exercise.callout-style-default .callout-icon::before, div.callout-Exercise.callout-titled .callout-icon::before {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="nil" class="bi bi-exclamation-triangle" viewBox="0 0 16 16"><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/></svg>');
}
</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Chapter_FixedIncome.html">Part VII: Fixed Income</a></li><li class="breadcrumb-item"><a href="./Chapter_FixedIncome.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Fixed-Income Concepts</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Pricing and Hedging Derivative Securities: Theory and Methods</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/math-finance-book/book-code.git" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Part I: Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Options.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Options</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Futures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Futures and Swaps</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Part II: Mathematical Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Intro_Binomial_Tree.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Brownian.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Brownian Motion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Ito.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Ito Processes and Itoâ€™s Formula</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_GBM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Geometric Brownian Motion</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Part III: Arbitrage Pricing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Arbitrage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Foundations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Deltas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Delta Hedges, Replication, and PDEs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_DigitalsMeasures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Digitals and Measures</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Part IV: Black-Scholes and Extensions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_BlackScholes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Black-Scholes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Americans.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">American Options</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_FX.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">FX and Quantos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Merton.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Merton, Black, and Margrabe</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Asians.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Asians, Baskets, and Spreads</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Exotics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Other Exotics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Part V: Alternative Models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_GARCH.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">GARCH Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_StochasticVol.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Stochastic Volatility</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Jumps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Jumps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_VarianceSwaps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Variance Swaps</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Part VI: Numerical Methods</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_MonteCarlo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Monte Carlo Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Binomial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Binomial and Trinomial Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_PDEs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">PDE Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Fourier.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Fourier Transforms</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_MachineLearning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Machine Learning</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Part VII: Fixed Income</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_FixedIncome.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Fixed-Income Concepts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_FixedIncomeDerivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Fixed-Income Derivatives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Vasicek.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Vasicek and Extensions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Survey.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Term Structure Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendix</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AppendixA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Miscellaneous Facts about Continuous-Time Models</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Chapter_FixedIncome.html">Part VII: Fixed Income</a></li><li class="breadcrumb-item"><a href="./Chapter_FixedIncome.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Fixed-Income Concepts</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-c:fixedincomeconcepts" class="quarto-section-identifier"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Fixed-Income Concepts</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="c5f69a1b" class="cell" data-execution_count="1">
<div class="cell-output cell-output-display">
<script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_SVG"></script>
</div>
</div>
<p>In this part of the book, we will study the pricing and hedging of fixed-income derivatives, that is, derivatives that can be viewed as written on bonds or on interest rates. The complexities of this subject stem from the fact that the underlying bonds or rates will have time-varying and generally random volatilities and have volatilities that must be linked in some way to each other. We are not free to arbitrarily specify the volatilities and correlations, as we can, for example, with basket equity options, because such a specification may imply there is an arbitrage opportunity available from trading the underlying assets, and, of course, one could not trust a derivative value or a hedging strategy derived from such a model. There are many books that provide a more comprehensive and advanced treatment than we will be able to give here, among which Rebonato <span class="citation" data-cites="Rebonato98">(<a href="#ref-Rebonato98" role="doc-biblioref">Rebonato 1998, Rebonato02</a>)</span>, James and Webber <span class="citation" data-cites="JW">(<a href="#ref-JW" role="doc-biblioref">James and Webber 200AD</a>)</span> and Brigo and Mercurio <span class="citation" data-cites="BM">(<a href="#ref-BM" role="doc-biblioref">Brigo and Mercurio 2001</a>)</span> seem particularly useful.</p>
<p>We will focus on derivatives and underlyings that have very little default risk and ignore the pricing of default (credit) risk. Credit risk and credit derivatives are booming areas in both theory and practice. For this topic, one can consult the recent books of Bielecki and Rutkowski <span class="citation" data-cites="BR">(<a href="#ref-BR" role="doc-biblioref">Bielecki and Rutkowski 2002</a>)</span>, Duffie and Singleton <span class="citation" data-cites="DS">(<a href="#ref-DS" role="doc-biblioref">Duffie and Singleton 2003</a>)</span>, Sch{"o}nbucher <span class="citation" data-cites="Schonbucher">(<a href="#ref-Schonbucher" role="doc-biblioref">SchÃ¶nbucher 2003</a>)</span>, and Tavakoli <span class="citation" data-cites="Tavakoli">(<a href="#ref-Tavakoli" role="doc-biblioref">Tavakoli 2001</a>)</span>. Another important topic that will not be covered is mortgages.</p>
<p>In the first section, we introduce a fundamental construct: the yield curve, by which we mean the yields of (possibly theoretical) zero-coupon bonds of various maturities. The last two sections of the chapter (on principal components) are optionalâ€”nothing else in the book builds upon them.</p>
<section id="sec-s:yieldcurve" class="level2" data-number="25.1">
<h2 data-number="25.1" class="anchored" data-anchor-id="sec-s:yieldcurve"><span class="header-section-number">25.1</span> The Yield Curve</h2>
<p>Given prices of discount (zero-coupon) bonds of all maturities, any coupon paying bond can be priced as a portfolio of discount bonds. The relationship between time to maturity and the price of the corresponding discount bond with $1 face value is sometimes called the discount function. An equivalent concept is the yield curve, which is the relationship between time to maturity and the yield of the corresponding discount bond. Yields can be quoted according to different compounding conventions (semi-annual being the most common), but we will continue to use continuous compounding.^[The relationship between the annually compounded rate <span class="math inline">\(y_a\)</span>, the semi-annually compounded rate <span class="math inline">\(y_s\)</span> and the continuously compounded rate <span class="math inline">\(y_c\)</span> is <span class="math inline">\(\mathrm{e}^{y_c} = 1+y_a = (1+y_s/2)^2\)</span>.} With this convention, the yield of a zero-coupon bond with $1 face value having <span class="math inline">\(\tau\)</span> years to maturity and price <span class="math inline">\(P\)</span> is defined to be the rate <span class="math inline">\(y\)</span> such that <span class="math inline">\(P = \mathrm{e}^{-y\tau}\)</span>. Denoting this yield <span class="math inline">\(y\)</span> at maturity <span class="math inline">\(\tau\)</span> by <span class="math inline">\(y(\tau)\)</span>, the yield curve is the collection of yields <span class="math inline">\(\{y(\tau)| \tau&gt;0\}\)</span>, conventionally plotted with maturity <span class="math inline">\(\tau\)</span> on the horizontal axis and the yields <span class="math inline">\(y(\tau)\)</span> on the vertical. Usually (but certainly not always) this is an upward sloping curve, meaning that rates at longer maturities are higher than rates at shorter maturities.</p>
<p>Some amount of estimation is necessary to compute the yield curve. We would like to know yields at arbitrary maturities, but there are not enough actively traded zero-coupon bonds to provide this information. Thus, we have to fill in the missing maturities. We may also use coupon-paying bonds (or swap rates, as we will discuss later) to estimate the yields.</p>
<p>The most popular method of estimating the yield curve from bond prices is to fit a cubic spline, using the prices of a finite set of actively traded bonds. Given the set of bonds, let <span class="math inline">\(P_i\)</span> denote the price of bond <span class="math inline">\(i\)</span>, <span class="math inline">\(N_i\)</span> the number of dates at which bond <span class="math inline">\(i\)</span> pays a coupon or its face value, and <span class="math inline">\(\{\tau_{ij}| j=1, \ldots, N_i\}\)</span> the dates at which bond <span class="math inline">\(i\)</span> pays a coupon or its face value. Finally, let <span class="math inline">\(C_{ij}\)</span> denote the cash flow paid by bond <span class="math inline">\(i\)</span> at date <span class="math inline">\(\tau_{ij}\)</span> for <span class="math inline">\(j=1,\ldots,N_i\)</span>. Then for each <span class="math inline">\(i\)</span> it should be the case that <span id="eq-yieldcurve1"><span class="math display">\[
P_i = \sum_{j=1}^{N_i} \mathrm{e}^{-y(\tau_{ij})\tau_{ij}}C_{ij}\;.
\qquad(25.1)\]</span></span></p>
<p>This simply says that the price should be the present value of the cash flows.<br>
However, in practice, we will typically be unable to find yields <span class="math inline">\(y(\tau_{ij})\)</span> such that <a href="#eq-yieldcurve1" class="quarto-xref">Equation&nbsp;<span>25.1</span></a> holds exactly for each bond <span class="math inline">\(i\)</span>. This is due to measurement errors in the form of bid-ask spreads and nonsynchronous pricing. Furthermore, even if we can find such yields, we still face the issue of estimating the yields at other maturities <span class="math inline">\(\tau \notin \{\tau_{ij}\}\)</span>. The cubic spline is one way to address these issues.</p>
<p>A cubic spline consists of several cubic polynomials spliced together at a set of knot points. Specifically, it consists of maturities <span class="math inline">\(\tau_1,\ldots, \tau_n\)</span> (the knot points) and coefficients <span class="math inline">\((a_i, b_i, c_i, d_i)\)</span> for <span class="math inline">\(i= 0,\ldots,n\)</span>, and the yield curve is modeled as <span class="math display">\[y(\tau) = \begin{cases} a_0 \tau^3 + b_0 \tau^2 + c_0 \tau + d_0 &amp; \text{for $0 &lt; \tau \leq \tau_1\;,$}\\
a_1 \tau^3 + b_1 \tau^2 + c_1 \tau + d_1 &amp; \text{for $\tau_1 &lt; \tau \leq \tau_2\;,$}\\
\cdots &amp; \cdots \\
a_{n} \tau^3 + b_{n} \tau^2 + c_{n} \tau + d_{n} &amp; \text{for $\tau_n &lt; \tau \leq T$,}\end{cases}
\]</span> where <span class="math inline">\(T\)</span> is the maximum maturity considered. By changing the constants <span class="math inline">\(d_1,\ldots,d_n\)</span>, we can write this in an equivalent and more convenient form: <span id="eq-cubicspline00"><span class="math display">\[
y(\tau) = \begin{cases} a_0 \tau^3 + b_0 \tau^2 + c_0 \tau + d_0 &amp; \text{for $0 &lt; \tau \leq \tau_1\;,$}\\
a_1 (\tau-\tau_1)^3 + b_1 (\tau-\tau_1)^2 + c_1 (\tau-\tau_1)+ d_1 &amp; \text{for $\tau_1 &lt; \tau \leq \tau_2\;,$}\\
\cdots &amp; \cdots \\
a_{n} (\tau-\tau_n)^3 + b_{n} (\tau-\tau_n)^2 + c_{n} (\tau-\tau_n) + d_{n} &amp; \text{for $\tau_n &lt; \tau \leq T\;.$}\end{cases}
\qquad(25.2)\]</span></span></p>
<p>To splice these polynomials together at the knot points means to choose the coefficients so that the two polynomials that meet at a knot point have the same value and the same first and second derivatives at the knot point. For example, at the first knot point <span class="math inline">\(\tau_1\)</span>, we want the adjacent polynomials to satisfy <span class="math display">\[
\begin{array}{llrcl}
\text{Equality of yields:} &amp;\quad &amp;a_0 \tau_1^3 + b_0 \tau_1^2 + c_0 \tau_1 + d_0 &amp;= &amp;d_1\; ,\\
\text{Equality of first derivatives:} &amp; \quad &amp;3a_0 \tau_1^2 + 2b_0 \tau_1 + c_0  &amp;= &amp;c_1\; ,\\
\text{Equality of second derivatives:} &amp; \quad &amp;6a_0 \tau_1 + 2b_0  &amp;= &amp;2b_1\;.
\end{array}\]</span> Thus, given the coefficients <span class="math inline">\(a_0, b_0, c_0, d_0\)</span>, the only free coefficient for the second polynomial is <span class="math inline">\(a_1\)</span>. Likewise, at the second knot point <span class="math inline">\(\tau_2\)</span>, we want the adjacent polynomials to agree with regard to: <span class="math display">\[
\begin{array}{llrcl}
\text{Yields:} &amp;\quad &amp;a_1 (\tau_2-\tau_1)^3 + b_1(\tau_2- \tau_1)^2 + c_1 (\tau_2-\tau_1) + d_1 &amp;= &amp;d_2\; ,\\
\text{First derivatives:} &amp; \quad &amp;3a_1 (\tau_2-\tau_1)^2 + 2b_1(\tau_2- \tau_1) + c_1  &amp;= &amp;c_2\; ,\\
\text{Second derivatives:} &amp; \quad &amp;6a_1 (\tau_2-\tau_1) + 2b_1  &amp;= &amp;2b_2\;.
\end{array}\]</span> Thus, the only free coefficient for the third polynomial is <span class="math inline">\(a_2\)</span>. Continuing in this way, we see that the cubic spline is defined by the knot points and the coefficients <span class="math inline">\(a_0\)</span>, <span class="math inline">\(b_0\)</span>, <span class="math inline">\(c_0\)</span>, <span class="math inline">\(d_0\)</span>, <span class="math inline">\(a_1\)</span>, <span class="math inline">\(a_2\)</span>, , <span class="math inline">\(a_n\)</span>. One wants to choose the knot points (hopefully, not too many) and these coefficients so that the relations <a href="#eq-yieldcurve1" class="quarto-xref">Equation&nbsp;<span>25.1</span></a> hold as closely as possible in some sense. For more on this subject, a good reference is James and Webber <span class="citation" data-cites="JW">(<a href="#ref-JW" role="doc-biblioref">James and Webber 200AD</a>)</span>.</p>
</section>
<section id="libor" class="level2" data-number="25.2">
<h2 data-number="25.2" class="anchored" data-anchor-id="libor"><span class="header-section-number">25.2</span> LIBOR</h2>
<p>Many fixed-income instruments have cash flows tied to interest rate indices that are quoted as simple (i.e., noncompounded) interest rates. If you deposit $1 at an annualized simple interest rate of <span class="math inline">\(\mathcal{R}\)</span> for a period of time <span class="math inline">\(\Delta t\)</span>, then at the end of the period you will have <span class="math inline">\(1+\mathcal{R}\,\Delta t\)</span> dollars.^[The calligraphic symbol <span class="math inline">\(\mathcal{R}\)</span> will be used only for simple interest rates and hopefully will not be confused with the symbol <span class="math inline">\(R\)</span> used for the accumulation factor <span class="math inline">\(R_t=\mathrm{e}^{\int_0^t r_s\,ds}\)</span> and the corresponding risk-neutral expectation <span class="math inline">\(\\E^R\)</span>.} The most common interest rate index is LIBOR (London Inter-Bank Offered Rate) which is an average rate offered by large London banks on large deposits for a specific term. For example, if <span class="math inline">\(\mathcal{R}\)</span> denotes six-month LIBOR, a $1 million deposit at this rate will grow in six months to $1 million times <span class="math inline">\(1+\mathcal{R}\,\Delta t\)</span>, where <span class="math inline">\(\Delta t=1/2\)</span>. We will use LIBOR as a generic term for such indices.</p>
<p>We will frequently find it convenient to express LIBOR rates in terms of equivalent bond prices. As before, let <span class="math inline">\(P(t,u)\)</span> denote the price at date <span class="math inline">\(t\)</span> of a zero-coupon bond with a face value of $1 maturing at date <span class="math inline">\(u\)</span>, having <span class="math inline">\(\Delta t = u-t\)</span> years to maturity. Previously, we used this notation only for default-free bonds such as Treasuries. However, there is a small amount of credit risk in LIBOR rates because of the possibility of a bank failure. In discussing derivatives linked to LIBOR rates, such as swaps, caps, and floors, we will use the notation <span class="math inline">\(P(t,u)\)</span> for the price of a bond having the same default risk as a LIBOR deposit, but our models will ignore the possibility of default. An investment of $1 at date <span class="math inline">\(t\)</span> in the bond will purchase <span class="math inline">\(1/P(t,u)\)</span> units of the bond, which, in the absence of default, will be worth <span class="math inline">\(1/P(t,u)\)</span> dollars at maturity. We will assume <span id="eq-spot1"><span class="math display">\[
\frac{1}{P(t,u)} = 1+\mathcal{R}\,\Delta t\;.
\qquad(25.3)\]</span></span></p>
<p>When necessary for clarity, we call the rate <span class="math inline">\(\mathcal{R}\)</span> a spot rate (at date <span class="math inline">\(t\)</span> for the time period <span class="math inline">\(\Delta t\)</span>), to distinguish it from forward rates to be defined later. The spot rate is also called a floating rate, because it changes with market conditions.</p>
</section>
<section id="sec-s:swaps" class="level2" data-number="25.3">
<h2 data-number="25.3" class="anchored" data-anchor-id="sec-s:swaps"><span class="header-section-number">25.3</span> Swaps</h2>
<p>A plain vanilla interest rate swap involves the swap of a fixed interest rate for a floating interest rate on a given notional principal. Let <span class="math inline">\(\bar{\mathcal{R}}\)</span> denote the fixed rate on a swap. The floating rate will be LIBOR (or some other interest rate index). In addition to <span class="math inline">\(\bar{\mathcal{R}}\)</span> and the floating rate index, the swap is defined by payment dates, which we will denote by <span class="math inline">\(t_1,\dots,t_N\)</span>, with <span class="math inline">\(t_{i+1}-t_i=\Delta t\)</span>. In the most common form, the reset dates are <span class="math inline">\(t_0,\ldots,t_{N-1}\)</span>, with <span class="math inline">\(t_1-t_0=\Delta t\)</span> also.</p>
<p>At each reset date <span class="math inline">\(t_i\)</span>, the simple interest rate <span class="math inline">\(\mathcal{R}_i\)</span> for period <span class="math inline">\(\Delta t\)</span> is observed. This rate determines a payment at the following date <span class="math inline">\(t_{i+1}\)</span>. In terms of bond prices, <span class="math inline">\(\mathcal{R}_i\)</span> is defined in accord with <a href="#eq-spot1" class="quarto-xref">Equation&nbsp;<span>25.3</span></a>, substituting date <span class="math inline">\(t_i\)</span> for date <span class="math inline">\(t\)</span> and date <span class="math inline">\(t_{i+1}\)</span> for date <span class="math inline">\(u\)</span>; i.e., <span id="eq-spot2"><span class="math display">\[
\frac{1}{P(t_i,t_{i+1})} = 1+\mathcal{R}_i\,\Delta t\;.
\qquad(25.4)\]</span></span></p>
<p>One can enter a swap as the fixed-rate payer, normally called simply the payer or as the fixed-rate receiver, normally called the receiver. The payer pays the fixed rate <span class="math inline">\(\bar{\mathcal{R}}\)</span> and receives the spot rate <span class="math inline">\(\mathcal{R}_i\)</span> at each payment date <span class="math inline">\(t_{i+1}\)</span>. Only the net payment is exchanged. If <span class="math inline">\(\bar{\mathcal{R}} &gt; \mathcal{R}_i\)</span> then the amount <span class="math inline">\((\bar{\mathcal{R}}-\mathcal{R}_i)\,\Delta t\)</span> is paid at date <span class="math inline">\(t_{i+1}\)</span> by the payer to the receiver for each $1 of notional principal. If <span class="math inline">\(\bar{\mathcal{R}} &lt;  \mathcal{R}_i\)</span>, then the payer receives <span class="math inline">\((\mathcal{R}_i - \bar{\mathcal{R}})\,\Delta t\)</span> from the receiver for each $1 of notional principal at date <span class="math inline">\(t_{i+1}\)</span>. To state this more simply, the cash flow to the payer is <span class="math inline">\((\mathcal{R}_i - \bar{\mathcal{R}})\,\Delta t\)</span> and the cash flow to the receiver is <span class="math inline">\((\bar{\mathcal{R}}-\mathcal{R}_i)\,\Delta t\)</span>, with the usual understanding that a negative cash flow is an outflow. Note that there is no exchange of principal at initiation, and there is no return of principal at the end of the swap. The principal is notional because it is used only to define the interest payments.</p>
<p>The value of a swap to the fixed-rate payer at any date <span class="math inline">\(t \leq t_0\)</span> is <span id="eq-swapvalue100"><span class="math display">\[
P(t,t_0) - P(t,t_N) - \bar{\mathcal{R}}\,\Delta t\sum_{i=1}^N P(t,t_i)\;.
\qquad(25.5)\]</span></span></p>
<p>To see this, note that <span class="math inline">\(P(t,t_0)\)</span> is the cost at date <span class="math inline">\(t\)</span> of receiving $1 at <span class="math inline">\(t_0\)</span>. This $1 can be invested at <span class="math inline">\(t_0\)</span> at the rate <span class="math inline">\(\mathcal{R}_0\)</span> and the amount <span class="math inline">\(\mathcal{R}_0 \,\Delta t\)</span> withdrawn at <span class="math inline">\(t_1\)</span> with the $1 principal rolled over at the new rate <span class="math inline">\(\mathcal{R}_1\)</span>. Continuing in this way, one obtains the cash flow <span class="math inline">\(\mathcal{R}_i\,\Delta t\)</span> at each payment date <span class="math inline">\(t_{i+1}\)</span> and the recovery of the $1 principal at date <span class="math inline">\(t_N\)</span>. The value of the $1 principal at date <span class="math inline">\(t_N\)</span> is negated in expression <a href="#eq-swapvalue100" class="quarto-xref">Equation&nbsp;<span>25.5</span></a> by the term <span class="math inline">\(-P(t,t_N)\)</span>. Thus, <span class="math inline">\(P(t,t_0)-P(t,t_N)\)</span> is the value of the floating rate payments on the notional principal. On the other hand, <span class="math inline">\(\bar{\mathcal{R}}\,\Delta t\sum_{i=1}^N P(t,t_i)\)</span> is the value of the fixed-rate payments. Therefore, expression <a href="#eq-swapvalue100" class="quarto-xref">Equation&nbsp;<span>25.5</span></a> is the difference in the values of the floating and fixed-rate legs. </p>
<p>As with a forward price, the swap rate is usually set so that the value of the swap is zero at initiation. A swap initiated at date <span class="math inline">\(t \leq t_0\)</span> has zero value at initiation if the fixed rate <span class="math inline">\(\bar{\mathcal{R}}\)</span> equates the expression <a href="#eq-swapvalue100" class="quarto-xref">Equation&nbsp;<span>25.5</span></a> to zero. This means that <span class="math inline">\(\bar{\mathcal{R}}=\mathcal{R}_t\)</span>, where <span class="math inline">\(\mathcal{R}_t\)</span> is defined by <span id="eq-swaprate1"><span class="math display">\[
P(t,t_0) = P(t,t_N) + \mathcal{R}_t\,\Delta t\sum_{i=1}^N P(t,t_i)\;.
\qquad(25.6)\]</span></span></p>
<p>If <span class="math inline">\(t=t_0\)</span> the rate <span class="math inline">\(\mathcal{R}_t\)</span> is a spot swap rate, and if <span class="math inline">\(t&lt;t_0\)</span> the rate <span class="math inline">\(\mathcal{R}_t\)</span> is a forward swap rate. The concept of forward swap rates will be important in the discussion of swaptions in <a href="Chapter_FixedIncomeDerivatives.html#sec-s:swaptions" class="quarto-xref"><span>Section 26.6</span></a>. Of course, there are many spot and forward swap rates at any date, corresponding to swaps with different maturities and different payment (and reset) dates.</p>
<p>The swap yield curve or simply swap curve is the relation between time-to-maturity and the yields of discount bonds, where the discount bond prices and yields are inferred from market swap rates. To explain this in a manner consistent with <a href="#sec-s:yieldcurve" class="quarto-xref"><span>Section 25.1</span></a>, consider date <span class="math inline">\(t=0\)</span> and consider swaps with <span class="math inline">\(t_0=0\)</span> (i.e., spot swaps). In the notation of <a href="#sec-s:yieldcurve" class="quarto-xref"><span>Section 25.1</span></a>, and noting that <span class="math inline">\(P(0,0)=1\)</span>, <a href="#eq-swaprate1" class="quarto-xref">Equation&nbsp;<span>25.6</span></a> can be written in terms of yields as <span id="eq-swaprate1b"><span class="math display">\[
1 = \mathrm{e}^{-y(t_N)t_N}  + \sum_{i=1}^N \mathrm{e}^{-y_{t_i}t_i}\mathcal{R}_0\,\Delta t\; .
\qquad(25.7)\]</span></span></p>
<p>Consider for example a collection of nineteen swaps at date <span class="math inline">\(0\)</span> with semi-annual payments and maturity dates <span class="math inline">\(t_N=1.0\)</span>, <span class="math inline">\(t_N=1.5\)</span>, , <span class="math inline">\(t_N=10.0\)</span>. Each market swap rate (a different rate <span class="math inline">\(\mathcal{R}_0\)</span> for each maturity) can be considered to satisfy <a href="#eq-swaprate1b" class="quarto-xref">Equation&nbsp;<span>25.7</span></a>. In these equations we have the twenty yields <span class="math inline">\(y(0.5)\)</span>, <span class="math inline">\(y(1.0)\)</span>, <span class="math inline">\(y(10.0)\)</span>. The yield <span class="math inline">\(y(0.5)\)</span> will be given by six-month LIBOR according to <a href="#eq-spot1" class="quarto-xref">Equation&nbsp;<span>25.3</span></a>. The other nineteen yields can be obtained by simultaneously solving the system of nineteen equations of the form <a href="#eq-swaprate1b" class="quarto-xref">Equation&nbsp;<span>25.7</span></a>, given the nineteen market swap rates. In practice, there are missing maturities and the swap curve is estimated using a cubic spline or some other technique, as discussed in <a href="#sec-s:yieldcurve" class="quarto-xref"><span>Section 25.1</span></a>.</p>
</section>
<section id="sec-s:duration" class="level2" data-number="25.4">
<h2 data-number="25.4" class="anchored" data-anchor-id="sec-s:duration"><span class="header-section-number">25.4</span> Yield to Maturity, Duration, and Convexity</h2>
<p>Consider a bond with cash flows <span class="math inline">\(C_1, \ldots, C_N\)</span> at dates <span class="math inline">\(u_1 &lt; \cdots &lt; u_N\)</span> and price <span class="math inline">\(P\)</span> at date <span class="math inline">\(t\)</span>, where <span class="math inline">\(t&lt; u_1\)</span>. Write <span class="math inline">\(\tau_j = u_j-t\)</span> as the time remaining until the <span class="math inline">\(j\)</span>â€“th cash flow is paid. The (continuously compounded) yield to maturity of the bond at date <span class="math inline">\(t\)</span> is defined to be the rate <span class="math inline">\(\mathbf{y}\)</span> such that <span id="eq-yieldtomaturity"><span class="math display">\[
P = \sum_{j=1}^N \mathrm{e}^{-\mathbf{y}\tau_j}C_j\;.
\qquad(25.8)\]</span></span></p>
<p>The bold character <span class="math inline">\(\mathbf{y}\)</span> is meant to distinguish this from the yield <span class="math inline">\(y\)</span> of a discount bond. Viewing the right-hand side of <a href="#eq-yieldtomaturity" class="quarto-xref">Equation&nbsp;<span>25.8</span></a> as a function of <span class="math inline">\(\mathbf{y}\)</span>, we can express the first derivative in differential form as <span class="math display">\[\,\mathrm{d}P = -\sum_{j=1}^N \tau_j\mathrm{e}^{-\mathbf{y}\tau_j}C_j\,\mathrm{d}\mathbf{y}\; ,\]</span> or, equivalently, <span class="math display">\[\frac{\,\mathrm{d}P}{P} = -\sum_{j=1}^N \frac{\mathrm{e}^{-\mathbf{y}\tau_j}C_j}{P}\tau_j\,\mathrm{d}\mathbf{y}\; .\]</span> The factor <span class="math display">\[\sum_{j=1}^N \frac{\mathrm{e}^{-\mathbf{y}\tau_j}C_j}{P}\tau_j\]</span> is called the Macaulay duration of the bond, and we will simplify this to duration. It is a weighted average of the times to maturity <span class="math inline">\(\tau_j\)</span> of the cash flows, the weight on each time <span class="math inline">\(\tau_j\)</span> being the fraction of the bond value that the cash flow constitutes (using the same rate <span class="math inline">\(\mathbf{y}\)</span> to discount all of the cash flows). Thus, we have <span id="eq-durationreturn"><span class="math display">\[
\frac{\,\mathrm{d}P}{P} = - \text{Duration} \times \,\mathrm{d}\mathbf{y}\;.
\qquad(25.9)\]</span></span></p>
<p>Given the initial yield <span class="math inline">\(\mathbf{y}\)</span> and a change in the yield to <span class="math inline">\(\mathbf{y}'\)</span>, this equation suggests the following approximation for the return <span class="math inline">\(\Delta P/P\)</span>: <span id="eq-durationreturn2"><span class="math display">\[
\frac{\Delta P}{P} \approx  -  \text{Duration}  \times \,\Delta \mathbf{y}\;,
\qquad(25.10)\]</span></span></p>
<p>where <span class="math inline">\(\Delta \mathbf{y} = \mathbf{y}'-\mathbf{y}\)</span>.</p>
<p>The relationship <a href="#eq-durationreturn2" class="quarto-xref">Equation&nbsp;<span>25.10</span></a> is the foundation for duration hedging. For example, to duration hedge a liability with a present value of <span class="math inline">\(x_L\)</span> dollars and a duration of <span class="math inline">\(D_L\)</span> years, one needs an asset with a value of <span class="math inline">\(x_A\)</span> dollars and a duration of <span class="math inline">\(D_A\)</span> satisfying <span class="math inline">\(x_AD_A = x_LD_L\)</span>. If the change in the yields to maturity of the asset and liability are the same number <span class="math inline">\(\Delta \mathbf{y}\)</span>, then by <a href="#eq-durationreturn2" class="quarto-xref">Equation&nbsp;<span>25.10</span></a> the change in the value of the liability will be approximately <span class="math inline">\(-D_L\,\Delta \mathbf{y}\)</span> per dollar of initial value, for a total change in value of <span class="math inline">\(-x_LD_L\,\Delta \mathbf{y}\)</span> dollars. The change in the value of the asset will approximately offset the change in the value of the liability.</p>
<p>Actually, because of the convexity of the bond price <a href="#eq-yieldtomaturity" class="quarto-xref">Equation&nbsp;<span>25.8</span></a> as a function of the yield <span class="math inline">\(\mathbf{y}\)</span>, the approximation <a href="#eq-durationreturn2" class="quarto-xref">Equation&nbsp;<span>25.10</span></a> will overstate the loss on an asset when the yield rises and understate the gain when the yield falls. Given a change in yield <span class="math inline">\(\Delta \mathbf{y}\)</span>, the change in price <span class="math inline">\(\Delta P = P'-P\)</span> would actually satisfy <span class="math display">\[\Delta P &gt; -  \text{Duration} \times P \times \Delta \mathbf{y}\; .\]</span> Thus, if a liability is duration hedged, and the asset value is a more convex function of its yield than is the liability value, then an equal change <span class="math inline">\(\Delta \mathbf{y}\)</span> in their yields will lead to a net gain, the asset value falling less than the liability if <span class="math inline">\(\Delta \mathbf{y} &gt;0\)</span> and gaining more than the liability if <span class="math inline">\(\Delta \mathbf{y}&lt;0\)</span>. The value of convexity (as a function of the yield to maturity) in a bond portfolio is the same as the value of convexity (as a function of the price of the underlying) in option hedgingâ€”cf.~<a href="Chapter_BlackScholes.html#sec-s:deltahedging" class="quarto-xref"><span>Section 10.5</span></a>.</p>
<p>In general, the changes in the yields of an asset and a liability (or two different coupon bonds) will not be equal. To understand how the changes will be related, note that <a href="#eq-yieldtomaturity" class="quarto-xref">Equation&nbsp;<span>25.8</span></a> of the yield to maturity and <a href="#eq-yieldcurve1" class="quarto-xref">Equation&nbsp;<span>25.1</span></a> relating a bond price to the yields of discount bonds imply <span class="math display">\[\sum_{j=1}^N \mathrm{e}^{-\mathbf{y}\tau_j}C_j =  \sum_{j=1}^{N} \mathrm{e}^{-y(\tau_{j})\tau_{j}}C_{j}\; .\]</span> Taking differentials of both sides, we have <span class="math display">\[\,\mathrm{d}P = -P \times \text{Duration} \times \,\mathrm{d}\mathbf{y} = -\sum_{j=1}^{N} \tau_j \mathrm{e}^{-y(\tau_{j})\tau_{j}}C_{j}\,\mathrm{d}y(\tau_j)\; .\]</span> If we suppose that the changes <span class="math inline">\(\,\mathrm{d}y(\tau_j)\)</span> in the yields of the discount bonds are equal, to, say, <span class="math inline">\(\,\mathrm{d}y\)</span>, then we have <span class="math display">\[\,\mathrm{d}P = -P \times \text{Duration} \times \,\mathrm{d}\mathbf{y} = -P \times \text{Duration}' \times \,\mathrm{d}y,\]</span> where we define <span id="eq-newduration100"><span class="math display">\[
\text{Duration}' = \sum_{j=1}^N \frac{\mathrm{e}^{-y(\tau_j)\tau_j}C_j}{P}\tau_j.
\qquad(25.11)\]</span></span></p>
<p>This new definition of duration differs from the previous by using the yields of discount bonds to define the fraction of the bond value that each cash flow contributes, rather than the yield to maturity. If the changes in the yields of discount bonds are equal, then we say that there has been a parallel shift in the yield curveâ€”it has moved up or down with the new curve being at each point the same distance from the old. Our previous discussion shows that duration hedging works if we use the new <a href="#eq-newduration100" class="quarto-xref">Equation&nbsp;<span>25.11</span></a> of duration and if the yield curve shifts in a parallel fashion. Of course, parallel shifts in the yield curve are not the only, or even most common, types of shifts. In the next two sections, we discuss hedging against more general types of shifts in the yield curve.</p>
<p>Something very similar to duration hedging works if we can continuously rebalance the hedge and there is only a single factor determining the yield curve (meaning a single Brownian motion driving all yields). To understand this, we must first note that the expressions given in this section for <span class="math inline">\(\,\mathrm{d}P\)</span> are not the Ito differential, which explains how the bond price evolves over time and would include a second-derivative term. For example, in <a href="#eq-durationreturn" class="quarto-xref">Equation&nbsp;<span>25.9</span></a> we are simply asking how different the price would be if the yield to maturity had been different at a given point in time. To define the Ito differential, let now <span class="math inline">\(\mathbf{y}_t\)</span> denote the yield to maturity of the bond at date <span class="math inline">\(t\)</span>. <a href="#eq-yieldtomaturity" class="quarto-xref">Equation&nbsp;<span>25.8</span></a> can be restated as <span id="eq-yieldtomaturityt"><span class="math display">\[
P_t = f(t,\mathbf{y}_t) = \sum_{j=1}^N \mathrm{e}^{\mathbf{y}_t(u_j-t)}C_j\;.
\qquad(25.12)\]</span></span></p>
<p>Note that even if the yield to maturity were constant over time, the bond price would change with <span class="math inline">\(t\)</span> as a result of the changes in the times to maturity <span class="math inline">\(u_j-t\)</span> of the cash flows. This creates the dependence on <span class="math inline">\(t\)</span> in the function <span class="math inline">\(f(t,\mathbf{y})\)</span>.</p>
<p>From Itoâ€™s formula, we have <span class="math display">\[\,\mathrm{d}P = \frac{\partial f}{\partial t} \,\mathrm{d}t + \frac{\partial f}{\partial \mathbf{y}} \,\mathrm{d}\mathbf{y} + \frac{1}{2} \frac{\partial ^2 f}{\partial \mathbf{y}^2} (\,\mathrm{d}\mathbf{y})^2\; .\]</span><br>
As explained above, the factor <span class="math inline">\(\partial f/\partial \mathbf{y}\)</span> equals $ - P$. The value of convexity appears here in the last term, the derivative <span class="math inline">\(\partial ^2 f/\partial \mathbf{y}^2\)</span> being positive as a result of convexity and analogous to the gamma of an option. Assuming <span class="math inline">\(\,\mathrm{d}\mathbf{y}_t = \alpha_t\,\mathrm{d}t+\sigma_t\,\mathrm{d}B_t\)</span> for a Brownian motion <span class="math inline">\(B\)</span> and some <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\sigma\)</span>, we have <span class="math display">\[\frac{\,\mathrm{d}P}{P} = \frac{1}{P}\left(\frac{\partial f}{\partial t}  + \frac{\partial f}{\partial \mathbf{y}}\alpha + \frac{1}{2} \frac{\partial ^2 f}{\partial \mathbf{y}^2} \sigma^2\right)\,\mathrm{d}t-  \text{Duration}\times\sigma \,\mathrm{d}B\; .\]</span> If the yields of an asset and liability are driven by the same Brownian motion and the duration hedge is adjusted for the relative volatilities of the asset and liability (holding more of the asset if its yield volatility is lower), then a duration hedge will hedge the risky part of the change in the liability value. If adjusted continuously, it will provide a perfect hedge, exactly analogous to a delta hedge of an option position. The Vasicek model we will discuss in <a href="Chapter_Vasicek.html" class="quarto-xref"><span>Chapter 27</span></a> and the Cox-Ingersoll-Ross model we will discuss in <a href="Chapter_Survey.html" class="quarto-xref"><span>Chapter 28</span></a> are examples of continuous-time models that assume a single Brownian motion driving all yields (i.e., they are single-factor models).The Ho-Lee, Black-Derman-Toy, and Black-Karasinski binomial models that will be discussed in <a href="Chapter_Survey.html" class="quarto-xref"><span>Chapter 28</span></a> are also single-factor models and have the same implication for hedging. In the following section, we will discuss the fact that, empirically, there appears to be more than one factor determining the yield curve.</p>
</section>
<section id="sec-s:principalcomponents" class="level2" data-number="25.5">
<h2 data-number="25.5" class="anchored" data-anchor-id="sec-s:principalcomponents"><span class="header-section-number">25.5</span> Principal Components</h2>
<p>This section will describe a popular statistical method for determining the factors that have the most impact on the yield curve. We consider yields at fixed maturities <span class="math inline">\(\tau_1, \ldots, \tau_N\)</span>, the yield for maturity <span class="math inline">\(\tau_j\)</span> at date <span class="math inline">\(t\)</span> being denoted <span class="math inline">\(y(t,\tau_j)\)</span>. We assume that we have a sample of past yields at dates <span class="math inline">\(t_0, \ldots, t_M\)</span> at equally spaced dates. Thus, <span class="math inline">\(t_i-t_{i-1} = \Delta t\)</span> for some <span class="math inline">\(\Delta t\)</span> and each <span class="math inline">\(i\)</span>. We compute the changes in yields: <span class="math display">\[\Delta_{ij} = y(t_i, \tau_j) - y(t_{i-1}, \tau_j)\; .\]</span> Thus we are looking at the changes in the yield curve over time periods of length <span class="math inline">\(\Delta t\)</span>, focusing on <span class="math inline">\(N\)</span> points on the yield curve defined by the maturities <span class="math inline">\(\tau_j\)</span>. Let <span class="math inline">\(V\)</span> denote the sample covariance matrix of the changes in yields: the element in row <span class="math inline">\(j\)</span> and column <span class="math inline">\(k\)</span> of <span class="math inline">\(V\)</span> is the sample covariance of the changes in yields at maturities <span class="math inline">\(\tau_j\)</span> and <span class="math inline">\(\tau_k\)</span>; thus, the diagonal elements are the sample variances.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> to estimate the covariance matrix. The following applies equally well to other estimates <span class="math inline">\(V\)</span> of the covariance matrix.</p>
<p>The method of principal components is to compute the eigenvectors and eigenvalues of the estimated covariance matrix <span class="math inline">\(V\)</span>. An eigenvector is a vector <span class="math inline">\(x\)</span> for which there corresponds a number <span class="math inline">\(\lambda\)</span> such that <span class="math inline">\(Vx = \lambda x\)</span>. The number <span class="math inline">\(\lambda\)</span> is called the eigenvalue corresponding to the eigenvector <span class="math inline">\(x\)</span>. Given the <span class="math inline">\(N \times N\)</span> symmetric matrix <span class="math inline">\(V\)</span>, we can construct an <span class="math inline">\(N\times N\)</span> matrix <span class="math inline">\(C\)</span> whose columns are eigenvectors of <span class="math inline">\(V\)</span> and an <span class="math inline">\(N \times N\)</span> diagonal matrix <span class="math inline">\(D\)</span> containing the eigenvalues of <span class="math inline">\(V\)</span> on the diagonal. The eigenvectors can be normalized to have unit length and to be mutually orthogonal, which means that the matrix <span class="math inline">\(C\)</span> of eigenvectors has the property that <span class="math inline">\(C^{-1} = C^\top\)</span>, where <span class="math inline">\(C^{-1}\)</span> denotes the inverse of <span class="math inline">\(C\)</span> and <span class="math inline">\(C^\top\)</span> its transpose. The property <span class="math inline">\(Vx = \lambda x\)</span> for the columns <span class="math inline">\(x\)</span> of <span class="math inline">\(C\)</span> implies that <span class="math inline">\(VC= CD\)</span>. Hence <span class="math inline">\(C^\top VC = C^\top CD = D\)</span>.</p>
<p>This can be understood as a factor model for the changes in yields, where there are as many factors as maturities. At date <span class="math inline">\(t_i\)</span>, the vector of factor realizations <span class="math inline">\(z_{ij}\)</span> is computed as <span id="eq-pc1"><span class="math display">\[
\begin{pmatrix} z_{i1} \\ \vdots \\ z_{iN} \end{pmatrix} = C^\top \begin{pmatrix} \Delta_{i1} \\ \vdots \\ \Delta_{iN} \end{pmatrix}\;.
\qquad(25.13)\]</span></span></p>
<p>Thus, <span id="eq-pc2"><span class="math display">\[
\begin{pmatrix} \Delta_{i1} \\ \vdots \\ \Delta_{iN} \end{pmatrix}  
= C \begin{pmatrix} z_{i1} \\ \vdots \\ z_{iN} \end{pmatrix}\;. \qquad(25.14)\]</span></span></p>
<p>Given any random vector <span class="math inline">\(\xi\)</span> with covariance matrix <span class="math inline">\(\Sigma\)</span> and a linear transformation <span class="math inline">\(\xi' = L \xi\)</span>, the covariance matrix of <span class="math inline">\(\xi'\)</span> is <span class="math inline">\(L\Sigma L^\top\)</span>. Therefore, <a href="#eq-pc1" class="quarto-xref">Equation&nbsp;<span>25.13</span></a> implies that the covariance matrix of the factors is <span class="math inline">\(C^\top VC\)</span>, and we observed in the previous paragraph that <span class="math inline">\(C^\top VC=D\)</span>. Therefore, the factors are uncorrelated, and the factor variances are the eigenvalues of <span class="math inline">\(V\)</span>.</p>
<p>Let <span class="math inline">\(\beta_{k\ell}\)</span> denote the <span class="math inline">\((k,\ell)\)</span>â€“th element of <span class="math inline">\(C\)</span>. Then we can write <a href="#eq-pc2" class="quarto-xref">Equation&nbsp;<span>25.14</span></a> as <span id="eq-pc3"><span class="math display">\[\begin{matrix} \Delta_{i1} \\ \vdots \\ \Delta_{iN} \end{matrix}
\;\begin{matrix}= \\ \vdots \\ = \end{matrix}\;
\begin{matrix} \beta_{11}z_{i1} + \cdots + \beta_{1N}z_{iN}, \\ \vdots \\ \beta_{N1}z_{i1} + \cdots + \beta_{NN}z_{iN} \;.\end{matrix} \qquad(25.15)\]</span></span></p>
<p>As in any factor model, the factors are common to all of the maturities. Each factor is random, taking a different value at each date <span class="math inline">\(t_i\)</span>. The <span class="math inline">\(\beta\)</span>â€™s represent the loadings of the yield changes on the factors, <span class="math inline">\(\beta_{k\ell}\)</span> being the loading of the change in the yield at maturity <span class="math inline">\(\tau_k\)</span> on the <span class="math inline">\(\ell\)</span>-th factor.</p>
<p>In a normal factor model, there are fewer factors than variables being explained. It serves no point to have a factor model with as many factors as there are variables to be explained (in our case, as many factors as maturities). We can improve the usefulness of the above by omitting some factors. We will omit the factors that are least important in explaining the changes in yields. For example, if we omit all but the first three factors, we will have <span id="eq-pc32"><span class="math display">\[\begin{matrix} \Delta_{i1} \\ \vdots \\ \Delta_{iN} \end{matrix}
\;\begin{matrix}= \\ \vdots \\ = \end{matrix}\;
\begin{matrix} \beta_{11}z_{i1} + \beta_{12}z_{i2}+ \beta_{13}z_{i3} +\varepsilon_{i1}, \\ \vdots \\ \beta_{N1}z_{i1} + \beta_{N2}z_{i2}+ \beta_{N3}z_{i3} +\varepsilon_{iN}\; ,\end{matrix} \qquad(25.16)\]</span></span></p>
<p>where <span id="eq-principalcomponentsresiduals"><span class="math display">\[
\varepsilon_{ij} = \beta_{j4}z_{i4} + \cdots + \beta_{jN}z_{iN}
\qquad(25.17)\]</span></span></p>
<p>is interpreted as the residual part^[Frequently, the definition of factor model requires the residuals to be uncorrelated, in which case they are called idiosyncratic risks. of <span class="math inline">\(\Delta_{ij}\)</span>.</p>
<p>The importance of a factor depends on the factor loadings and the variance of the factor. The loadings on the <span class="math inline">\(j\)</span>â€“th factor are the elements in the <span class="math inline">\(j\)</span>â€“th column of <span class="math inline">\(C\)</span>, which is the <span class="math inline">\(j\)</span>â€“th eigenvector of <span class="math inline">\(V\)</span>. Because the eigenvectors all have unit length and are mutually orthogonal, each vector of loadings has the same importance as any other for explaining the changes in yields. Thus, the importance of a factor in this model depends on the variance of the factor. The variance of the <span class="math inline">\(j\)</span>â€“th factor is the <span class="math inline">\(j\)</span>â€“th element on the diagonal of <span class="math inline">\(D\)</span>, which is the eigenvalue corresponding to the <span class="math inline">\(j\)</span>â€“th eigenvector. The factors that we should omit are clearly those with small eigenvalues.</p>
<p>As an example, an analysis of monthly changes in (continuously compounded) U.S. Treasury yields from 1992 through 2002 at maturities of 1 month, 3 months, 1 year, 2 years, 3 years, 4 years, and 5 years<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> produces seven eigenvalues (corresponding to the seven maturities) that sum to <span class="math inline">\(5.526 \times 10^{-5}\)</span>. This sum is the total variance of the seven factors. The largest eigenvalue is 74% of the total, the two largest eigenvalues constitute 94% of the total, and the three largest constitute 98% of the total. Thus, three factors contribute 98% of the total factor variance for this data set, so a factor model with three (or even two) factors explains a very high percentage of the changes in yields for this data set.</p>
The factors can be interpreted by examining the corresponding eigenvectors. The eigenvectors corresponding to the three largest eigenvalues in this data set are the columns below (the first column corresponding to the largest eigenvalue, etc.):
<p>We can interpret these as follows. A positive value in a given month for the factor with the highest variance will lead to an increase in all of the yields, because all of the elements in the first column are positive (it will also lead to a slight increase in the slope due to the loadings at longer maturities being generally slightly larger than the loadings at smaller maturities). A positive value for the next factor will decrease yields at short maturities and increase the yields at longer maturities, thus leading to an increase in the slope of the yield curve. A positive value for the third factor will lead to an increase in yields at short and long maturities and a decrease in yields at intermediate maturities, thus affecting the curvature of the yield curve. Results of this sort are common for data sets containing longer maturities also, leading to the conclusion that the most important factor is the level of the yield curve, the second most important factor is the slope of the yield curve, and the third most important factor is the curvature of the yield curve, with three factors explaining nearly all of the variations in yields.</p>
</section>
<section id="sec-s:hedgingprincipalcomponents" class="level2" data-number="25.6">
<h2 data-number="25.6" class="anchored" data-anchor-id="sec-s:hedgingprincipalcomponents"><span class="header-section-number">25.6</span> Hedging Principal Components</h2>
<p>Consider again a bond with cash flows <span class="math inline">\(C_1, \ldots, C_N\)</span> at dates <span class="math inline">\(\tau_1 &lt; \cdots &lt; \tau_N\)</span> and price <span class="math inline">\(P\)</span> and recall that the price at date <span class="math inline">\(0 &lt; \tau_1\)</span> should be <span class="math display">\[P = \sum_{j=1}^{N} \mathrm{e}^{-y_j\tau_{j}}C_{j}\; ,\]</span> where for convenience we are writing <span class="math inline">\(y_j\)</span> for the yield <span class="math inline">\(y(0,\tau_j)\)</span> of the discount bond maturing at <span class="math inline">\(\tau_j\)</span>. Viewing the price as a function of <span class="math inline">\(y_1, \ldots, y_N\)</span>, we can write the differential as <span class="math display">\[\,\mathrm{d}P = -\sum_{j=1}^{N} \tau_j\mathrm{e}^{-y_j\tau_{j}}C_{j}\,\mathrm{d}y_j\; .\]</span> Equivalently, <span class="math display">\[\frac{\,\mathrm{d}P}{P} = -\sum_{j=1}^{N} \frac{\mathrm{e}^{-y_j\tau_{j}}C_{j}\tau_j}{P}\,\mathrm{d}y_j\; .\]</span> Given discrete changes <span class="math inline">\(\Delta y_j\)</span> in the yields, this implies the following approximation for the return: <span id="eq-durationreturn11"><span class="math display">\[
\frac{\Delta P}{P} \approx -\sum_{j=1}^{N} \frac{\mathrm{e}^{-y_j\tau_{j}}C_{j}\tau_j}{P}\, \Delta y_j\;.
\qquad(25.18)\]</span></span></p>
<p>As in <a href="#sec-s:duration" class="quarto-xref"><span>Section 25.4</span></a>, because of convexity, the approximation understates the new price <span class="math inline">\(P' = P + \Delta P\)</span>. In <a href="#sec-s:duration" class="quarto-xref"><span>Section 25.4</span></a> we considered this equation assuming equal changes in the yields (a parallel shift in the yield curve). Here, we will discuss the more general case.</p>
<p>The approximation <a href="#eq-durationreturn11" class="quarto-xref">Equation&nbsp;<span>25.18</span></a> suggests how we can hedge against the factors identified in the previous section. For example, let <span class="math inline">\(\beta_{1\ell}, \ldots, \beta_{N\ell}\)</span> denote the loadings of the yields at maturities <span class="math inline">\(\tau_1, \ldots, \tau_N\)</span> on the factor with the <span class="math inline">\(\ell\)</span>â€“th greatest variance, for <span class="math inline">\(\ell=1, 2, 3\)</span>.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> Then the factor model suggests <span class="math display">\[\Delta y_j \approx \beta_{j1} z_1 + \beta_{j2} z_2 + \beta_{j3} z_3\; ,\]</span> where the <span class="math inline">\(z_k\)</span> denote the realizations of the factors. Combining this with <a href="#eq-durationreturn11" class="quarto-xref">Equation&nbsp;<span>25.18</span></a> results in <span class="math display">\[\begin{align*}
\frac{\Delta P}{P} &amp;\approx -\sum_{j=1}^{N} \left(\frac{\mathrm{e}^{-y_j\tau_{j}}C_{j}\tau_j}{P}\sum_{k=1}^3 \beta_{jk}z_k \right)\\
&amp;= -\sum_{k=1}^3 \left(\sum_{j=1}^{N} \frac{\mathrm{e}^{-y_j\tau_{j}}C_{j}\tau_j\beta_{jk}}{P}\right)z_k.
\end{align*}\]</span> This means that the bond return is approximately a linear combination of the factors, with the coefficient (loading) on the <span class="math inline">\(k\)</span>â€“th factor being <span id="eq-modifiedduration3"><span class="math display">\[
-\sum_{j=1}^{N} \frac{\mathrm{e}^{-y_j\tau_{j}}C_{j}\tau_j\beta_{jk}}{P}\;.
\qquad(25.19)\]</span></span></p>
<p>To hedge a liability against the factor, we want this coefficient for the asset multiplied by the dollar value of the asset to equal the corresponding coefficient for the liability multiplied by its dollar value. There are three conditions of this type in a three-factor model, which means that a portfolio of three distinct assets is necessary to hedge a liability. A similar application is in bond portfolio management. If we want to avoid exposing ourselves to factor risk relative to a benchmark portfolio, then we should match the loadings <a href="#eq-modifiedduration3" class="quarto-xref">Equation&nbsp;<span>25.19</span></a> for our portfolio with the corresponding loadings of the benchmark.</p>
</section>
<section id="section" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="section"></h2>
<p>Assume the following discount bond prices for each of the following exercises: <span class="math display">\[\begin{align*}
P(0,0.5) &amp; = 0.995\\
P(0,1.0) &amp; = 0.988\\
P(0,1.5) &amp; = 0.978\\
P(0,2.0) &amp; = 0.966\\
P(0,2.5) &amp; = 0.951\\
P(0,3.0) &amp; = 0.935\\
P(0,3.5) &amp; = 0.916\\
P(0,4.0) &amp; = 0.896\\
P(0,4.5) &amp; = 0.874\\
P(0,5.0) &amp; = 0.850
\end{align*}\]</span></p>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Compute the six-month and one-year LIBOR rates.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Compute the swap rate for a two-year swap with semi-annual payments.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Compute the forward swap rate for a two-year swap with semi-annual payments beginning in</p>
<ol type="1">
<li>one year,</li>
<li>two years,</li>
<li>three years.</li>
</ol>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Compute and plot the continuously-compounded discount-bond yields at maturities 0.5, 1.0, 1.5, , 5.0.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Consider a cubic spline as defined in <a href="#eq-cubicspline00" class="quarto-xref">Equation&nbsp;<span>25.2</span></a> with knot points at two and four years and the following coefficients: <span class="math display">\[\begin{align*}
a_0 &amp; =  -0.00163  \\
b_0 &amp; =   0.00812\\
c_0 &amp; =   -0.00676 \\
d_0 &amp; =    0.01184\\
a_1 &amp; =    0.00052\\
b_1 &amp; =    -0.00169\\
c_1 &amp; =    0.00609\\
d_1 &amp; =    0.01770\\
a_2 &amp; =    -0.00175\\
b_2 &amp; =    0.00141\\
c_2 &amp; =    0.00552\\
d_2 &amp; =    0.02725
\end{align*}\]</span></p>
<ol type="1">
<li>Plot the cubic spline and compare it to the plot from the previous exercise.</li>
<li>Confirm that the adjacent polynomials have the same values, first derivatives, and second derivatives at each of the two knot points.</li>
</ol>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Create a Python function <code>DiscountBondPrice</code> that takes the time <span class="math inline">\(\tau\)</span> to maturity as an input and returns an estimated price for a discount bond maturing at <span class="math inline">\(\tau\)</span>, using the cubic spline <a href="#eq-cubicspline00" class="quarto-xref">Equation&nbsp;<span>25.2</span></a>, knot points at 2 and 4 years, and the coefficients in the previous exercise. Confirm that it gives approximately the same discount bond prices as those at the beginning of this set of exercises. <em>A Warning about Extrapolating to Longer Maturities</em>: What price does the function give for a discount bond maturing in ten years?</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Consider a two-year coupon bond with $1 face value and a semi-annual coupon of $0.03, with the first coupon being six months away.</p>
<ol type="1">
<li>Compute the price of the bond.</li>
<li>Compute the yield to maturity of the bond.<br>
</li>
<li>Compute the duration of the bond.</li>
</ol>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Repeat the previous exercise for a one-year coupon bond with $1 face value and a semi-annual coupon of $0.04.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Repeat the previous exercise for a five-year coupon bond with $1 face value and a semi-annual coupon of $0.02.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Suppose you have shorted $100 million of the two-year bond with the semi-annual coupon of $0.03. How much of the five-year bond with the semi-annual coupon of $0.02 should you hold to duration hedge the short position?</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-Exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Suppose you have shorted $100 million of the two-year bond with the semi-annual coupon of $0.03. Using the data from the principal components example in <a href="#sec-s:hedgingprincipalcomponents" class="quarto-xref"><span>Section 25.6</span></a>, find a portfolio of the one-year bond with a coupon of $0.04 and the five-year bond with a coupon of $0.02 that will hedge the first two principal components of the short position. Assume the loadings of the six-month yield on the two factors are the averages of the loadings of the one-month and one-year yields, the loadings of the 1.5 year yield on the two factors are the averages of the loadings of the 1.0 and 2.0 years, the loadings of the 2.5 year yield are the averages of the loadings of the 2.0 and 3.0 year yields, etc.</p>
</div>
</div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-BR" class="csl-entry" role="listitem">
Bielecki, T., and M. Rutkowski. 2002. <em>Credit Risk: Modeling, Valuation and Hedging</em>. Berlin Heidelberg New York: Springer.
</div>
<div id="ref-BM" class="csl-entry" role="listitem">
Brigo, D., and F. Mercurio. 2001. <em>Interest Rate Models</em>. Theory; Practice, Springer, Berlin Heidelberg New York.
</div>
<div id="ref-DS" class="csl-entry" role="listitem">
Duffie, D., and K. Singleton. 2003. <em>Credit Risk: Pricing</em>. Measurement; Management, Princeton University Press, Princeton, New Jersey.
</div>
<div id="ref-JW" class="csl-entry" role="listitem">
James, J., and N. Webber. 200AD. <em>Interest Rate Modelling</em>. New York: Wiley.
</div>
<div id="ref-Rebonato98" class="csl-entry" role="listitem">
Rebonato, R. 1998. <em>Interest-Rate Option Models</em>. 2nd ed., Wiley, New York,.
</div>
<div id="ref-Schonbucher" class="csl-entry" role="listitem">
SchÃ¶nbucher, P. 2003. <em>Credit Derivatives Pricing Models: Models</em>. Pricing; Implementation, Wiley, New York.
</div>
<div id="ref-Tavakoli" class="csl-entry" role="listitem">
Tavakoli, J. 2001. <em>Credit Derivatives and Synthetic Structures</em>. Wiley, New York.
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>The sample covariance matrix <span class="math inline">\(V\)</span> is an estimate of the unconditional covariances. It is a common finding that variances and covariances change over time. Thus, we could (and probably should) use methods such as those described in <a href="Chapter_StochasticVol.html" class="quarto-xref"><span>Chapter 17</span></a><a href="#fnref1" class="footnote-back" role="doc-backlink">â†©ï¸Ž</a></p></li>
<li id="fn2"><p>These were computed from discount bond price and yield data from the Center for Research in Security Prices (CRSP) at the University of Chicago.<a href="#fnref2" class="footnote-back" role="doc-backlink">â†©ï¸Ž</a></p></li>
<li id="fn3"><p>It is unlikely that these specific maturities would have been used in the principal components algorithm, so the loadings would have to be estimated by interpolating or fitting some type of curve to the loadings of the maturities that were used.<a href="#fnref3" class="footnote-back" role="doc-backlink">â†©ï¸Ž</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Chapter_MachineLearning.html" class="pagination-link" aria-label="Machine Learning">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Machine Learning</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Chapter_FixedIncomeDerivatives.html" class="pagination-link" aria-label="Fixed-Income Derivatives">
        <span class="nav-page-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Fixed-Income Derivatives</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions"><ul><li><a href="https://github.com/math-finance-book/book-code.git/blob/main/Chapter_FixedIncome.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer></body></html>