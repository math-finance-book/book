<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Mathematical Finance Book - 7&nbsp; Forward, Futures, and Exchange Options</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Chapter8.html" rel="next">
<link href="./Chapter6.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script>
  MathJax = {
    tex: {
      tags: 'ams'  // should be 'ams', 'none', or 'all'
    }
  };
</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Forward, Futures, and Exchange Options</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Mathematical Finance Book</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Asset Pricing Basics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Continuous-Time Models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter3.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Black-Scholes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter4.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Estimating and Modelling Volatility</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter5.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Introduction to Monte Carlo and Binomial Models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter6.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Foreign Exchange</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter7.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Forward, Futures, and Exchange Options</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter8.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Exotic Options</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter9.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">More on Monte Carlo and Binomial Valuation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter10.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Finite Difference Methods</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter11.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Fixed Income Concepts</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter12.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Introduction to Fixed Income Derivatives</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter13.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Valuing Derivatives in the Extended Vasicek Model</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter14.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">A Brief Survey of Term Structure Models</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#s_margrabe" id="toc-s_margrabe" class="nav-link active" data-scroll-target="#s_margrabe"><span class="toc-section-number">8</span>  Margrabe’s Formula</a></li>
  <li><a href="#s_black" id="toc-s_black" class="nav-link" data-scroll-target="#s_black"><span class="toc-section-number">9</span>  Black’s Formula</a></li>
  <li><a href="#s_merton" id="toc-s_merton" class="nav-link" data-scroll-target="#s_merton"><span class="toc-section-number">10</span>  Merton’s Formula</a></li>
  <li><a href="#deferred-exchange-options" id="toc-deferred-exchange-options" class="nav-link" data-scroll-target="#deferred-exchange-options"><span class="toc-section-number">11</span>  Deferred Exchange Options</a></li>
  <li><a href="#s_matlabimplementations" id="toc-s_matlabimplementations" class="nav-link" data-scroll-target="#s_matlabimplementations"><span class="toc-section-number">12</span>  Calculations in VBA</a></li>
  <li><a href="#s_forwardhedging" id="toc-s_forwardhedging" class="nav-link" data-scroll-target="#s_forwardhedging"><span class="toc-section-number">13</span>  Greeks and Hedging</a></li>
  <li><a href="#s_futuresforwards" id="toc-s_futuresforwards" class="nav-link" data-scroll-target="#s_futuresforwards"><span class="toc-section-number">14</span>  The Relation of Futures Prices to Forward Prices</a></li>
  <li><a href="#s_futuresoptions" id="toc-s_futuresoptions" class="nav-link" data-scroll-target="#s_futuresoptions"><span class="toc-section-number">15</span>  Futures Options</a></li>
  <li><a href="#s_volatility" id="toc-s_volatility" class="nav-link" data-scroll-target="#s_volatility"><span class="toc-section-number">16</span>  Time-Varying Volatility</a></li>
  <li><a href="#s_hedgingforwards" id="toc-s_hedgingforwards" class="nav-link" data-scroll-target="#s_hedgingforwards"><span class="toc-section-number">17</span>  Hedging with Forwards and Futures</a></li>
  <li><a href="#s_margrabecomplete" id="toc-s_margrabecomplete" class="nav-link" data-scroll-target="#s_margrabecomplete"><span class="toc-section-number">18</span>  Market Completeness</a></li>
  <li><a href="#problems" id="toc-problems" class="nav-link" data-scroll-target="#problems">Problems</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-c_forwardexchange" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Forward, Futures, and Exchange Options</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>In this chapter, we will derive three important generalizations of the Black-Scholes formula. We will derive them from the Black-Scholes formula, which shows that all of the formulas are equivalent. We will start with Margrabe’s <span class="citation" data-cites="Margrabe">[@Margrabe]</span> formula for an option to exchange one asset for another. Standard calls and puts are special cases, involving the exchange of cash for an asset or an asset for cash. From Margrabe’s formula, we will derive Black’s <span class="citation" data-cites="Black">[@Black]</span> formulas for options on forward and futures contracts. Then, from Black’s formulas, we will derive Merton’s <span class="citation" data-cites="Merton">[@Merton]</span> formulas for calls and puts in the absence of a constant risk-free rate.</p>
<p>Unless explicitly stated otherwise, we will not assume in this chapter the existence of a risk-free asset (or even an instantaneously risk-free asset as described in Sect. <a href="#s_continuouscompounding" data-reference-type="ref" data-reference="s_continuouscompounding">[s_continuouscompounding]</a>). This implies that the market is incomplete and there are many risk-neutral measures. Nevertheless, we can price exchange options, forward and futures options, and stock options by arbitrage. Understanding this issue is not essential for deriving the formulas in this chapter—as mentioned, they will all be derived from the Black-Scholes formula—but the issue is nonetheless important. It is discussed in the final section of the chapter.</p>
<p>Naturally, all of the option-pricing formulas discussed in this chapter are quite similar. The similarity can be seen from the Black-Scholes formula for a call option, which we can write as follows (replacing <span class="math inline">\(d_1\)</span> by <span class="math inline">\(x\)</span> and <span class="math inline">\(d_2\)</span> by <span class="math inline">\(y\)</span>): Note that <span class="math inline">\(\E^{-qT}S(0)\)</span> is the present value at date 0 of the stock that would be acquired if the option is exercised, because it is the cost that one must pay at date 0 to have one share of the stock at date <span class="math inline">\(T\)</span> with no withdrawal of dividends in the interim. Obviously, <span class="math inline">\(\E^{-rT}K\)</span> is the present value of the cash that is paid if the option is exercised. Moreover, <span class="math inline">\(x\)</span> is equal to <span class="math display">\[\frac{\log \left(\frac{\E^{-qT}S(0)}{\E^{-rT}K} \right)+ \frac{1}{2}\sigma^2T}{\sigma\sqrt{T}}\; ,\]</span> and the logarithm in the numerator is of the ratio of present values. All of the option pricing formulas in this chapter have the same form: the present value of the asset to be acquired multiplied by <span class="math inline">\(\N(x)\)</span> minus the present value of the asset to be delivered multiplied by <span class="math inline">\(\N(y)\)</span>. Moreover in each case <span class="math inline">\(x\)</span> is the logarithm of the ratio of present values plus one-half <span class="math inline">\(\sigma^2T\)</span> all divided by <span class="math inline">\(\sigma\sqrt{T}\)</span>, and in each case <span class="math inline">\(y\)</span> is defined by <span class="math inline">\(\eqref{d2again}\)</span>. Notice that the Black-Scholes put option formula has this structure also. The Black-Scholes put option formula is This similarity is discussed further in Sect.~<span class="math inline">\(\ref{s_matlabimplementations}\)</span>, where the pricing formulas are implemented in VBA.</p>
<section id="s_margrabe" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Margrabe’s Formula</h1>
<p>Consider two assets with prices <span class="math inline">\(S_1\)</span> and <span class="math inline">\(S_2\)</span> and a European option to exchange asset 2 for asset 1 at date <span class="math inline">\(T\)</span>. The value of the option at maturity is <span class="math display">\[\max(0,S_1(T)-S_2(T))\; .\]</span> Note that there is no real difference between a put and a call: the exchange option can be viewed as a call on the first asset with random strike <span class="math inline">\(S_2(T)\)</span> or as a put on the second asset with random strike <span class="math inline">\(S_1(T)\)</span>.</p>
<p>Assume the assets pay constant dividend yields <span class="math inline">\(q_i\)</span> and assume the prices satisfy <span class="math display">\[\frac{\D S_i}{S_i} = \mu_i\,\D t+\sigma_i\,\D B_i\]</span> where each <span class="math inline">\(B_i\)</span> is a Brownian motion under the actual probability measure. As before, the drifts <span class="math inline">\(\mu_i\)</span> can be quite general random processes. We also allow the volatilities <span class="math inline">\(\sigma_i\)</span> and the correlation <span class="math inline">\(\rho\)</span> of the Brownian motions to be random processes; however, we make the assumption that <span class="math inline">\(\sigma\)</span> defined as <span class="math display">\[\begin{equation}\label{margrabesigma}
\sigma = \sqrt{\sigma_1^2 + \sigma_2^2 - 2\rho\sigma_1\sigma_2}
\end{equation}\]</span> is a constant. As shown in <span class="math inline">\(\eqref{volatilityratio}\)</span>, <span class="math inline">\(\sigma\)</span> is the volatility of <span class="math inline">\(S_1/S_2\)</span> (and also <span class="math inline">\(S_2/S_1\)</span>). So, the assumption we are making is that the volatility of the ratio of the asset prices is constant. In Sect.~<span class="math inline">\(\ref{s_volatility}\)</span>, we will relax this assumption to allow <span class="math inline">\(\sigma\)</span> to be time-varying (though still non-random).</p>
<p>The following is the formula of Margrabe <span class="citation" data-cites="Margrabe">[@Margrabe]</span>:</p>
<p>Margrabe’s derivation is a very simple argument based on the Black-Scholes formula. We noted in Chap. <a href="#c_foreignexchange" data-reference-type="ref" data-reference="c_foreignexchange">[c_foreignexchange]</a> that the Black-Scholes formula does not depend on the currency—if the underlying asset and risk-free asset are dollar denominated, the formula gives the dollar value of an option; if they are yen denominated, the formula gives the yen value of an option, etc. So we can take the “currency” to be units of the second asset; i.e., we will use the second asset as numeraire. With this numeraire, the value of the first asset is <span class="math inline">\(S_1/S_2\)</span>. The value of the exchange option at maturity is <span class="math display">\[\max(0,S_1(T)-S_2(T)) = S_2(T)\max\left(0,\frac{S_1(T)}{S_2(T)}-1\right)\; .\]</span> This is the value in the natural currency (e.g., dollars). The value using the second asset as numeraire is obtained by dividing by <span class="math inline">\(S_2(T)\)</span>, so it is <span class="math display">\[\max\left(0,\frac{S_1(T)}{S_2(T)}-1\right)\; .\]</span> This is the value of a standard call option, the underlying being the first asset measured in units of the second. We can apply the Black-Scholes formula to obtain the value of the option (in units of the second asset) at date 0. Multiplying this value by <span class="math inline">\(S_2(0)\)</span> will give the option value in the natural currency.</p>
<p>The risk-free rate when the second asset is the numeraire is the dividend yield on the second asset <span class="math inline">\(q_2\)</span>. To see this, note that the price of the second asset is always equal to one; moreover, an investment in the second asset will accumulate at the rate <span class="math inline">\(q_2\)</span> via reinvestment of dividends. Therefore, <span class="math inline">\(q_2\)</span> is a risk-free rate of return.</p>
<p>The dividend yield on the first asset remains <span class="math inline">\(q_1\)</span>. To see this, note that the dividend paid in the natural currency is <span class="math inline">\(q_1S_1(t)\,\D t\)</span> in an instant <span class="math inline">\(\D t\)</span> and the value of this dividend using the second asset as numeraire is <span class="math inline">\([q_1S_1(t)/S_2(t)]\,\D t\)</span>, which is the fraction <span class="math inline">\(q_1\,\D t\)</span> of the value <span class="math inline">\(S_1(t)/S_2(t)\)</span> of the first asset using the second asset as numeraire.</p>
<p>The volatility of the first asset using the second as numeraire is the volatility of the ratio <span class="math inline">\(S_1(t)/S_2(t)\)</span>, which is <span class="math inline">\(\sigma\)</span> defined in <a href="#margrabesigma" data-reference-type="eqref" data-reference="margrabesigma">[margrabesigma]</a>. Applying the Black-Scholes formula with these inputs yields Margrabe’s formula directly.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
</section>
<section id="s_black" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Black’s Formula</h1>
<p>Black <span class="citation" data-cites="Black">[@Black]</span> gives formulas for the values of options on futures contracts when interest rates are deterministic (i.e., non-random). It is well known (and we will establish this in Sect. <a href="#s_futuresforwards" data-reference-type="ref" data-reference="s_futuresforwards">[s_futuresforwards]</a>) that, when interest rates are deterministic, futures prices should equal forward prices, so Black’s formulas also yield formulas for the values of options on forward contracts when interest rates are deterministic. However, the formulas for options on forwards are valid more generally (even when interest rates vary randomly) and now a mention of Black’s formulas is more likely to be referring to the formulas for options on forwards, instead of the formulas for options on futures. In any case, we will start with the formulas for options on forwards and then in Sect. <a href="#s_futuresoptions" data-reference-type="ref" data-reference="s_futuresoptions">[s_futuresoptions]</a> derive the formulas for options on futures when interest rates are deterministic.</p>
<p>We consider a forward contract that matures at some date <span class="math inline">\(T'\)</span> and a call or put option on the forward that matures at <span class="math inline">\(T \leq T'\)</span>. The meaning of a call option on a forward is that exercise of the call creates a long position in the forward contract with forward price equal to the strike price of the option. The long forward contract means that the investor will receive the underlying asset at <span class="math inline">\(T'\)</span> and pay the forward price (the strike of the option) at <span class="math inline">\(T'\)</span>. Thus, the strike price is not paid at the date of exercise but instead is paid when the underlying asset is delivered. Symmetrically, the exercise of a put creates a short position in the forward contract with forward price equal to the strike of the put, which means that the exerciser must deliver the underlying at <span class="math inline">\(T'\)</span> and will receive the strike price at <span class="math inline">\(T'\)</span>.</p>
<p>We will denote the market forward price by <span class="math inline">\(F(t)\)</span>. We assume the forward price satisfies <span class="math display">\[\begin{equation}\label{dforward}
\frac{\D F}{F} = \mu\,\D t + \sigma\,\D B\;,
\end{equation}\]</span> where <span class="math inline">\(B\)</span> is a Brownian motion. As before, <span class="math inline">\(\mu\)</span> can be a quite general random process. We will assume in this section that the volatility <span class="math inline">\(\sigma\)</span> is a constant and generalize to a time-varying (but non-random) volatility in Sect. <a href="#s_volatility" data-reference-type="ref" data-reference="s_volatility">[s_volatility]</a>. In Sect. <a href="#s_merton" data-reference-type="ref" data-reference="s_merton">[s_merton]</a>, we will discuss the relations of the forward price and its volatility to the price and volatility of the underlying.</p>
<p>Black’s formulas are particularly useful when interest rates are assumed to be random, as we will see in Part <a href="#p_fixedincome" data-reference-type="ref" data-reference="p_fixedincome">[p_fixedincome]</a> of the book when we study fixed income derivatives. Therefore, we do not assume here that there is a constant risk-free rate. Instead we will assume that there is a “discount bond” that pays $1 at date <span class="math inline">\(T'\)</span>. It is called a “discount bond” because its price is the appropriate discount factor for computing the present value of nonrandom cash flows at date <span class="math inline">\(T'\)</span>. Such a bond is also called a “zero coupon” bond because it does not pay any cash flows until <span class="math inline">\(T'\)</span>, when it pays its face value (which we take simply for convenience to be $1). We will let <span class="math inline">\(P(t,T')\)</span> denote the price of the bond at date <span class="math inline">\(t\)</span>.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p>Black’s formulas are: </p>
<p>Black’s formulas are a simple consequence of Margrabe’s formula. To see this, we first need to describe the value of an option on a forward at the maturity date <span class="math inline">\(T\)</span> of the option. Consider a call option. Exercise of the call results in a long forward position with forward price <span class="math inline">\(K\)</span>. The value of the long forward is given by its market price <span class="math inline">\(F(T)\)</span>, but we must keep in mind that the forward price is not paid until the underlying is delivered at date <span class="math inline">\(T'\)</span>. So suppose that you exercise the call and then sell a forward contract at the market forward price <span class="math inline">\(F(T)\)</span>. The delivery/receipt obligations of the long and short forwards cancel, leaving you with the obligation to pay <span class="math inline">\(K\)</span> dollars at date <span class="math inline">\(T'\)</span> and with an asset of <span class="math inline">\(F(T)\)</span> dollars to be received at date <span class="math inline">\(T'\)</span>. The value of the net cash flow at date <span class="math inline">\(T\)</span> is <span class="math inline">\(P(T,T')[F(T)-K]\)</span>. This is the value if exercised, so the value of the call at date <span class="math inline">\(T\)</span> is</p>
<p><span class="math display">\[\begin{equation}\label{blackcallexchange1}
\max\big(0, P(T,T')[F(T)-K]\big) = \max\big(0,P(T,T')F(T)-P(T,T')K\big)\;.\end{equation}\]</span> We can write this as <span class="math display">\[\begin{equation}\label{blackcallexchange2}
\max(0,S_1(T)-S_2(T))
\end{equation}\]</span> if we define <span class="math display">\[\begin{equation}\label{blackexchange}
S_1(t) = P(t,T')F(t) \quad \text{and} \quad S_2(t) = P(t,T')K
\end{equation}\]</span> for <span class="math inline">\(t=T\)</span> (and more generally for <span class="math inline">\(t \leq T\)</span>). Thus, the value at maturity of a call option on a forward is the value at maturity of an option to exchange the two assets with prices <span class="math inline">\(S_1\)</span> and <span class="math inline">\(S_2\)</span> (we will establish in a moment that <span class="math inline">\(S_1\)</span> and <span class="math inline">\(S_2\)</span> are actually asset prices). It follows that the value at date 0 of a call option on a forward is the value at date 0 of an option to exchange the two assets.</p>
<p>Now consider a put option on a forward. Exercising the put and unwinding the short forward position by buying a forward at the market price <span class="math inline">\(F(T)\)</span> will leave one with a net cash flow of <span class="math inline">\(K-F(T)\)</span> to be received at the maturity date <span class="math inline">\(T'\)</span> of the forward. Therefore the value of the put at maturity is <span class="math display">\[\begin{equation}\label{blackputexchange}
\max(0,P(T,T')[K-F(T)]) = \max(S_2(T)-S_1(T))\;.
\end{equation}\]</span> Therefore, the value at date 0 of the put option on a forward must be the value at date 0 of an exchange option, where asset one in <a href="#blackexchange" data-reference-type="eqref" data-reference="blackexchange">[blackexchange]</a> is exchanged for asset two.</p>
<p>The key assumption in deriving Margrabe’s formula is that the volatility of the ratio of asset prices is a constant. For a call option on a forward, the relevant ratio is <span class="math inline">\(S_1/S_2 = F/K\)</span>. Because <span class="math inline">\(K\)</span> is a constant, the volatility of the ratio is the volatility <span class="math inline">\(\sigma\)</span> of the forward price <span class="math inline">\(F\)</span>, which we have assumed to be constant. For a put option on a forward, the relevant ratio is <span class="math inline">\(S_2/S_1 = K/F\)</span>. Itô’s formula implies <span class="math display">\[\begin{align*}
\frac{d(K/F)}{K/F} &amp;= -\frac{\D F}{F} + \left(\frac{\D F}{F}\right)^2\; ,\\
&amp;= (-\mu +\sigma^2)\,\D t - \sigma\,\D B\\
&amp;= (-\mu+\sigma^2)\,\D t + \sigma (-\D B),
\end{align*}\]</span> The purpose of the last equality displayed here is to emphasize that we should take the volatility of <span class="math inline">\(K/F\)</span> to be the positive number <span class="math inline">\(\sigma\)</span>. We can do this by using <span class="math inline">\(-B\)</span> as the Brownian motion instead of <span class="math inline">\(B\)</span>.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> Thus, we can apply Margrabe’s formula to value calls and puts on forwards (once we verify that <span class="math inline">\(S_1\)</span> and <span class="math inline">\(S_2\)</span> are indeed asset prices).</p>
<p>To obtain Black’s formula <a href="#black" data-reference-type="eqref" data-reference="black">[black]</a> for a call on a forward from Margrabe’s formula <a href="#margrabeoption" data-reference-type="eqref" data-reference="margrabeoption">[margrabeoption]</a>, we simply substitute <span class="math inline">\(S_1(0)=P(0,T')F(0)\)</span>, <span class="math inline">\(S_2(0)=P(0,T')K\)</span>, <span class="math inline">\(q_1=0\)</span> and <span class="math inline">\(q_2=0\)</span> in Margrabe’s formula. A put option is the reverse exchange, so Margrabe’s formula gives <span class="math display">\[\begin{equation}\label{margrabeput}
P(0,T')K\N(d^m_1) - P(0,T')F(0)\N(d^m_2)\;,
\end{equation}\]</span> where <span class="math display">\[\begin{align*}
d^m_1&amp;= \frac{\log\left(\frac{P(0,T')K}{P(0,T')F(0)}\right)+\frac{1}{2}\sigma^2T}{\sigma\sqrt{T}}\; ,\\
d^m_2 &amp;=d^m_1-\sigma\sqrt{T}.
\end{align*}\]</span> We introduce the superscript <span class="math inline">\(m\)</span> here to distinguish these numbers in Margrabe’s formula from the <span class="math inline">\(d_1\)</span> and <span class="math inline">\(d_2\)</span> defined in <span class="math inline">\(\eqref{black_d1}\)</span> and <span class="math inline">\(\eqref{black_d2}\)</span>. Notice that <span class="math display">\[\begin{align*}
d^m_1&amp; = -\frac{\log\left(\frac{F(0)}{K}\right)-\frac{1}{2}\sigma^2T}{\sigma\sqrt{T}} = -d_2\\
d^m_2 &amp;= -\frac{\log\left(\frac{F(0)}{K}\right)+\frac{1}{2}\sigma^2T}{\sigma\sqrt{T}} =-d_1,
\end{align*}\]</span> so Margrabe’s formula <a href="#margrabeput" data-reference-type="eqref" data-reference="margrabeput">[margrabeput]</a> is the same as Black’s formula <a href="#black_put" data-reference-type="eqref" data-reference="black_put">[black_put]</a> for a put option on a forward.</p>
<p>We still need to explain why <span class="math inline">\(S_1\)</span> and <span class="math inline">\(S_2\)</span> defined in <a href="#blackexchange" data-reference-type="eqref" data-reference="blackexchange">[blackexchange]</a> are asset prices, in fact the prices of non-dividend-paying assets since we have taken <span class="math inline">\(q_1=q_2=0\)</span> in applying Margrabe’s formula. The case of <span class="math inline">\(S_2\)</span> should be clear: it is the price of <span class="math inline">\(K\)</span> units of the discount bond maturing at <span class="math inline">\(T'\)</span>. The case of <span class="math inline">\(S_1\)</span> is more subtle. It is the price of the following portfolio constructed at date 0 and held until date <span class="math inline">\(T\)</span>: go long one forward contract and buy <span class="math inline">\(F(0)\)</span> units of the discount bond maturing at <span class="math inline">\(T'\)</span>. The value at date <span class="math inline">\(t\)</span> of the bonds in the portfolio is <span class="math inline">\(F(0)P(t,T')\)</span>. The value at date <span class="math inline">\(t\)</span> of the long forward contract can be seen by considering unwinding it by selling a forward at date <span class="math inline">\(t\)</span> at the market price <span class="math inline">\(F(t)\)</span>. This cancels the delivery/receipt obligations on the underlying and results in a net cash flow of <span class="math inline">\(F(t)-F(0)\)</span> to be received at date <span class="math inline">\(T'\)</span>. The value at date <span class="math inline">\(t\)</span> of this future cash flow is <span class="math inline">\(P(t,T')[F(t)-F(0)]\)</span> and when we add this to the value of the bonds we obtain <span class="math inline">\(P(t,T')F(t) = S_1(t)\)</span>.</p>
<p>Put-call parity for options on forwards is <span class="math display">\[\text{Call Price}  + P(0,T')K = \text{Put Price}  + P(0,T')F(0)\; .\]</span> The left-hand side is the cost of the call and <span class="math inline">\(K\)</span> units of the discount bond, which have value <span class="math inline">\(\max(F(T),K)P(T,T')\)</span> at time <span class="math inline">\(T\)</span>. The right-hand side is the cost of the put option and <span class="math inline">\(F(0)\)</span> units of the discount bond, which, together with a long forward contract initiated at date 0, also have value <span class="math inline">\(\max(F(T),K)P(T,T')\)</span> at time <span class="math inline">\(T\)</span>.</p>
</section>
<section id="s_merton" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Merton’s Formula</h1>
<p>Now we reconsider the Black-Scholes model but without assuming there is a constant risk-free rate. We assume instead that there is a discount bond maturing at the same date as the option. Letting <span class="math inline">\(T\)</span> denote the maturity date of the option and discount bond, we write the price of the discount bond at dates <span class="math inline">\(t \leq T\)</span> as <span class="math inline">\(P(t,T)\)</span>. We continue to assume that the stock has a constant dividend yield <span class="math inline">\(q\)</span> but we make a different assumption about volatility—instead of assuming that the volatility of the stock is constant, we assume that the volatility of its forward price is constant. We relax this to allow time-varying but non-random volatility of the forward price in Sect. <a href="#s_volatility" data-reference-type="ref" data-reference="s_volatility">[s_volatility]</a>.</p>
<p>The forward contract we consider is a forward contract for the stock maturing at the date <span class="math inline">\(T\)</span> that the option matures. Let <span class="math inline">\(F(t)\)</span> denote the forward price for this contract at dates <span class="math inline">\(0 \leq t\leq T\)</span>. Because the forward price must equal the spot price at the maturity of a forward contract, we have <span class="math inline">\(F(T)=S(T)\)</span>. Consider a call option on the forward, with the call maturing at <span class="math inline">\(T\)</span> also. In the notation of the previous section, we have <span class="math inline">\(T'=T\)</span> and hence <span class="math inline">\(P(T,T')=1\)</span> (the discount bond is worth $1 at maturity). Therefore the value <a href="#blackcallexchange1" data-reference-type="eqref" data-reference="blackcallexchange1">[blackcallexchange1]</a> of the call on the forward at its maturity <span class="math inline">\(T\)</span> is <span class="math display">\[\max(0,F(T)-K) = \max(0,S(T)-K)\; ,\]</span> which is the same as the value of the call on the stock. Therefore, the value at date 0 of the call on the stock must equal the value at date 0 of the call on the forward, and we can use Black’s formula <a href="#black" data-reference-type="eqref" data-reference="black">[black]</a> for a call option on a forward to price a call option on the stock, assuming the forward price has a constant volatility.</p>
<p>Likewise, the value at the maturity date <span class="math inline">\(T\)</span> of a put option on the same forward contract is, from <a href="#blackputexchange" data-reference-type="eqref" data-reference="blackputexchange">[blackputexchange]</a>, <span class="math display">\[\max(0,K-F(T)) = \max(0,K-S(T))\; .\]</span> Hence, we can use Black’s formula <a href="#black_put" data-reference-type="eqref" data-reference="black_put">[black_put]</a> to price a put option on the stock, assuming the forward price has a constant volatility.</p>
<p>It is not necessary that the forward contract be traded, because we can create a synthetic forward using the stock. To create a synthetic forward at date <span class="math inline">\(t\)</span> we buy <span class="math inline">\(\E^{-q(T-t)}\)</span> shares of the stock at cost <span class="math inline">\(\E^{-q(T-t)}S(t)\)</span>. With reinvestment of dividends, this will accumulate to one share at date <span class="math inline">\(T\)</span>. We finance the purchase of the stock by shorting <span class="math inline">\(\E^{-q(T-t)}S(t)/P(t,T)\)</span> units of the discount bond. This results in a liability of <span class="math inline">\(\E^{-q(T-t)}S(t)/P(t,T)\)</span> dollars at date <span class="math inline">\(T\)</span>, so the forward purchase is arranged by promising to pay <span class="math inline">\(\E^{-q(T-t)}S(t)/P(t,T)\)</span> dollars at the delivery date; i.e., the forward price is <span class="math display">\[\begin{equation}\label{forwardprice}
F(t) = \frac{\E^{-q(T-t)}S(t)}{P(t,T)}\;.
\end{equation}\]</span> The assumption we need to apply Black’s formulas is that <span class="math display">\[\begin{equation}\label{mertonforward}
\frac{\D F}{F} = \mu\,\D t+\sigma\,\D B\;,
\end{equation}\]</span> where <span class="math inline">\(B\)</span> is a Brownian motion, <span class="math inline">\(\mu\)</span> can be a quite general random process, and <span class="math inline">\(\sigma\)</span> is a constant. At the end of this section, we will discuss the meaning of this assumption in terms of the volatilities of the stock and bond and their correlation.</p>
<p>Under this assumption, the following formulas originally due to Merton <span class="citation" data-cites="Merton">[@Merton]</span> follow immediately from Black’s formulas <a href="#blackcombined" data-reference-type="eqref" data-reference="blackcombined">[blackcombined]</a> by substituting <span class="math inline">\(F(0) = \E^{-qT}S(0)/P(0,T)\)</span>. </p>
<p>These formulas are clearly similar to the Black-Scholes formulas. The similarities are made more apparent by writing the discount bond price in terms of its yield. The yield <span class="math inline">\(y\)</span> of the discount bond is defined as <span class="math display">\[y = \frac{-\log P(0,T)}{T} \qquad\Longleftrightarrow \qquad P(0,T) = \E^{-yT}\; .\]</span> Substituting this into the expressions above, we have: This shows that the Merton call and put formulas can be calculated from the Black-Scholes call and put functions given in Chap. <a href="#c_blackscholes" data-reference-type="ref" data-reference="c_blackscholes">[c_blackscholes]</a> by inputting the yield of the discount bond as the risk-free rate and by inputting the volatility of the forward price as <span class="math inline">\(\sigma\)</span>.</p>
<p>This shows that the Merton call and put formulas can be calculated from the Black-Scholes call and put functions given in Chap. <a href="#c_blackscholes" data-reference-type="ref" data-reference="c_blackscholes">[c_blackscholes]</a> by inputting the yield of the discount bond as the risk-free rate and by inputting the volatility of the forward price as <span class="math inline">\(\sigma\)</span>. If one wants to assume that there is a constant risk-free rate, then the discount bond price will have to be <span class="math inline">\(\E^{-rT}\)</span> and its yield will be the risk-free rate <span class="math inline">\(r\)</span>. In this case, the forward price is <span class="math inline">\(\E^{(r-q)T}S(0)\)</span> and it has the same volatility as <span class="math inline">\(S\)</span>. Making these substitutions, the Merton formulas <a href="#Mertoncombined" data-reference-type="eqref" data-reference="Mertoncombined">[Mertoncombined]</a> are the same as the Black-Scholes formulas. However, the Merton formulas are an important generalization. It is common practice to use the yield of the discount bond as the risk-free rate that is input into the Black-Scholes formulas. The Merton formulas justify this practice. It is less common to attempt to estimate the volatility of the forward price and use this (as one should since the risk-free rate really is not constant) as the volatility in the Black-Scholes-Merton formulas. However, this does little damage for pricing short-term options, because the volatility of the forward price—see <a href="#mertonsigma" data-reference-type="eqref" data-reference="mertonsigma">[mertonsigma]</a> below—will be approximately the same as the volatility of the underlying for short-term options, due to the low volatility of short-term bond prices. Moreover, when one computes an implied volatility from the Black-Scholes formula (using the discount bond yield as the risk-free rate), it should be regarded as the market’s view of the forward price volatility, and it is perfectly appropriate to input it into the Black-Scholes-Merton formulas to price another option (assuming of course that the forward price volatility can be regarded as constant).</p>
<p>The volatility of the forward price can be computed in terms of the volatilities and correlation of the stock and discount bond as follows. Assume that <span class="math display">\[\begin{align*}
\frac{\D S}{S}&amp; = \mu_s\,\D t + \sigma_s\,\D B_s\; ,\\
\frac{\D P}{P}&amp; = \mu_p\,\D t + \sigma_p\,\D B_p,
\end{align*}\]</span> where <span class="math inline">\(B_s\)</span> and <span class="math inline">\(B_p\)</span> are Brownian motions with correlation <span class="math inline">\(\rho\)</span>. Then <span class="math inline">\(\eqref{volatilityproduct}\)</span> and <span class="math inline">\(\eqref{volatilityratio}\)</span> show that the volatility of <span class="math inline">\(F(t) = \E^{-q(T-t)}S(t)/P(t,T)\)</span> is <span class="math inline">\(\sigma\)</span> defined as <span class="math display">\[\begin{equation}\label{mertonsigma}
\sigma = \sqrt{\sigma_s^2+\sigma_p^2 - 2\rho\sigma_s\sigma_p}\;.
\end{equation}\]</span> As mentioned before, we will consider in Sect. <a href="#s_volatility" data-reference-type="ref" data-reference="s_volatility">[s_volatility]</a> that the the volatility <a href="#mertonsigma" data-reference-type="eqref" data-reference="mertonsigma">[mertonsigma]</a> may vary over time in a non-random way.</p>
</section>
<section id="deferred-exchange-options" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Deferred Exchange Options</h1>
<p>A call option on a forward can be viewed as an option to exchange <span class="math inline">\(K\)</span> dollars (or, equivalently, <span class="math inline">\(K\)</span> units of the discount bond maturing at the maturity date of the forward) for the underlying asset, with the exchange taking place at the maturity date of the forward. Therefore, it is an exchange option in which the exchange takes place at a fixed date after the option matures. We can easily extend Margrabe’s formula to value options to exchange other assets when the option maturity precedes the date of the exchange.</p>
<p>As in Sect. <a href="#s_margrabe" data-reference-type="ref" data-reference="s_margrabe">[s_margrabe]</a>, consider two assets with prices <span class="math inline">\(S_i\)</span> and constant dividend yields <span class="math inline">\(q_i\)</span> and assume the prices satisfy <span class="math display">\[\frac{\D S_i}{S_i} = \mu_i\,\D t + \sigma_i\,\D B_i\; ,\]</span> where the drifts <span class="math inline">\(\mu_i\)</span>, the volatilities <span class="math inline">\(\sigma_i\)</span> and the correlation <span class="math inline">\(\rho\)</span> of the two Brownian motions can be general random processes. However, also as in Sect. <a href="#s_margrabe" data-reference-type="ref" data-reference="s_margrabe">[s_margrabe]</a>, assume that the volatility <span class="math display">\[\sigma = \sqrt{\sigma_1^2 + \sigma_2^2 - 2\rho\sigma_1\sigma_2}\]</span> of the ratio of asset prices is constant.</p>
<p>Consider an option maturing at date <span class="math inline">\(T\)</span> to exchange the second asset for the first asset at date <span class="math inline">\(T'\geq T\)</span>. To understand the value of the option at date <span class="math inline">\(T\)</span>, suppose it is exercised. To unwind the positions in the two assets, one can sell a forward contract on the asset to be received and buy a forward contract on the asset to be delivered, with the forward contracts maturing at the date of the exchange. Then the difference <span class="math inline">\(F_1(T)-F_2(T)\)</span> in the forward prices is a cash flow to be received/paid at the exchange date <span class="math inline">\(T'\)</span> and its value at date <span class="math inline">\(T\)</span> is <span class="math inline">\(P(T,T')[F_1(T)-F_2(T)]\)</span>. Therefore, the value of the option at its maturity <span class="math inline">\(T\)</span> is <span class="math display">\[\max(0,P(T,T')F_1(T) - P(T,T')F_2(T))\; .\]</span> As in Sect. <a href="#s_black" data-reference-type="ref" data-reference="s_black">[s_black]</a>, this valuation does not require the existence of traded forward contracts, because synthetic forwards can be created. Also as in Sect. <a href="#s_black" data-reference-type="ref" data-reference="s_black">[s_black]</a> we know that <span class="math display">\[S^*_1(t) = P(t,T')F_1(t) \quad \text{and} \quad S^*_2(t) = P(t,T')F_2(t)\]</span> are the prices of non-dividend-paying assets. Therefore, the option to exchange the assets at date <span class="math inline">\(T'\)</span> must have the same value as an option to exchange at date <span class="math inline">\(T\)</span> the assets with prices <span class="math inline">\(S^*_i\)</span>.</p>
<p>We recall here the arbitrage formula <a href="#forwardprice" data-reference-type="eqref" data-reference="forwardprice">[forwardprice]</a> for the forward prices (making the change that here the forwards mature at <span class="math inline">\(T'\)</span>): <span class="math display">\[F_i(t) =  \frac{\E^{-q_i(T'-t)}S_i(t)}{P(t,T')}\; .\]</span> Thus, <span class="math display">\[S^*_i(t) = \E^{-q_i(T'-t)}S_i(t)\; .\]</span> This implies that the volatility of the ratio <span class="math inline">\(S_1^*/S_2^*\)</span> is the same as the volatility of the ratio <span class="math inline">\(S_1/S_2\)</span>. Therefore, we can price a deferred exchange option from Margrabe’s formula, inputting the prices <span class="math inline">\(S^*_i(0) = \E^{-q_iT'}S_i(0)\)</span> as the initial asset prices and zero as their dividend yields. This formula is: </p>
</section>
<section id="s_matlabimplementations" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Calculations in VBA</h1>
We could of course write entirely separate programs for the options discussed so far in this chapter but it seems useful to emphasize their common structure. As discussed in the introduction to this chapter, each is the present value of what is received upon exercise multiplied by <span class="math inline">\(\N(x)\)</span> minus the present value of what is delivered upon exercise multiplied by <span class="math inline">\(\N(y)\)</span> and <span class="math inline">\(x\)</span> in each case is the logarithm of the ratio of present values plus one-half <span class="math inline">\(\sigma^2T\)</span>, all divided by <span class="math inline">\(\sigma\sqrt{T}\)</span>. In the case of options on forwards, the present values are the present values of what is received or delivered at the maturity of the forward contract. We can do this calculation in the following program.

<p>Now we can use the following one-line programs to value exchange and forward options. We will explain in Sect. <a href="#s_futuresoptions" data-reference-type="ref" data-reference="s_futuresoptions">[s_futuresoptions]</a> why (and in what circumstance) the Black call and put functions are appropriate for options on futures.</p>




We could also have calculated the Black-Scholes call formula as
and the Black-Scholes put formula as
</section>
<section id="s_forwardhedging" class="level1" data-number="13">
<h1 data-number="13"><span class="header-section-number">13</span> Greeks and Hedging</h1>
<p>The Greeks for the Margrabe and Black formulas can be calculated in the same way that we calculated them in Chap. <a href="#c_blackscholes" data-reference-type="ref" data-reference="c_blackscholes">[c_blackscholes]</a> for the Black-Scholes formula. In analogy with <a href="#greeksimplify" data-reference-type="eqref" data-reference="greeksimplify">[greeksimplify]</a>, it can be shown for the Margrabe formula that <span class="math display">\[\E^{-q_1T}S_1(0)\nd(d_1) = \E^{-q_2T}S_2(0)\nd(d_2)\; ,\]</span> and again this simplifies the calculations. This equation applies to the Black call formula by taking <span class="math inline">\(q_1=q_2=0\)</span>, <span class="math inline">\(S_1(0)=P(0,T')F(0)\)</span>, and <span class="math inline">\(S_2(0)=P(0,T')K\)</span>, leading to <span class="math display">\[F(0)\nd(d_1) = K\nd(d_2)\; .\]</span> The Greeks for the Black call formula and the Margrabe formula are: </p>
<p>Hedging for the Margrabe formula is much the same as for the Black-Scholes formula. We would delta-hedge a written exchange option by holding <span class="math inline">\(\delta_1=\E^{-q_1T}\N(d_1)\)</span> shares of the first asset and <span class="math inline">\(\delta_2 =- \E^{-q_2T}\N(d_2)\)</span> shares of the second asset (which means shorting the second asset). This position would be financed by borrowing at the risk-free rate (or shorting the discount bond). The same argument that we used in Sect. <a href="Chapter3.html#s_deltahedging" data-reference-type="ref" data-reference="s_deltahedging">[s_deltahedging]</a> shows that this zero-cost portfolio will have a zero return if continuously rebalanced.</p>
<p>Because the Black formulas are a special case of the Margrabe formula, we can delta-hedge options on forwards in the same way. Putting <span class="math inline">\(q_1=q_2=0\)</span>, <span class="math inline">\(S_1(0)=P(0,T')F(0)\)</span> and <span class="math inline">\(S_2(0)=P(0,T')K\)</span>, we would delta-hedge a written call option by buying <span class="math inline">\(\N(d_1)\)</span> shares of the first asset and shorting <span class="math inline">\(\N(d_2)\)</span> shares of the second, where <span class="math inline">\(d_1\)</span> and <span class="math inline">\(d_2\)</span> are defined in the Margrabe formulas <a href="#margrabe_d1" data-reference-type="eqref" data-reference="margrabe_d1">[margrabe_d1]</a> and <a href="#margrabe_d2" data-reference-type="eqref" data-reference="margrabe_d2">[margrabe_d2]</a> and equivalently in the Black formulas <a href="#black_d1" data-reference-type="eqref" data-reference="black_d1">[black_d1]</a> and <a href="#black_d2" data-reference-type="eqref" data-reference="black_d2">[black_d2]</a>. This position would be financed by shorting the discount bond to raise the difference between the cost of the portfolio and the option value so that the cost of the total portfolio (including the short discount bond) equals the option value. However, the first asset here consists of a long forward contract plus <span class="math inline">\(F(0)\)</span> units of the discount bond, and the second asset is <span class="math inline">\(K\)</span> units of the discount bond. Furthermore, we are using the discount bond to finance the position (including the buying and shorting of the discount bond!). We can conclude that buying <span class="math inline">\(\N(d_1)\)</span> units of the first asset means that we should buy <span class="math inline">\(\N(d_1)\)</span> forward contracts. This has zero cost. Therefore, the portfolio value will equal the value of the discount bonds, and this must equal the option value. So, we actually invest the option value <span class="math display">\[P(0,T')F(0)\N(d_1) - P(0,T')K\N(d_2)\; ,\]</span> in the discount bond, which means buying <span class="math inline">\(F(0)\N(d_1)-K\N(d_2)\)</span> units of the bond.</p>
<p>A more direct analysis of hedging options on forwards is possible and instructive. We will consider that topic further in Sect. <a href="#s_hedgingforwards" data-reference-type="ref" data-reference="s_hedgingforwards">[s_hedgingforwards]</a>.</p>
</section>
<section id="s_futuresforwards" class="level1" data-number="14">
<h1 data-number="14"><span class="header-section-number">14</span> The Relation of Futures Prices to Forward Prices</h1>
<p>The difference between futures and forward contracts is that futures are marked to market, which means that daily gains and losses are posted to the investor’s margin account. Thus, there are interim cash flows on a futures contract, whereas the only cash flows on a forward contract are at the maturity of the forward. We will establish three useful facts in this section, the last of which follows from the first two:</p>
<p>We consider the idealized case in which the futures contract is continuously marked to market. Assume there is an instantaneously risk-free asset with rate of return <span class="math inline">\(r\)</span>, which could vary randomly over time, and define, as in Sect. <a href="#s_continuouscompounding" data-reference-type="ref" data-reference="s_continuouscompounding">[s_continuouscompounding]</a>, <span class="math display">\[R(t) = \exp\left(\int_0^t r(s)\,ds\right)\; ,\]</span> which is the value at date <span class="math inline">\(t\)</span> of a $1 investment in the asset at date 0, with interest continuously reinvested. Let <span class="math inline">\(T'\)</span> denote the maturity of the futures contract, and let <span class="math inline">\(F^*(t)\)</span> denote the futures price at dates <span class="math inline">\(t \leq T'\)</span> (the <span class="math inline">\(^*\)</span> notation is to distinguish the futures price from the forward price <span class="math inline">\(F\)</span>). Consider the portfolio strategy that starts with zero dollars and one long futures contract at price <span class="math inline">\(F^*(0)\)</span> and which continuously invests and withdraws from the risk-free asset the gains and losses on the futures contract. Let <span class="math inline">\(V(t)\)</span> denote the value of this portfolio at date <span class="math inline">\(t\)</span>. The change in the value of the portfolio at any instant is the interest earned (or paid, if <span class="math inline">\(V&lt;0\)</span>) on the risk-free asset plus the gain/loss on the futures. This means that <span class="math display">\[\D V = rV\,\D t + \D F^*\; .\]</span> Because all gains and losses on this portfolio are reinvested, <span class="math inline">\(V\)</span> is the price of a non-dividend-paying asset. Therefore, under the risk-neutral measure (i.e., using <span class="math inline">\(R\)</span> as the numeraire), the ratio <span class="math inline">\(V/R\)</span> must be a martingale and hence have zero drift. From Itô’s formula, <span class="math display">\[\begin{align*}
\frac{\D (V/R)}{V/R} &amp;= \frac{\D V}{V} - \frac{\D R}{R}\\
&amp;=\frac{rV\,\D t + \D F^*}{V} - r\,\D t\\
&amp;= \frac{\D F^*}{V}\;.
\end{align*}\]</span> Thus, the drift of <span class="math inline">\(V/R\)</span> being zero implies the drift of <span class="math inline">\(F^*\)</span> is zero. We need to assume (and can assume) that <span class="math inline">\(F^*\)</span> is an Itô process with finite expected quadratic variation—cf.&nbsp;condition <a href="#regularity1" data-reference-type="eqref" data-reference="regularity1">[regularity1]</a>—in which case the absence of a drift implies that it is a martingale.</p>
<p>Now we turn to fact (2). Consider a forward contract with maturity <span class="math inline">\(T'\)</span> and a discount bond also maturing at <span class="math inline">\(T'\)</span>. Let <span class="math inline">\(F(t)\)</span> denote the forward price and let <span class="math inline">\(P(t,T')\)</span> denote the price of the discount bond at dates <span class="math inline">\(t \leq T'\)</span>. We observed in Sect. <a href="#s_black" data-reference-type="ref" data-reference="s_black">[s_black]</a> that there is a non-dividend paying asset with price <span class="math inline">\(P(t,T')F(t)\)</span>. When we use the discount bond as the numeraire, the ratio <span class="math inline">\(P(t,T')F(t)/P(t,T') = F(t)\)</span> must be a martingale, which is fact (2). Because of this fact, a probability measure corresponding to a discount bond being the numeraire is called a “forward measure.” </p>
<p>Suppose now that interest rates are deterministic, that is, even if <span class="math inline">\(r\)</span> varies over time, it does so in a non-random way. Then the discount bond price at date 0 must be the discount factor <span class="math display">\[P(0,T') = \exp\left(-\int_0^{T'} r(t)\,\D t\right)\; .\]</span> Equation <span class="math inline">\(\eqref{probSnumeraire}\)</span> gives the probability of any event <span class="math inline">\(A\)</span> when the discount bond is used as the numeraire as <span class="math display">\[\text{prob}^P[A] = E\left[1_A\phi(T')\frac{P(T',T')}{P(0,T')}\right] = \exp\left(-\int_0^{T'} r(t)\,\D t\right)E[1_A\phi(T')]\; ,\]</span> where <span class="math inline">\(\phi\)</span> denotes the state prices. On the other hand, the same equation gives the probability of <span class="math inline">\(A\)</span> when <span class="math inline">\(R\)</span> is used as the numeraire as <span class="math display">\[\text{prob}^R[A] = E\left[1_A\phi(T')\frac{R(T')}{R(0)}\right] = \exp\left(-\int_0^{T'} r(t)\,\D t\right)E[1_A\phi(T')]\; .\]</span> Therefore, the two probability measures are the same, and consequently the expectations <span class="math inline">\(E^P\)</span> and <span class="math inline">\(E^R\)</span> are the same. Now using the fact that both the futures price and the forward price must equal the spot price at maturity, we have <span class="math inline">\(F^*(T') = F(T')\)</span>, and, from the martingale properties, <span class="math display">\[F^*(t) = E_t^P[F^*(T')] = E_t^P[F(T')] = E_t^R[F(T')] = F(t)\; ,\]</span> which is fact (3).</p>
</section>
<section id="s_futuresoptions" class="level1" data-number="15">
<h1 data-number="15"><span class="header-section-number">15</span> Futures Options</h1>
<p>Now we consider options on futures contracts, assuming that interest rates are deterministic. We just showed that in this circumstance the futures price will equal the forward price for a contract of the same maturity. However, the values of options on a futures contract do not equal the values of options on the corresponding forward contract.</p>
<p>The difference is due to marking to market. Consider futures and forward contracts with maturity <span class="math inline">\(T'\)</span> and options maturing at <span class="math inline">\(T \leq T'\)</span>. Exercise of a call option on a futures contract will roll the investor into a long futures contract with futures price equal to the market futures price at that date. The difference <span class="math inline">\(F^*(T)-K\)</span> between the market futures price and the strike price of the option is immediately credited to the investor’s margin account. On the other hand, exercise of an option on a forward and sale of the forward results in a cash flow of <span class="math inline">\(F(T) - K\)</span> that is received at the maturity date <span class="math inline">\(T'\)</span> of the forward. Therefore, the value at maturity of a call option on a futures contract is <span class="math inline">\(\max(0,F^*(T)-K)\)</span>, whereas, as noted before, the value of a call option on a forward at the maturity of the option is <span class="math inline">\(P(T,T')\max(0,F(T)-K)\)</span></p>
<p>As in the analysis of options on forwards, an options on a futures contract can be viewed as an exchange option, where one exchanges the asset with price <span class="math inline">\(S_2(t) = P(t,T)K\)</span> at date <span class="math inline">\(t\leq T\)</span> for the asset with price <span class="math inline">\(S_1(t) = P(t,T)F^*(t)\)</span>. The asset with price <span class="math inline">\(S_2\)</span> is of course <span class="math inline">\(K\)</span> units of the discount bond maturing at <span class="math inline">\(T\)</span>. Assuming interest rates are deterministic, we have <span class="math inline">\(F^*(t) = F(t)\)</span>, and we noted in Sect. <a href="#s_black" data-reference-type="ref" data-reference="s_black">[s_black]</a> that <span class="math inline">\(P(t,T)F(t)\)</span> is the price of a non-dividend-paying asset. Thus, we can apply Margrabe’s formula to price call (and put) options on futures when interest rates are deterministic. Compared to options on forwards, the difference is that the discount bonds defining the prices <span class="math inline">\(S_1\)</span> and <span class="math inline">\(S_2\)</span> mature at the maturity date of the option rather than at the maturity date of the futures or forward contract. The result is: We can calculate these values from the <code>Black_Call</code> and <code>Black_Put</code> functions by inputting the price of the discount bond maturing when the option matures rather than the price of the discount bond maturing when the forward/futures matures. We will derive delta hedges for futures options in Sect. <a href="#s_hedgingforwards" data-reference-type="ref" data-reference="s_hedgingforwards">[s_hedgingforwards]</a>.</p>
</section>
<section id="s_volatility" class="level1" data-number="16">
<h1 data-number="16"><span class="header-section-number">16</span> Time-Varying Volatility</h1>
<p>All of the option pricing formulas in this chapter were derived from Margrabe’s formula, the main assumption of which is that the logarithm of the ratio of asset prices at date <span class="math inline">\(T\)</span> is normally distributed with variance equal to <span class="math inline">\(\sigma^2T\)</span>. As in Sect. <a href="Chapter3.html#s_timevaryingvolatility" data-reference-type="ref" data-reference="s_timevaryingvolatility">[s_timevaryingvolatility]</a> regarding the Black-Scholes formulas, the formulas in this chapter can easily be adapted to allow a time-varying but non-random volatility. If the volatility is a non-random function <span class="math inline">\(\sigma(t)\)</span> of time, then we define <span class="math inline">\(\sigma_{\text{avg}}\)</span> to be the number such that <span class="math display">\[\begin{equation}\label{averagesigma}
\sigma_{\text{avg}}^2 = \frac{1}{T}\int_0^T \sigma^2(t)\,\D t\;.
\end{equation}\]</span> We should input <span class="math inline">\(\sigma_{\text{avg}}\)</span> as (i) the volatility of the ratio of asset prices in Margrabe’s formula and the deferred exchange option formula if <span class="math inline">\(\sigma(t)\)</span> is the volatility of the ratio at date <span class="math inline">\(t\)</span> or as (ii) the volatility of the forward price in Black’s and Merton’s formulas if <span class="math inline">\(\sigma(t)\)</span> is the volatility of the forward price at date <span class="math inline">\(t\)</span>. As in Sect. <a href="Chapter3.html#s_timevaryingvolatility" data-reference-type="ref" data-reference="s_timevaryingvolatility">[s_timevaryingvolatility]</a>, equation <a href="#averagesigma" data-reference-type="eqref" data-reference="averagesigma">[averagesigma]</a> enables one to interpret and apply different implied volatilities computed at different maturities. Another circumstance in which it can be useful is in conjunction with bond price models such as the Vasicek and extended Vasicek models described in Chap. <a href="Chapter13.html" data-reference-type="ref" data-reference="c_vasicek">[c_vasicek]</a> that imply a time-varying non-random volatility for discount bond prices.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> If we assume a constant volatility for the price of the underlying and a constant correlation between the underlying and the discount bond, then we will have a time-varying non-random forward price volatility via <a href="#mertonsigma" data-reference-type="eqref" data-reference="mertonsigma">[mertonsigma]</a>, and we should input the “average volatility” <span class="math inline">\(\sigma_{\text{avg}}\)</span> defined in <a href="#averagesigma" data-reference-type="eqref" data-reference="averagesigma">[averagesigma]</a> for the forward price volatility in Black’s and Merton’s formulas. As mentioned in Sect. <a href="#s_merton" data-reference-type="ref" data-reference="s_merton">[s_merton]</a>, this will be more important for long-term options than for short-term options.</p>
</section>
<section id="s_hedgingforwards" class="level1" data-number="17">
<h1 data-number="17"><span class="header-section-number">17</span> Hedging with Forwards and Futures</h1>
<p>In Chap. <a href="#c_foreignexchange" data-reference-type="ref" data-reference="c_foreignexchange">[c_foreignexchange]</a>, we considered hedging quanto contracts with currency forwards. In Sect. <a href="#s_forwardhedging" data-reference-type="ref" data-reference="s_forwardhedging">[s_forwardhedging]</a>, we considered hedging options on forwards with forwards. To present a more complete analysis of these topics, we need to discuss the gains and losses that accrue from trading forwards.</p>
<p>Consider dates <span class="math inline">\(t&lt;u\)</span> and a forward contract with maturity <span class="math inline">\(T\)</span>. Suppose we purchase <span class="math inline">\(x(t)\)</span> forwards at date <span class="math inline">\(t\)</span> and then change our position in forwards to <span class="math inline">\(x(u)\)</span> at time <span class="math inline">\(u\)</span>. The purchase/sale of <span class="math inline">\(x(u)-x(t)\)</span> new contracts does not affect the portfolio value, so the change in the value of the portfolio is the change in the value of the <span class="math inline">\(x(t)\)</span> contracts purchased at date <span class="math inline">\(t\)</span>. These contracts were worth zero at date <span class="math inline">\(t\)</span>, because forward contracts have zero value at initiation. Selling them at date <span class="math inline">\(u\)</span> cancels the obligation to deliver/receive the underlying, leaving one with a cash flow of <span class="math inline">\(x(t)[F(u)-F(t)]\)</span> dollars to be received at date <span class="math inline">\(T\)</span>. The value of this cash flow at date <span class="math inline">\(u\)</span> is <span class="math inline">\(x(t)P(u,T)[F(u)-F(t)]\)</span>. We can write this as <span class="math display">\[\begin{align*}
x(t)P(u,T)&amp;[F(u)-F(t)]  \\\begin{split}&amp;= x(t)\big[P(t,T)[F(u)-F(t)] + [P(u,T)-P(t,T)][F(u)-F(t)]\big]\\
&amp;= x(t)\big[P(t,T)\,\varDelta F + (\varDelta P)(\varDelta F)\big]\;.
\end{split}
\end{align*}\]</span> This motivates the following definition: </p>
<p>Hedging with futures is a bit simpler, because the gains and losses are received instantaneously (daily, at least) rather than being deferred to the contract maturity. Letting <span class="math inline">\(x(t)\)</span> denote the number of futures contracts held at date <span class="math inline">\(t\)</span> and <span class="math inline">\(F^*(t)\)</span> the futures price, the cash flow from the contracts is <span class="math inline">\(x(t)\,\D F^*(t)\)</span>. This is also the change in the value of the portfolio, because marking to market means that the contracts always have zero value.</p>
<p>To compare hedging with futures and forwards, assume there is a constant risk-free rate~<span class="math inline">\(r\)</span>. Let <span class="math inline">\(T\)</span> denote the maturity of the futures and forward contracts. Because there is a constant risk-free rate, we have <span class="math inline">\(P(t,T) = \E^{-r(T-t)}\)</span>, which implies <span class="math inline">\((\D P)(\D F) =0\)</span>. Moreover, futures prices equal forward prices. Thus, Comparing <span class="math inline">\(\eqref{forwardchange100}\)</span> and <span class="math inline">\(\eqref{futureschange100}\)</span>, we see that if <span class="math inline">\(x(t)\)</span> is the number of forward contracts that should be held in a hedge, then <span class="math display">\[\begin{equation}\label{futuresxy}
y(t) = \E^{-r(T-t)}x(t)
\end{equation}\]</span> is the number of futures contracts that should be held, because with this number of contracts we have <span class="math display">\[\begin{align*}
\text{Change in Forward Portfolio} &amp; = x(t)\E^{-r(T-t)}\,\D F(t)\\
&amp; = y(t)\,\D F(t)\\
&amp; = \text{Change in Futures Portfolio}\;.
\end{align*}\]</span> In short, we don’t require as many futures contracts as forward contracts, and the scaling factor to convert from forwards to futures is just the present value factor <span class="math inline">\(\E^{-r(T-t)}\)</span>.</p>
<p>For example, the result of Sect. <a href="Chapter6.html#s_replicatingquantos" data-reference-type="ref" data-reference="s_replicatingquantos">[s_replicatingquantos]</a> on replicating the payoff <span class="math inline">\(\bar{X}S(T)\)</span> with forward contracts leads to the following:</p>
<p>We can use <a href="#futuresxy" data-reference-type="eqref" data-reference="futuresxy">[futuresxy]</a> to determine how to delta hedge futures options. As explained in Sect. <a href="#s_futuresoptions" data-reference-type="ref" data-reference="s_futuresoptions">[s_futuresoptions]</a>, assuming non-random interest rates, futures options are more valuable than options on forwards because futures are marked to market upon exercise of an option. Specifically, Black’s formulas <a href="#blackcombined" data-reference-type="eqref" data-reference="blackcombined">[blackcombined]</a> for options on forwards and <a href="#blackcombinedfutures" data-reference-type="eqref" data-reference="blackcombinedfutures">[blackcombinedfutures]</a> for options on futures show that the values are the same except for the maturity of the discount bond appearing in the equations. With a constant risk-free rate <span class="math inline">\(r\)</span>, options maturing at <span class="math inline">\(T\)</span> and futures/forwards maturing at <span class="math inline">\(T'\)</span>, the relation is</p>
<p><span class="math display">\[\text{Value of Futures Option} = \E^{r(T'-T)} \times \text{Value of Forward Option}\; .\]</span> Because the scaling factor <span class="math inline">\(\E^{r(T'-T)}\)</span> does not change as time passes, this implies that as time passes we have <span class="math display">\[\begin{multline}\label{futures1001}
\text{Change in Futures Option Value } \\= \E^{r(T'-T)} \times \text{Change in Forward Option Value}\;.
\end{multline}\]</span> We can combine <a href="#futuresxy" data-reference-type="eqref" data-reference="futuresxy">[futuresxy]</a> and <a href="#futures1001" data-reference-type="eqref" data-reference="futures1001">[futures1001]</a> to convert from a hedge of a forward option using forward contracts, which we discussed in Sect. <a href="#s_forwardhedging" data-reference-type="ref" data-reference="s_forwardhedging">[s_forwardhedging]</a>, to a hedge of a futures option using futures contracts. For example, we concluded in Sect. <a href="#s_forwardhedging" data-reference-type="ref" data-reference="s_forwardhedging">[s_forwardhedging]</a> that we should be long <span class="math inline">\(\N(d_1)\)</span> forwards to hedge a short call option on a forward contract. Consequently, <a href="#futuresxy" data-reference-type="eqref" data-reference="futuresxy">[futuresxy]</a> shows that we can hedge a short call option on a forward by being long <span class="math inline">\(\E^{-r(T'-t)}\N(d_1)\)</span> futures, and then we see from <a href="#futures1001" data-reference-type="eqref" data-reference="futures1001">[futures1001]</a> that the hedge for a short call on a futures is being long <span class="math display">\[\E^{r(T'-T)}\E^{-r(T'-t)}\N(d_1) = \E^{-r(T-t)}\N(d_1)\]</span> futures contracts.</p>
<p>In Sect. <a href="#s_forwardhedging" data-reference-type="ref" data-reference="s_forwardhedging">[s_forwardhedging]</a>, we derived the hedges for forward options by considering them as exchange options. We can use the definition <a href="#changeforwardvalue" data-reference-type="eqref" data-reference="changeforwardvalue">[changeforwardvalue]</a> to confirm that our calculations were correct. Consider hedging a short call maturing at <span class="math inline">\(T\)</span> on a forward contract maturing at <span class="math inline">\(T'\)</span>. We can assume interest rates vary randomly and use discount bonds in the hedge. We stated in Sect. <a href="#s_forwardhedging" data-reference-type="ref" data-reference="s_forwardhedging">[s_forwardhedging]</a> that we should hold <span class="math inline">\(F(0)\N(d_1)-K\N(d_2)\)</span> units of the discount bond maturing at~<span class="math inline">\(T'\)</span> and we should go long <span class="math inline">\(\N(d_1)\)</span> forwards to hedge the short call. This is a zero-cost portfolio when we include the proceeds from selling the call. Using <a href="#changeforwardvalue" data-reference-type="eqref" data-reference="changeforwardvalue">[changeforwardvalue]</a>, we see that the change in the value of the portfolio will be <span class="math display">\[\begin{equation}\label{forwardhedging1}
-\D C + [F(0)\N(d_1)-K\N(d_2)]\D P + \N(d_1)[P(0,T')\,\D F + (\D P)(\D F)]\;.
\end{equation}\]</span> The value of the call at date <span class="math inline">\(t\)</span> will be a function of <span class="math inline">\(t\)</span>, <span class="math inline">\(P(t,T')\)</span> and <span class="math inline">\(F(t)\)</span>, which we write as <span class="math inline">\(C(t,P,F)\)</span>. From It^o’s formula, <span class="math display">\[\begin{align*}
\D C &amp;= \frac{\partial C}{\partial t}\,\D t + \frac{\partial C}{\partial P}\,\D P + \frac{\partial C}{\partial F}\,\D F \\  &amp;\qquad + \frac{1}{2}\frac{\partial^2 C}{\partial P^2}\, (\D P)^2   + \frac{1}{2}\frac{\partial^2 C}{\partial F^2}\, (\D F)^2 + \frac{\partial^2 C}{\partial F \partial P} (\D P)(\D F)\;.\\
&amp;=\Theta\,\D t + \delta_P\,\D P + \delta_F\,\D F  + \frac{1}{2}\Gamma_{PP} (\D P)^2 + \frac{1}{2}\Gamma_{FF} (\D F)^2  + \Gamma_{FP}\,(\D P)(\D F)\;,
\end{align*}\]</span> where the <span class="math inline">\(\delta\)</span>’s and <span class="math inline">\(\Gamma\)</span>’s denote the first and second partial derivatives indicated by the subscripts. Inserting this formula into <a href="#forwardhedging1" data-reference-type="eqref" data-reference="forwardhedging1">[forwardhedging1]</a> and making use of the formulas in the table in Sect. <a href="#s_forwardhedging" data-reference-type="ref" data-reference="s_forwardhedging">[s_forwardhedging]</a>, we see that the <span class="math inline">\(\D P\)</span> terms cancel because <span class="math inline">\(\delta_P = F(0)\N(d_1)-K\N(d_2)\)</span>. Furthermore, the <span class="math inline">\(\D F\)</span> terms cancel because <span class="math inline">\(\delta_F = \N(d_1)P(0,T')\)</span>. Thus, there is no exposure in the portfolio to the two risky asset prices <span class="math inline">\(P\)</span> and <span class="math inline">\(F\)</span>. Furthermore, <span class="math inline">\(\Gamma_{PP} = 0\)</span> and the <span class="math inline">\((\D P)(\D F)\)</span> terms cancel because <span class="math inline">\(\Gamma_{FP} = \N(d_1)\)</span>. These substitutions simplify the change <a href="#forwardhedging1" data-reference-type="eqref" data-reference="forwardhedging1">[forwardhedging1]</a> in the value of the portfolio to <span class="math display">\[-\Theta\,\D t - \frac{1}{2}\Gamma_{FF} (\D F)^2  = \frac{\sigma P(0,T')F(0)\nd(d_1)}{2\sqrt{T}}\,\D t  -  \frac{P(0,T')\nd(d_1)}{2\sigma\sqrt{T}F(0)}\,(\D F)^2\; ,\]</span> which we can see to be zero because <span class="math inline">\((\D F)^2 = \sigma^2F^2\,\D t\)</span>. Thus, the hedge is perfect when continuously rebalanced.</p>
</section>
<section id="s_margrabecomplete" class="level1" data-number="18">
<h1 data-number="18"><span class="header-section-number">18</span> Market Completeness</h1>
<p>A formal definition of market completeness must specify which state-contingent claims (random variables depending on the history of prices) can be replicated by trading the marketed assets—for example, one might want all of the claims with finite means to be replicable, or only all of the claims with finite variances, etc. A formal analysis of market completeness is not presented in this book, except for the binomial and trinomial models in Chap. <a href="#c_basics" data-reference-type="ref" data-reference="c_basics">[c_basics]</a>. However, we have stated that stochastic volatility models are incomplete. This follows intuitively from the fact that a portfolio containing only one risky asset (the underlying) cannot be perfectly correlated with the two Brownian motions that determine the value of a derivative asset (the Brownian motions driving the price of the underlying and its volatility). In general, a market must include an instantaneously risk-free asset and as many risky assets as there are Brownian motions in order to be complete.</p>
<p>The exchange-option model of Margrabe—with two risky assets, two Brownian motions, and no risk-free asset—is obviously incomplete. For example, it is impossible to have exactly $100 at date <span class="math inline">\(T\)</span>. With no risk-free asset, there is simply no way to store money. This may seem far-fetched, but we might be interested in payoffs in “real” (i.e., inflation-adjusted) dollars, in which case the absence of a risk-free asset may be a normal situation. In any case, we have not assumed a risk-free asset exists, but we have priced options without appealing to “equilibrium” arguments. This deserves some clarification.</p>
<p>As mentioned above, a formal definition of market completeness must specify which contingent claims are to be replicable. The Margrabe model is complete for a certain set of contingent claims. Contingent claims of the form <span class="math inline">\(S_2(T)X(T)\)</span> where <span class="math inline">\(X(T)\)</span> is a random variable depending on the relative prices <span class="math inline">\(S_1(t)/S_2(t)\)</span> for <span class="math inline">\(0 \leq t\leq T\)</span> can be replicated. Likewise, contingent claims of the form <span class="math inline">\(S_1(T)X(T)\)</span> can be replicated. The payoffs of exchange options are of this form, so they can be priced by arbitrage, even though there are other contingent claims (for example, receiving exactly $100 at date <span class="math inline">\(T\)</span>) that cannot be replicated and hence cannot be priced by arbitrage. Likewise, the Black and Merton models in which there is a zero-coupon bond but no instantaneously risk-free asset are examples of incomplete markets that are still sufficiently complete to price options by arbitrage (the options can be replicated). The proof that the Margrabe model is complete in the sense stated here follows from the change of numeraire argument used to derive Margrabe’s formula from the Black-Scholes formula (recall that the second asset is risk-free when we use it as the numeraire, so there is a risk-free asset under the new numeraire) and a proof that the Black-Scholes model is complete (which we have omitted, except to show that European options can be replicated).</p>
</section>
<section id="problems" class="level1 unnumbered">
<h1 class="unnumbered">Problems</h1>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>The volatility of a discount bond price cannot be constant because it must go to zero as the bond approaches maturity.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>The volatility of a discount bond price cannot be constant because it must go to zero as the bond approaches maturity.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>The volatility of a discount bond price cannot be constant because it must go to zero as the bond approaches maturity.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>The volatility of a discount bond price cannot be constant because it must go to zero as the bond approaches maturity.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Chapter6.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Foreign Exchange</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Chapter8.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Exotic Options</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>