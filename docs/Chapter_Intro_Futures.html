<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>3&nbsp; Futures – Pricing and Hedging Derivative Securities</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Chapter_Intro_Arbitrage.html" rel="next">
<link href="./Chapter_Intro_Options.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-219a68e4d36c545440d351964d4988f6.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-2281372ddb8f8a4bf28bfb0040ef0756.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
<style>
div.callout-Extra.callout {
  border-left-color: #a1bced;
}
div.callout-Extra.callout-style-default > .callout-header {
  background-color: rgba(161, 188, 237, 0.13);
}
div.callout-Extra .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Extra.callout-style-default .callout-icon::before, div.callout-Extra.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free';
  content: '\f48b';
  background-image: none;
}
div.callout-Principle.callout {
  border-left-color: #eb4034;
}
div.callout-Principle.callout-style-default > .callout-header {
  background-color: rgba(235, 64, 52, 0.13);
}
div.callout-Principle .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Principle.callout-style-default .callout-icon::before, div.callout-Principle.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free';
  content: '\f06a';
  background-image: none;
}
div.callout-Rule.callout {
  border-left-color: #12801f;
}
div.callout-Rule.callout-style-default > .callout-header {
  background-color: rgba(18, 128, 31, 0.13);
}
div.callout-Rule .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Rule.callout-style-default .callout-icon::before, div.callout-Rule.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free';
  content: '\f164';
  background-image: none;
}
div.callout-Example.callout {
  border-left-color: #a1bced;
}
div.callout-Example.callout-style-default > .callout-header {
  background-color: rgba(161, 188, 237, 0.13);
}
div.callout-Example .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-Example.callout-style-default .callout-icon::before, div.callout-Example.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free';
  content: '\f185';
  background-image: none;
}
</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="custom.css">
</head>

<body class="nav-sidebar floating fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Chapter_Intro_Derivatives.html">Part 1: Introduction</a></li><li class="breadcrumb-item"><a href="./Chapter_Intro_Futures.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Futures</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Pricing and Hedging Derivative Securities</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://chat.derivative-securities.org/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-chat-square-text"></i></a>
    <a href="https://github.com/math-finance-book/book-published-code.git" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 1: Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Intro_Derivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Derivative Securities</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Intro_Options.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Options</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Intro_Futures.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Futures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Intro_Arbitrage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Arbitrage and Trees</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 2: Mathematical Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Brownian.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Brownian Motion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Ito.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ito Processes and Ito’s Formula</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_GBM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Geometric Brownian Motion</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 3: Arbitrage Pricing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Arbitrage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">More on Arbitrage Pricing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Deltas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Delta Hedges, Replication, and PDEs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Girsanov.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Arbitrage Pricing in Continuous Time</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 4: Black-Scholes and Extensions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_BlackScholes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Black-Scholes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Merton.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Merton, Black, and Margrabe</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Asians.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Asians, Baskets, and Spreads</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Exotics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Other Exotics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 5: Numerical Methods</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_MonteCarlo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Monte Carlo Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_Binomial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Binomial and Trinomial Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Appendix_Binomial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Introduction to Binomial Tree Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Appendix_MonteCarlo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Introduction to Monte Carlo Simulations</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Chapter_Intro_Derivatives.html">Part 1: Introduction</a></li><li class="breadcrumb-item"><a href="./Chapter_Intro_Futures.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Futures</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-c:futures" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Futures</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Futures contracts are among the oldest and most important derivative securities, with organized futures trading dating back centuries. These standardized agreements to buy or sell an asset at a predetermined price on a future date serve critical functions in modern financial markets, from price discovery and risk management to speculation and arbitrage.</p>
<p>A <strong>futures contract</strong> is a standardized agreement between two parties to trade a specific asset at a predetermined price on a specified future date. Unlike forward contracts, which are customized over-the-counter agreements, futures contracts are traded on organized exchanges with standardized terms, daily settlement, and clearinghouse guarantees.</p>
<section id="key-features-of-futures-contracts" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="key-features-of-futures-contracts"><span class="header-section-number">3.1</span> Key Features of Futures Contracts</h2>
<section id="standardization-and-exchange-trading" class="level3">
<h3 class="anchored" data-anchor-id="standardization-and-exchange-trading">Standardization and Exchange Trading</h3>
<p><strong>Contract Specifications</strong>: Exchanges standardize every aspect of futures contracts: - <strong>Underlying asset</strong>: Specific grade, quality, and delivery location - <strong>Contract size</strong>: Standard quantity (e.g., 5,000 bushels of corn, 100 troy ounces of gold) - <strong>Delivery months</strong>: Specific months when contracts expire - <strong>Tick size</strong>: Minimum price movement (e.g., $0.25 per bushel for corn) - <strong>Daily price limits</strong>: Maximum allowed price changes in a single session</p>
<p><strong>Example</strong>: The Chicago Mercantile Exchange (CME) E-mini S&amp;P 500 futures contract specifies: - Underlying: S&amp;P 500 Index - Contract size: $50 × S&amp;P 500 Index value - Delivery months: March, June, September, December - Tick size: 0.25 index points = $12.50 per contract</p>
</section>
<section id="long-and-short-positions" class="level3">
<h3 class="anchored" data-anchor-id="long-and-short-positions">Long and Short Positions</h3>
<p><strong>Long Position</strong>: Agreement to buy the underlying asset - Profits when futures price rises - Obligated to accept delivery (unless closed before expiration) - Initial margin required</p>
<p><strong>Short Position</strong>: Agreement to sell the underlying asset<br>
- Profits when futures price falls - Obligated to make delivery (unless closed before expiration) - Initial margin required</p>
<p>Unlike options, both parties to a futures contract have obligations, not rights.</p>
</section>
<section id="physical-vs.-cash-settlement" class="level3">
<h3 class="anchored" data-anchor-id="physical-vs.-cash-settlement">Physical vs.&nbsp;Cash Settlement</h3>
<p><strong>Physical Settlement</strong>: Actual delivery of the underlying asset - Common for commodities (agricultural products, metals, energy) - Delivery occurs at exchange-designated locations - Most contracts are closed before delivery</p>
<p><strong>Cash Settlement</strong>: Payment of cash difference between futures and spot prices - Used for financial futures (stock indices, interest rates) - No physical asset changes hands - Settlement price typically based on underlying index value</p>
</section>
</section>
<section id="marking-to-market" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="marking-to-market"><span class="header-section-number">3.2</span> Marking to Market</h2>
<p>One of the most distinctive features of futures trading is the <strong>daily settlement</strong> or “marking to market” process. This mechanism virtually eliminates counterparty risk and enables leverage while maintaining market integrity.</p>
<section id="the-daily-settlement-process" class="level3">
<h3 class="anchored" data-anchor-id="the-daily-settlement-process">The Daily Settlement Process</h3>
<p><strong>End-of-Day Valuation</strong>: Each trading day, the exchange establishes a <strong>settlement price</strong> (typically close to the closing price) for each futures contract. All open positions are marked to this price.</p>
<p><strong>Variation Margin</strong>: The daily profit or loss on each position is calculated and immediately transferred between accounts: - <strong>Profit</strong>: Credited to the trader’s margin account - <strong>Loss</strong>: Debited from the trader’s margin account</p>
<p><strong>Example</strong>: Suppose you buy one S&amp;P 500 futures contract at 4,000: - Day 1: Settlement price = 4,010 → Gain = (4,010 - 4,000) × $50 = $500 (credited to your account) - Day 2: Settlement price = 3,990 → Loss = (3,990 - 4,010) × $50 = $1,000 (debited from your account) - Day 3: Settlement price = 4,020 → Gain = (4,020 - 3,990) × $50 = $1,500 (credited to your account)</p>
</section>
<section id="margin-requirements" class="level3">
<h3 class="anchored" data-anchor-id="margin-requirements">Margin Requirements</h3>
<p><strong>Initial Margin</strong>: Deposit required to open a futures position - Typically 3-12% of contract value (much lower than stock margin) - Provides leverage but amplifies risk - Set by exchanges based on volatility and risk assessment</p>
<p><strong>Maintenance Margin</strong>: Minimum account balance required to keep position open - Usually 75-80% of initial margin - If account falls below maintenance margin, a <strong>margin call</strong> occurs</p>
<p><strong>Margin Call Process</strong>: 1. Account balance falls below maintenance margin 2. Trader must deposit additional funds (variation margin) to restore account to initial margin level 3. If trader fails to meet margin call, position is liquidated</p>
</section>
<section id="why-marking-to-market-works" class="level3">
<h3 class="anchored" data-anchor-id="why-marking-to-market-works">Why Marking to Market Works</h3>
<p><strong>Eliminates Credit Risk</strong>: Daily settlement ensures that losers pay winners immediately, preventing the accumulation of large credit exposures.</p>
<p><strong>Enables Leverage</strong>: Because credit risk is minimized, exchanges can offer high leverage ratios that would be impossible in other markets.</p>
<p><strong>Price Transparency</strong>: Daily marking provides continuous price discovery and ensures that futures prices reflect current market conditions.</p>
<p><strong>Liquidity Enhancement</strong>: Reduced counterparty risk attracts more participants, increasing market liquidity.</p>
</section>
</section>
<section id="spot-futures-parity" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="spot-futures-parity"><span class="header-section-number">3.3</span> Spot-Futures Parity</h2>
<p>The relationship between spot prices and futures prices is governed by arbitrage principles similar to those in options markets. <strong>Spot-futures parity</strong> establishes the theoretical fair value of a futures contract based on the current spot price and carrying costs.</p>
<section id="the-basic-parity-relationship" class="level3">
<h3 class="anchored" data-anchor-id="the-basic-parity-relationship">The Basic Parity Relationship</h3>
<p>For a futures contract on a non-dividend-paying asset:</p>
<p><span class="math display">\[F = S e^{rT}\]</span></p>
<p>Where: - <span class="math inline">\(F\)</span> = Futures price - <span class="math inline">\(S\)</span> = Current spot price<br>
- <span class="math inline">\(r\)</span> = Risk-free interest rate - <span class="math inline">\(T\)</span> = Time to expiration</p>
<p>This relationship reflects the <strong>cost of carry</strong> - the net cost of holding the underlying asset until the futures expiration date.</p>
</section>
<section id="derivation-through-arbitrage" class="level3">
<h3 class="anchored" data-anchor-id="derivation-through-arbitrage">Derivation Through Arbitrage</h3>
<p>Consider two strategies with identical payoffs at time <span class="math inline">\(T\)</span>:</p>
<p><strong>Strategy A</strong>: Buy futures contract at price <span class="math inline">\(F\)</span> - Cost today: <span class="math inline">\(0\)</span> (ignoring margin) - Payoff at <span class="math inline">\(T\)</span>: <span class="math inline">\(S_T - F\)</span></p>
<p><strong>Strategy B</strong>: Buy underlying asset, finance with borrowing - Cost today: <span class="math inline">\(S - S = 0\)</span> (borrow <span class="math inline">\(S\)</span> to buy asset worth <span class="math inline">\(S\)</span>)<br>
- Payoff at <span class="math inline">\(T\)</span>: <span class="math inline">\(S_T - Se^{rT}\)</span> (asset value minus loan repayment)</p>
<p>Since both strategies have identical payoffs, they must have equal costs: <span class="math display">\[S_T - F = S_T - Se^{rT}\]</span> <span class="math display">\[F = Se^{rT}\]</span></p>
</section>
<section id="incorporating-dividends-and-storage-costs" class="level3">
<h3 class="anchored" data-anchor-id="incorporating-dividends-and-storage-costs">Incorporating Dividends and Storage Costs</h3>
<p><strong>Dividend-Paying Assets</strong>: <span class="math display">\[F = (S - PV(\text{Dividends}))e^{rT}\]</span></p>
<p>Expected dividends reduce the futures price because futures holders don’t receive dividend payments.</p>
<p><strong>Commodities with Storage Costs</strong>: <span class="math display">\[F = Se^{(r+c)T}\]</span></p>
<p>Where <span class="math inline">\(c\)</span> = storage cost rate. Storage costs increase the futures price because they represent an additional carrying cost.</p>
<p><strong>Convenience Yield</strong>: For commodities, there may be benefits to physical ownership (convenience yield <span class="math inline">\(y\)</span>): <span class="math display">\[F = Se^{(r+c-y)T}\]</span></p>
<p>Convenience yield can make futures prices lower than the basic cost-of-carry model predicts.</p>
</section>
<section id="arbitrage-when-parity-is-violated" class="level3">
<h3 class="anchored" data-anchor-id="arbitrage-when-parity-is-violated">Arbitrage When Parity Is Violated</h3>
<p><strong>If <span class="math inline">\(F &gt; Se^{rT}\)</span> (Futures overpriced)</strong>: 1. Sell futures contract 2. Buy underlying asset<br>
3. Finance purchase by borrowing <span class="math inline">\(S\)</span> 4. At expiration: Deliver asset against futures, collect <span class="math inline">\(F\)</span>, repay loan <span class="math inline">\(Se^{rT}\)</span> 5. Risk-free profit: <span class="math inline">\(F - Se^{rT}\)</span></p>
<p><strong>If <span class="math inline">\(F &lt; Se^{rT}\)</span> (Futures underpriced)</strong>: 1. Buy futures contract 2. Sell underlying asset short 3. Invest proceeds <span class="math inline">\(S\)</span> at risk-free rate 4. At expiration: Take delivery via futures, return borrowed asset, collect investment proceeds 5. Risk-free profit: <span class="math inline">\(Se^{rT} - F\)</span></p>
</section>
<section id="practical-considerations" class="level3">
<h3 class="anchored" data-anchor-id="practical-considerations">Practical Considerations</h3>
<p><strong>Transaction Costs</strong>: Reduce arbitrage opportunities and create a “no-arbitrage band” around theoretical parity.</p>
<p><strong>Borrowing vs.&nbsp;Lending Rates</strong>: Different rates for borrowing and lending create wider no-arbitrage bands.</p>
<p><strong>Delivery Options</strong>: Many futures contracts give the short party choices about delivery timing, location, or grade, making exact parity calculations complex.</p>
</section>
</section>
<section id="the-expectations-hypothesis" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="the-expectations-hypothesis"><span class="header-section-number">3.4</span> The Expectations Hypothesis</h2>
<p>The <strong>expectations hypothesis</strong> proposes that futures prices represent the market’s unbiased expectation of future spot prices. This theory attempts to explain how futures prices relate to expected future spot prices, though empirical evidence provides mixed support.</p>
<section id="the-basic-expectations-hypothesis" class="level3">
<h3 class="anchored" data-anchor-id="the-basic-expectations-hypothesis">The Basic Expectations Hypothesis</h3>
<p><span class="math display">\[F = E[S_T]\]</span></p>
<p>Where <span class="math inline">\(E[S_T]\)</span> is the expected spot price at the futures expiration date <span class="math inline">\(T\)</span>.</p>
<p>Under this hypothesis: - Futures markets are purely informational, aggregating diverse opinions about future prices - No risk premium is embedded in futures prices - Futures prices should be unbiased predictors of future spot prices</p>
</section>
<section id="normal-backwardation-vs.-contango" class="level3">
<h3 class="anchored" data-anchor-id="normal-backwardation-vs.-contango">Normal Backwardation vs.&nbsp;Contango</h3>
<p><strong>Normal Backwardation</strong>: Futures prices below expected future spot prices - <span class="math inline">\(F &lt; E[S_T]\)</span> - Hedgers are net short, speculators are net long - Speculators earn risk premium for bearing price risk</p>
<p><strong>Contango</strong>: Futures prices above expected future spot prices<br>
- <span class="math inline">\(F &gt; E[S_T]\)</span> - Hedgers are net long, speculators are net short - Hedgers pay risk premium to transfer price risk</p>
<p><strong>Example</strong>: Agricultural commodities often exhibit seasonal patterns: - Post-harvest: Abundant supply, low spot prices, futures in contango - Pre-harvest: Low inventory, high spot prices, futures in backwardation</p>
</section>
<section id="the-theory-of-storage" class="level3">
<h3 class="anchored" data-anchor-id="the-theory-of-storage">The Theory of Storage</h3>
<p>The <strong>theory of storage</strong> explains futures price patterns for storable commodities:</p>
<p><strong>High Inventory Periods</strong>: - Storage is costly, convenience yield is low - Futures prices exceed spot prices (contango) - Market expects lower future prices as new supply arrives</p>
<p><strong>Low Inventory Periods</strong>: - Storage provides high convenience yield - Spot prices exceed futures prices (backwardation)<br>
- Market fears supply shortages</p>
</section>
<section id="modern-portfolio-theory-perspective" class="level3">
<h3 class="anchored" data-anchor-id="modern-portfolio-theory-perspective">Modern Portfolio Theory Perspective</h3>
<p>Modern finance theory suggests that futures prices should include risk premiums related to systematic risk:</p>
<p><span class="math display">\[F = E[S_T] - \text{Risk Premium}\]</span></p>
<p><strong>Risk Premium Determinants</strong>: - Correlation between commodity returns and market portfolio - Systematic risk of the underlying asset - Risk aversion of market participants</p>
<p><strong>Empirical Evidence</strong>: - Mixed support for pure expectations hypothesis - Some commodities show persistent backwardation or contango - Risk premiums appear to vary over time and across commodities</p>
</section>
</section>
<section id="options-on-futures" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="options-on-futures"><span class="header-section-number">3.5</span> Options on Futures</h2>
<p>Many exchanges offer <strong>options on futures contracts</strong>, creating a derivative on a derivative. These instruments combine the features of options (limited downside risk) with the efficiency and liquidity of futures markets.</p>
<section id="contract-specifications" class="level3">
<h3 class="anchored" data-anchor-id="contract-specifications">Contract Specifications</h3>
<p><strong>Call Option on Futures</strong>: Right to buy a futures contract at a specified strike price - Exercise creates a long futures position at the strike price - Immediate mark-to-market profit/loss upon exercise</p>
<p><strong>Put Option on Futures</strong>: Right to sell a futures contract at a specified strike price - Exercise creates a short futures position at the strike price - Immediate mark-to-market profit/loss upon exercise</p>
</section>
<section id="exercise-and-settlement" class="level3">
<h3 class="anchored" data-anchor-id="exercise-and-settlement">Exercise and Settlement</h3>
<p><strong>American-Style</strong>: Most options on futures can be exercised any time before expiration</p>
<p><strong>Exercise Process</strong>: 1. Option holder notifies broker of exercise decision 2. Clearinghouse assigns exercise to a random short option holder 3. Assigned option writer receives a futures position 4. Both parties receive immediate mark-to-market settlement</p>
<p><strong>Example</strong>: Crude oil futures trading at $80, holder exercises $75 call: - Call holder receives long futures position at $75 - Immediate credit: $(80 - 75) × 1,000 = <span class="math inline">\(5,000\)</span> per contract - Option writer receives short futures position at $75 - Immediate debit: $5,000 per contract</p>
</section>
<section id="pricing-models" class="level3">
<h3 class="anchored" data-anchor-id="pricing-models">Pricing Models</h3>
<p><strong>Black Model (1976)</strong>: Extension of Black-Scholes for options on futures:</p>
<p><span class="math display">\[C = e^{-rT}[F \Phi(d_1) - K \Phi(d_2)]\]</span></p>
<p><span class="math display">\[P = e^{-rT}[K \Phi(-d_2) - F \Phi(-d_1)]\]</span></p>
<p>Where: <span class="math display">\[d_1 = \frac{\ln(F/K) + \frac{1}{2}\sigma^2 T}{\sigma\sqrt{T}}\]</span> <span class="math display">\[d_2 = d_1 - \sigma\sqrt{T}\]</span></p>
<p><strong>Key Insight</strong>: The futures price <span class="math inline">\(F\)</span> replaces the spot price in the standard Black-Scholes formula, and the entire option value is discounted at the risk-free rate.</p>
</section>
<section id="strategic-applications" class="level3">
<h3 class="anchored" data-anchor-id="strategic-applications">Strategic Applications</h3>
<p><strong>Hedging Futures Positions</strong>: - Long futures + long put = Limited downside, unlimited upside - Short futures + long call = Limited downside, unlimited upside</p>
<p><strong>Speculation with Limited Risk</strong>: - Buy calls/puts instead of futures to limit maximum loss to premium - Leverage benefits of futures with risk management of options</p>
<p><strong>Spread Trading</strong>: - Calendar spreads using options on different expiration futures - Volatility trading using straddles and strangles</p>
</section>
<section id="advantages-over-options-on-spot-assets" class="level3">
<h3 class="anchored" data-anchor-id="advantages-over-options-on-spot-assets">Advantages Over Options on Spot Assets</h3>
<p><strong>Leverage</strong>: Futures provide inherent leverage, amplifying option sensitivity</p>
<p><strong>Liquidity</strong>: Major futures markets often more liquid than spot markets</p>
<p><strong>No Storage Costs</strong>: Options on financial futures avoid physical storage issues</p>
<p><strong>Extended Trading Hours</strong>: Many futures markets trade nearly 24 hours</p>
<p><strong>Mark-to-Market</strong>: Immediate settlement reduces counterparty risk</p>
</section>
</section>
<section id="futures-markets-in-the-modern-economy" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="futures-markets-in-the-modern-economy"><span class="header-section-number">3.6</span> Futures Markets in the Modern Economy</h2>
<p>Futures markets serve several crucial economic functions beyond simple speculation:</p>
<p><strong>Price Discovery</strong>: Aggregating information from diverse market participants to establish forward-looking prices</p>
<p><strong>Risk Management</strong>: Enabling producers, consumers, and investors to hedge price risks</p>
<p><strong>Market Efficiency</strong>: Facilitating arbitrage that links spot and futures markets</p>
<p><strong>Capital Efficiency</strong>: Providing leverage and liquidity that enhance capital allocation</p>
<p>Understanding these markets and their relationships to spot prices, expectations, and options provides essential foundation for derivatives pricing and risk management in modern finance.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Chapter_Intro_Options.html" class="pagination-link" aria-label="Options">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Options</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Chapter_Intro_Arbitrage.html" class="pagination-link" aria-label="Arbitrage and Trees">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Arbitrage and Trees</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions"><ul><li><a href="https://github.com/math-finance-book/book-published-code.git/blob/main/Chapter_Intro_Futures.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer></body></html>